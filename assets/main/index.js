System.register("bundle://main/_virtual/adsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts","./type.ts"],(function(e){var t,i,n,o,r,l,a,u,c,p,s,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Label,u=e.Node,c=e.VideoPlayer,p=e.Sprite,s=e.director},function(e){f=e.BasePopup},function(e){d=e.TileConnect}],execute:function(){var h,m,b,g,y,v,w,C,T;r._RF.push({},"e4fb1lxX6pNMZ0iUKVaENoF","adsPopup",void 0);var P=l.ccclass,E=l.property;e("Ads",(h=P("Ads"),m=E(a),b=E(u),g=E(u),h((w=t((v=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"countdownlabel",w,o(t)),n(t,"fill",C,o(t)),n(t,"clip",T,o(t)),t.timer=5,t.currentTime=0,t}i(t,e);var r=t.prototype;return r.onPopupShow=function(e){var t;null==(t=this.clip.getComponent(c))||t.play();var i=this.fill.getComponent(p);i&&(i.fillRange=1)},r.update=function(e){this.currentTime+=e;var t=Math.min(this.currentTime/this.timer,1),i=this.fill.getComponent(p);i&&(i.fillRange=1-t),this.currentTime>=this.timer&&this.onCountdownComplete()},r.onCountdownComplete=function(){this.countdownlabel.node.active=!0},r.onPopupHide=function(){this.countdownlabel.node.active=!1;var e=this.fill.getComponent(p);e&&(e.fillRange=1),s.emit(d.GAME_EVENTS.COUNTDOWN_RESET),this.currentTime=0},t}(f)).prototype,"countdownlabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(v.prototype,"fill",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(v.prototype,"clip",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=v))||y));r._RF.pop()}}}));

System.register("bundle://main/_virtual/AdsTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,e,o,u,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){o=n.Popup},function(n){u=n.UImanager},function(n){s=n.BaseTurn}],execute:function(){e._RF.push({},"8a66cdks8FDq6yoo0NUkqll","AdsTurn",void 0);n("AdsTurn",function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var s=e.prototype;return s.onEnter=function(){this.game.isgameOver=!0,this.game.turnOffInput(),u.togglePauseButton(!1),this.game.unChoose(),console.log("adsfrf"),u.showPopup(o.ADSPOPUP,!0,this.game.currentNumber())},s.onExit=function(){},s.onUpdate=function(){},e}(s));e._RF.pop()}}}));

System.register("bundle://main/_virtual/AnimationHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var n,e,i,t;return{setters:[function(r){n=r.inheritsLoose},function(r){e=r.cclegacy,i=r._decorator,t=r.Component}],execute:function(){var o,s;e._RF.push({},"176299ZXdJILqeT4+svLujj","AnimationHandler",void 0);var a=i.ccclass;i.property,r("AnimationHandler",a("AnimationHandler")(((s=function(r){function e(){return r.apply(this,arguments)||this}return n(e,r),e.setFillProgressBar=function(r){e.fillProgressBar=r},e.callProgress=function(){e.fillProgressBar&&e.fillProgressBar.updateProgressBar()},e}(t)).fillProgressBar=null,s.animTile=[],s.matchAnim=[],s.animList=[],o=s))||o);e._RF.pop()}}}));

System.register("bundle://main/_virtual/AssetLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,o,t,s,a,i,n,c,l,p,u;return{setters:[function(r){e=r.applyDecoratedDescriptor,o=r.inheritsLoose,t=r.initializerDefineProperty,s=r.assertThisInitialized},function(r){a=r.cclegacy,i=r._decorator,n=r.ProgressBar,c=r.resources,l=r.director,p=r.SpriteFrame,u=r.Component}],execute:function(){var d,f,g,h,y;a._RF.push({},"876d8QZRoRCaYjzyBTsf+Wl","AssetLoader",void 0);var B=i.ccclass,P=i.property;r("AssetLoader",(d=B("AssetLoader"),f=P(n),d((y=e((h=function(r){function e(){for(var e,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=r.call.apply(r,[this].concat(a))||this,t(e,"progressBar",y,s(e)),e}o(e,r);var a=e.prototype;return a.__preload=function(){if(console.log("preloading"),!this.progressBar)throw new Error("ProgressBar is required");c.loadDir("sfx"),l.preloadScene("Prototype")},a.start=function(){var r=this;c.loadDir("AllTiles",p,(function(e,o){r.updateProgressBar(e/o)}),(function(e){e?console.error(e):(r.updateProgressBar(1),r.switchToGameScene())}))},a.updateProgressBar=function(r){this.progressBar.progress=r},a.switchToGameScene=function(){l.loadScene("Prototype")},e}(u)).prototype,"progressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=h))||g));a._RF.pop()}}}));

System.register("bundle://main/_virtual/BackGround.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,i,t,r,o,a,s,c,l,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.view,c=e.UITransform,l=e.Size,u=e.Component}],execute:function(){var h,d,p,f,g,z,v;o._RF.push({},"9d56cw8xxFPkbWj8Zus+7CG","BackGround",void 0);var y=a.ccclass,B=a.property;e("BackGround",(h=y("BackGround"),d=B(Boolean),p=B(Boolean),h((z=n((g=function(e){function n(){for(var n,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,t(n,"scaleOnX",z,r(n)),t(n,"scaleOnY",v,r(n)),n}i(n,e);var o=n.prototype;return o.onLoad=function(){this.resizeBackground(),s.on("canvas-resize",this.resizeBackground,this)},o.onDestroy=function(){s.off("canvas-resize",this.resizeBackground,this)},o.resizeBackground=function(){var e=s.getVisibleSize(),n=this.node.getComponent(c);if(n){var i=n.contentSize,t=this.scaleOnX?e.width:i.width,r=this.scaleOnY?e.height:i.height;n.setContentSize(new l(t/this.node.scale.x,r/this.node.scale.y))}},n}(u)).prototype,"scaleOnX",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=n(g.prototype,"scaleOnY",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=g))||f));o._RF.pop()}}}));

System.register("bundle://main/_virtual/BaseItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./type.ts","./global.ts","./UImanager.ts"],(function(t){var e,n,i,o,a,c,r,s,u,l,h,m,d,p,f,g,v,k,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,r=t.Sprite,s=t.RichText,u=t.Node,l=t.tween,h=t.Color,m=t.Button,d=t.EventHandler,p=t.director,f=t.Vec3,g=t.Component},function(t){v=t.TileConnect},function(t){k=t.Turn},function(t){y=t.UImanager}],execute:function(){var B,I,b,N,w,G,T,q,E,S,A,P,z,C,x,D,F;a._RF.push({},"43eactcmDZJ37vn/GEQwiia","BaseItem",void 0);var M=c.ccclass,O=c.property;t("default",(B=M("BaseItem"),I=O(r),b=O(r),N=O(s),w=O(r),G=O(r),T=O(u),q=O(u),B((A=e((S=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(e,"icon",A,o(e)),i(e,"BG",P,o(e)),e.mainBG=e.BG,e.mainIcon=e.icon,e.quantity=0,i(e,"quantityText",z,o(e)),e.clicked=!1,e.itemManager=null,e.game=null,i(e,"lockedIcon",C,o(e)),i(e,"lockedBG",x,o(e)),e.locked=!1,i(e,"note",D,o(e)),i(e,"noteLock",F,o(e)),e.itemName="name",e.currentNote=e.note,e.item="UseItem",e}n(e,t);var a=e.prototype;return a.start=function(){},a.setquantity=function(t){this.quantity=t,localStorage.setItem(this.itemName,String(this.quantity)),this.init()},a.update=function(t){0==this.quantity&&this.needToAds()},a.fade=function(t){var e=this;void 0===t&&(t=!0);var n=t?0:255;this.currentNote&&(this.currentNote.active=!t),l(this.mainBG).to(.2,{color:new h(255,255,255,n)}).call((function(){e.node.active=!t})).start(),l(this.mainIcon).to(.2,{color:new h(255,255,255,n)}).start()},a.needToAds=function(){this.quantityText.string="ADS",this.currentNote.active=!0;var t=this.node.getComponent(m);if(t){t.clickEvents.length=0;var e=new d;e.target=this.node,e.component="BaseItem",e.handler="AdsPop",t.clickEvents.push(e)}},a.AdsPop=function(){var t,e;this.game.ispause=!0,null==(t=this.game)||t.adsPop();var n=null==(e=this.itemManager)?void 0:e.skipButton.getComponent(m);if(n){n.clickEvents.length=0;var i=new d;i.target=this.node,i.component="BaseItem",i.handler="increase",n.clickEvents.push(i)}},a.increase=function(){this.setquantity(1),localStorage.setItem(this.itemName,String(this.quantity)),this.init(),this.game.ispause=!1,this.game.isgameOver=!1,y.hideAllPopups(),y.togglePauseButton(!0),p.emit(v.GAME_EVENTS.START_COUNTDOWN),this.game.turnOnInput(),this.game.switchTurn(k.START);var t=this.node.getComponent(m);if(t){t.clickEvents.length=0;var e=new d;e.target=this.itemManager.node,e.component="ItemManager",e.handler=this.item,t.clickEvents.push(e)}},a.init=function(){this.textChange(),this.lock(),this.unlock(),0==this.quantity?this.stopFunction():this.enableFunction()},a.onUse=function(){var t=this;if(!this.locked){var e=[];this.clicked||(this.clicked=!0,e.push(new Promise((function(e){l(t.icon).to(.2,{color:new h(255,255,255,50)}).to(.2,{color:new h(255,255,255,255)},{easing:"bounceOut"}).call((function(){e()})).start()}))),e.push(new Promise((function(e){l(t.icon.node).to(.2,{scale:new f(.5,.5)}).to(.2,{scale:new f(1,1)},{easing:"quadOut"}).call((function(){e()})).start()}))),0!=this.quantity&&Promise.all(e).then((function(){return t.clicked=!1})))}},a.textChange=function(){this.quantityText.string=String(this.quantity)},a.stopFunction=function(){this.locked=!0,this.currentNote.active=!1},a.enableFunction=function(){this.locked=!1,this.currentNote.active=!0},a.lock=function(){this.locked=!0,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!1,this.mainIcon.node.active=!1,this.currentNote.active=!1),this.mainIcon=this.lockedIcon,this.mainBG=this.lockedBG,this.currentNote=this.noteLock,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!0,this.mainIcon.node.active=!0,this.currentNote.active=!0)},a.unlock=function(){this.locked=!1,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!1,this.mainIcon.node.active=!1,this.currentNote.active=!1),this.mainIcon=this.icon,this.mainBG=this.BG,this.currentNote=this.note,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!0,this.mainIcon.node.active=!0,this.currentNote.active=!0)},e}(g)).prototype,"icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(S.prototype,"BG",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(S.prototype,"quantityText",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(S.prototype,"lockedIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(S.prototype,"lockedBG",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"note",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(S.prototype,"noteLock",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=S))||E));a._RF.pop()}}}));

System.register("bundle://main/_virtual/basePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,t,e,u;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,e=o._decorator,u=o.Component}],execute:function(){var p;t._RF.push({},"0755a0dOHNLUotG5cYGTlEV","basePopup",void 0);var c=e.ccclass;o("BasePopup",c("BasePopup")(p=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var e=t.prototype;return e.onPopupShow=function(o){},e.onPopupHide=function(){},e.onPopupDestroy=function(){},e.closePopup=function(){},t}(u))||p);t._RF.pop()}}}));

System.register("bundle://main/_virtual/BaseSubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,o=e.Component}],execute:function(){var u;t._RF.push({},"81dc7NVyPVBPZdBvTIJZutV","BaseSubTile",void 0);var s=i.ccclass;i.property,e("BaseSubTile",s("BaseSubTile")(u=function(e){function t(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).used=!1,n.tile=null,n}n(t,e);var i=t.prototype;return i.onDead=function(e,n,t,i){},i.onResolve=function(){},i.onAttach=function(e){this.tile=e},i.onDetach=function(){this.tile=null},i.isUsed=function(){return this.used},i.reSpawn=function(){this.used=!0},i.kill=function(){this.used=!1},t}(o))||u);t._RF.pop()}}}));

System.register("bundle://main/_virtual/BaseTurn.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"efca6CSsLFI05L/gdQN7SNC","BaseTurn",void 0);n("BaseTurn",function(){function n(n){this.game=void 0,this.game=n}var t=n.prototype;return t.onEnter=function(){},t.onExit=function(){},t.onUpdate=function(){},n}());t._RF.pop()}}}));

System.register("bundle://main/_virtual/BaseTutorial.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var i,e,o,l,t;return{setters:[function(n){i=n.inheritsLoose,e=n.createForOfIteratorHelperLoose},function(n){o=n.cclegacy,l=n.Node,t=n.Component}],execute:function(){o._RF.push({},"009a3BAFXpFFK9+jPwojSSg","BaseTutorial",void 0);n("BaseTutorial",function(n){function o(){for(var i,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return(i=n.call.apply(n,[this].concat(o))||this).gm=null,i.currentBoard=null,i.overlay=null,i.panel=null,i.help=null,i.hand=null,i.originalSiblingIndices=new Map,i.boundOnChoose=null,i.boundOnTouch=null,i}i(o,n);var t=o.prototype;return t.hideOverlay=function(){this.overlay&&(this.overlay.active=!1,console.log("OVERLAY: ",this.overlay.active))},t.showPanel=function(n){this.help&&this.panel&&(this.help.string=n,this.panel.active=!0)},t.hidePanel=function(){this.panel&&(this.panel.active=!1,console.log("PANEL: ",this.panel.active))},t.storeSiblingIndices=function(n){this.originalSiblingIndices.clear();for(var i,o=e(n.board);!(i=o()).done;)for(var l,t=i.value,a=e(t);!(l=a()).done;){var s=l.value;if(s){var r=s.node;this.originalSiblingIndices.set(r,r.getSiblingIndex())}}},t.setAllTilesToBackground=function(n){for(var i,o=e(n.board);!(i=o()).done;)for(var l,t=i.value,a=e(t);!(l=a()).done;){var s=l.value;if(s)s.node.setSiblingIndex(1)}},t.restoreAllSiblingIndices=function(n){for(var i,o=e(n.board);!(i=o()).done;)for(var l,t=i.value,a=e(t);!(l=a()).done;){var s=l.value;if(s){var r=s.node,u=this.originalSiblingIndices.get(r);void 0!==u&&r.setSiblingIndex(u)}}this.originalSiblingIndices.clear()},t.resetAllSiblingIndices=function(n){this.originalSiblingIndices.size>0&&this.restoreAllSiblingIndices(n),this.originalSiblingIndices.clear()},t.hideHand=function(){this.hand&&(this.hand.active=!1)},t.clearOverlayEvents=function(){this.overlay&&(this.overlay.off(l.EventType.TOUCH_START),this.overlay.off(l.EventType.TOUCH_END),this.overlay.off(l.EventType.TOUCH_CANCEL),this.overlay.targetOff(this))},t.setupOverlay=function(){var n;this.overlay&&(this.clearOverlayEvents(),null==(n=this.gm)||n.node.addChild(this.overlay),this.overlay.active=!0,this.overlay.setPosition(this.gm.node.position.clone().multiplyScalar(-1)))},t.cleanup=function(){var n,i;this.boundOnChoose&&(null==(n=this.gm)||n.offChoose(this.boundOnChoose),this.boundOnChoose=null);this.boundOnTouch&&(null==(i=this.gm)||i.offTouch(this.boundOnTouch),this.boundOnTouch=null)},t.update=function(n){this.overlay.setPosition(this.gm.node.position.clone().multiplyScalar(-1))},o}(t));o._RF.pop()}}}));

System.register("bundle://main/_virtual/Board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./GameConfig.ts","./AnimationHandler.ts","./LevelLoader.ts","./TutorialManager.ts","./SoundManager.ts"],(function(t){var e,n,a,r,i,o,l,h,s,u,d,g,f,c,v,p,b,m,y;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,r=t._decorator,i=t.Vec2,o=t.Size,l=t.tween,h=t.Tween,s=t.Vec3,u=t.Component},function(t){d=t.SFX,g=t.TileType,f=t.Theme,c=t.SubType},function(t){v=t.default},function(t){p=t.AnimationHandler},function(t){b=t.LevelLoader},function(t){m=t.TutorialManager},function(t){y=t.SoundManager}],execute:function(){var T;a._RF.push({},"52701IqhLtGnIdgKUUwkd2v","Board",void 0);var P=r.ccclass;r.property,t("default",P("Board")(T=function(t){function a(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).board=[],e.shuffling=!1,e.game=null,e.matchedPairsCount=0,e.respawnCount=0,e.MAX_RESPAWNS_PER_LEVEL=3,e.FIRST_RESPAWN_THRESHOLD=5,e.SUBSEQUENT_RESPAWN_INTERVAL=3,e}e(a,t);var r=a.prototype;return r.match=function(t,e){var n;if(!t.underKill&&!e.underKill){console.log("itemList: ",null==(n=this.game)?void 0:n.pathPool);var a=this.getPath(t,e);if(this.canMatch(t,e,a.path,a.turnNum)){var r,i;this.drawPath(a.path,null==(r=this.game)?void 0:r.pathPool),this.putStar(a.path,null==(i=this.game)?void 0:i.starPool),t.onDead(this,!0,e),e.onDead(this,!1,t),t.kill(),e.kill(),this.matchedPairsCount++,this.checkAndRespawnTiles(),this.hasAnyValidPair()||(console.log("No valid pairs left — shuffling board"),this.shuffle())}else{var o,l,h;if((null==(o=this.game)?void 0:o.tilePool).shake(10,this.game.currentLevel),this.game.currentNumber()<2){var s,u,g,f=this.getInvalidPath(t,e);if(0===f.path.length){var c,v,p,b;0===(f=this.getPath(t,e,!1)).path.length&&(f=this.getPath(e,t,!1)),null==(c=m.instance)||c.showObstacle();var T=this.getTurnPoints(f.path);return this.drawInvalid(T,null==(v=this.game)?void 0:v.invalid),this.putNope(T,null==(p=this.game)?void 0:p.nope),null==(b=this.game)||b.unChoose(),void y.instance.playSFX(d.INVALID_MATCH)}var P=this.getTurnPoints(f.path);this.drawInvalid(P,null==(s=this.game)?void 0:s.invalid),this.putNope(P,null==(u=this.game)?void 0:u.nope),null==(g=m.instance)||g.showInvalid(),console.log(P)}(null==(l=this.game)?void 0:l.tilePool).shake(10,this.game.currentLevel),y.instance.playSFX(d.INVALID_MATCH),y.instance.vibrateOn&&navigator.vibrate(200),null==(h=this.game)||h.unChoose()}}},r.getTurnPoints=function(t){if(t.length<2)return t;for(var e=[t[0]],n=1;n<t.length-1;n++){var a=t[n-1],r=t[n],i=t[n+1],o=r.x-a.x,l=r.y-a.y,h=i.x-r.x,s=i.y-r.y;o===h&&l===s||e.push(r)}return e.push(t[t.length-1]),e},r.checkAndRespawnTiles=function(){var t=b.getInstance().getLevelData();!t||t.Difficulty<3||this.shouldRespawnTiles()&&(this.respawnRandomTilePair(),this.respawnCount++)},r.shouldRespawnTiles=function(){if(this.respawnCount>=this.MAX_RESPAWNS_PER_LEVEL)return!1;if(0===this.respawnCount&&this.matchedPairsCount===this.FIRST_RESPAWN_THRESHOLD)return!0;if(this.respawnCount>0){var t=this.matchedPairsCount-this.FIRST_RESPAWN_THRESHOLD;return Math.floor(t/this.SUBSEQUENT_RESPAWN_INTERVAL)>this.respawnCount-1}return!1},r.respawnRandomTilePair=function(){var t=this.getAvailableRandomPosInGameArea();if(t&&!(t.length<2)){this.shuffleArray(t);var e=t[0],n=t[1],a=Math.floor(7*Math.random())+1;this.findAndRespawnTileAt(e,a),this.findAndRespawnTileAt(n,a)}},r.getAvailableRandomPosInGameArea=function(){var t,e=[],n=null==(t=this.game)?void 0:t.currentLevel;if(!n)return e;for(var a=1+n.gridHeight,r=1+n.gridWidth,i=1;i<a;i++)for(var o=1;o<r;o++)this.board[i][o].getTypeID()===g.NONE&&e.push(this.board[i][o].getCoordinate());return e},r.shuffleArray=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),a=[t[n],t[e]];t[e]=a[0],t[n]=a[1]}},r.findAndRespawnTileAt=function(t,e){for(var n=0;n<this.board.length;n++)for(var a=0;a<this.board[n].length;a++)if(this.board[n][a].getCoordinate().equals(t)){var r;if(this.board[n][a].reSpawn(),this.board[n][a].setTypeID(e),(null==(r=this.game)?void 0:r.currentLevel.theme)==f.BUTTERFLY){var i,o=null==(i=this.game.subtilePool.get(c.BUTTERFLY))?void 0:i.getFirstItem();this.board[n][a].attachSubType(o,c.BUTTERFLY)}return void this.board[n][a].show()}},r.getMatchedPairsCount=function(){return this.matchedPairsCount},r.getRespawnCount=function(){return this.respawnCount},r.hasAnyValidPair=function(){for(var t=this.board.length,e=this.board[0].length,n=0;n<t;n++)for(var a=0;a<e;a++){var r=this.board[n][a];if(r&&r.getTypeID()!==g.NONE)for(var i=0;i<t;i++)for(var o=0;o<e;o++)if(a!==o||n!==i){var l=this.board[i][o];if(l&&l.getTypeID()!==g.NONE){var h=this.getPath(r,l);if(r.getTypeID()===l.getTypeID()&&this.canMatch(r,l,h.path,h.turnNum))return!0}}}return!1},r.getRemainingRespawns=function(){return this.MAX_RESPAWNS_PER_LEVEL-this.respawnCount},r.canMatch=function(t,e,n,a){return t.getTypeID()===e.getTypeID()&&(t!==e&&(console.log(n),n.length>0&&a<=2))},r.getInvalidPath=function(t,e){var n=this,a=t.getCoordinate(),r=e.getCoordinate(),o=this.board.length,l=this.board[0].length,h=[new i(-1,0),new i(1,0),new i(0,1),new i(0,-1)],s=Array.from({length:o},(function(){return Array.from({length:l},(function(){return!1}))})),u=function t(e,a,i,o){if(e.equals(r))return{path:[].concat(a,[e.clone()]),turns:i};if(i>2)return null;s[e.y][e.x]=!0;for(var l=0;l<h.length;l++){var u=e.clone().add(h[l]);if(n.validate(u,r)&&!s[u.y][u.x]){var d=l===o||-1===o?i:i+1,g=t(u,[].concat(a,[e.clone()]),d,l);if(g)return s[e.y][e.x]=!1,g}}return s[e.y][e.x]=!1,null}(a,[],0,-1);return u?{path:u.path,turnNum:u.turns}:{path:[],turnNum:0}},r.getPath=function(t,e,n){void 0===n&&(n=!0);for(var a=t.getCoordinate(),r=e.getCoordinate(),o=this.board.length,l=this.board[0].length,h=[new i(0,1),new i(1,0),new i(0,-1),new i(-1,0)],s=Array.from({length:o},(function(){return Array.from({length:l},(function(){return Array(4).fill(1/0)}))})),u=function(t){return Math.abs(t.x-r.x)+Math.abs(t.y-r.y)},d=[],g=0;g<4;g++){var f=a.clone().add(h[g]);n&&!this.validate(f,r)||(s[f.y][f.x][g]=0,d.push({pos:f,dirIndex:g,turn:0,path:[a.clone(),f.clone()],g:1,f:1+u(f)}))}for(;d.length>0;){d.sort((function(t,e){return t.f-e.f}));var c=d.shift();if(c.pos.equals(r))return{path:c.path,turnNum:c.turn};for(var v=0;v<4;v++){var p=v===c.dirIndex?c.turn:c.turn+1;if(!(p>2)){var b=c.pos.clone().add(h[v]);if(this.validate(b,r)&&!(s[b.y][b.x][v]<=p)){s[b.y][b.x][v]=p;var m=c.g+1,y=m+u(b);d.push({pos:b,dirIndex:v,turn:p,path:[].concat(c.path,[b.clone()]),g:m,f:y})}}}}return{path:[],turnNum:0}},r.resetInput=function(){for(var t,e=n(this.board);!(t=e()).done;)for(var a,r=t.value,i=n(r);!(a=i()).done;){a.value.clearOnClickCallbacks()}},r.resetInputExcept=function(t,e){for(var a,r=this,i=n(this.board);!(a=i()).done;)for(var o,l=a.value,h=n(l);!(o=h()).done;){o.value.clearOnClickCallbacks()}t.addOnClickCallback((function(t){var e;return null==(e=r.game)?void 0:e.choose(t)})),e.addOnClickCallback((function(t){var e;return null==(e=r.game)?void 0:e.choose(t)}))},r.getBoardSize=function(){return new o(v.TileSize*this.board[0].length,v.TileSize*this.board.length)},r.validate=function(t,e){var n=t.x,a=t.y;if(a<0||a>=this.board.length||n<0||n>=this.board[0].length)return!1;var r=this.board[a][n];return null==r||r.getTypeID()===g.NONE||r===this.board[e.y][e.x]},r.setUpManager=function(t){this.game=t;for(var e,a=n(this.board);!(e=a()).done;)for(var r,i=e.value,o=n(i);!(r=o()).done;){var l=r.value;0==l.onClickCallbacks.length&&l.addOnClickCallback((function(e){return t.choose(e)}))}},r.shake=function(){l(this.node).to},r.create=function(t,e){t.returnAll();var n=e.gridHeight+2,a=e.gridWidth+2;this.matchedPairsCount=0,this.respawnCount=0,this.board=[];for(var r=0;r<n;r++){this.board[r]=[];for(var o=0;o<a;o++){var l=t.getFirstItem();this.board[r].push(l),null==l||l.setTheme(e.theme);var s=o-1,u=r-1;s>=0&&s<e.gridWidth&&u>=0&&u<e.gridHeight?(null==l||l.setTypeID(e.grid[u][s]),(null==l?void 0:l.getTypeID())==g.NONE&&l.hide(),null!=l&&l.node&&h.stopAllByTarget(l.wholeSprite),null==l||l.reScale(e.scale)):null==l||l.hide(),null==l||l.setCoordinate(new i(o,r)),null==l||l.node.setPosition(0,0),null==l||l.fadeIn(.05*Math.abs(r-e.gridHeight-1)),null==l||l.moveToRealPositionWithPadding(e,!0,.05*Math.abs(r-e.gridHeight-1),"sineOut")}}},r.shuffle=function(){var t,e=this;if(console.log("shuffle"),!this.shuffling){this.shuffling=!0,null==(t=this.game)||t.stopHint();for(var a,r=[],o=n(this.board);!(a=o()).done;)for(var l,h=a.value,s=n(h);!(l=s()).done;){var u=l.value;u.getTypeID()!==g.NONE&&r.push(u)}for(var d={},f=0,c=r;f<c.length;f++){var v=c[f],b=v.getTypeID();d[b]||(d[b]=[]),d[b].push(v)}for(var m=Object.keys(d).filter((function(t){return d[+t].length>=2})),y=[],T=0;T<this.board.length;T++)for(var P=0;P<this.board[T].length;P++)this.board[T][P].getTypeID()!==g.NONE&&(P+1<this.board[T].length&&this.board[T][P+1].getTypeID()!==g.NONE&&y.push([P,T,P+1,T]),T+1<this.board.length&&this.board[T+1][P].getTypeID()!==g.NONE&&y.push([P,T,P,T+1]));var I=[],w=null;if(m.length>0&&y.length>0){var A=+m[Math.floor(Math.random()*m.length)];I=d[A].splice(0,2);for(var N,C=n(I);!(N=C()).done;){var E=N.value,R=r.indexOf(E);R>=0&&r.splice(R,1)}w=y[Math.floor(Math.random()*y.length)]}for(var S=r.length-1;S>0;S--){var x=Math.floor(Math.random()*(S+1)),L=[r[x],r[S]];r[S]=L[0],r[x]=L[1]}for(var M=0,D=0;D<this.board.length;D++)for(var O=0;O<this.board[D].length;O++)if(this.board[D][O].getTypeID()!==g.NONE){var _=void 0;if(!(_=w&&2===I.length&&(D===w[1]&&O===w[0]||D===w[3]&&O===w[2])?D===w[1]&&O===w[0]?I[0]:I[1]:r[M++])){console.warn("⚠️ Thiếu tile để gán tại ("+D+", "+O+")");continue}this.board[D][O]=_,_.setCoordinate(new i(O,D))}for(var k,F=n(this.board);!(k=F()).done;)for(var H,V=k.value,W=n(V);!(H=W()).done;){var B,U=H.value;if(U&&U.getTypeID()!==g.NONE)U.moveToRealPositionWithPadding(null==(B=this.game)?void 0:B.currentLevel,!0,0,"expoInOut",1)}Promise.all(p.animTile).then((function(){e.shuffling=!1}))}},r.addSubTile=function(t,e,n){var a=e.layer.get(n);if(a)for(var r=0;r<e.gridHeight;r++)for(var i=0;i<e.gridWidth;i++){var o;if(1===(null==(o=a[r])?void 0:o[i])){var l=t.getFirstItem(),h=this.board[r+1][i+1];null==h||h.attachSubType(l,n)}}},r.drawPath=function(t,e){for(var n=0;n<t.length-1;n++){var a=t[n],r=this.board[a.y][a.x].node.getPosition().toVec2(),i=t[n+1],o=this.board[i.y][i.x].node.getPosition().toVec2(),l=e.getFirstItem();console.log("from: ",r,"to: ",o),null==l||l.createPath(r,o,!0,.6),console.log("draw path from",a,"to",i)}},r.drawInvalid=function(t,e){for(var n=0;n<t.length-1;n++){var a=t[n],r=this.board[a.y][a.x].node.getPosition().toVec2(),i=t[n+1],o=this.board[i.y][i.x].node.getPosition().toVec2(),l=e.getFirstItem();console.log("drew"),null==l||l.createPath(r,o)}},r.putStar=function(t,e){for(var n=0;n<t.length;n++){var a=t[n],r=this.board[a.y][a.x].node.getPosition().clone(),i=e.getFirstItem();0!=n&&n!=t.length-1||null==i||i.firstAndLastMatch(),null==i||i.putAt(r,n)}},r.putNope=function(t,e){if(t.length<3){var n=t[0],a=t[1],r=this.board[n.y][n.x].node.getPosition(),i=this.board[a.y][a.x].node.getPosition(),o=new s((r.x+i.x)/2,(r.y+i.y)/2,1),l=e.getFirstItem();null==l||l.putAt(o)}else for(var h=1;h<t.length-1;h++){var u=t[h],d=this.board[u.y][u.x].node.getPosition().clone(),g=e.getFirstItem();h<3?null==g||g.putX(d,h):null==g||g.putAt(d)}},a}(u))||T);a._RF.pop()}}}));

System.register("bundle://main/_virtual/BombFail.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,o,e,u,i;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.Popup},function(n){u=n.UImanager},function(n){i=n.BaseTurn}],execute:function(){o._RF.push({},"368e0/pCuFEu7KMmIDlH5yo","BombFail",void 0);n("BombFail",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var i=o.prototype;return i.onEnter=function(){this.game.ispause=!0,this.game.turnOffInput(),u.togglePauseButton(!1),this.game.unChoose(),console.log("Fail"),u.showPopup(e.BOOMPOPUP,!0,this.game.currentNumber())},i.onExit=function(){},i.onUpdate=function(){},o}(i));o._RF.pop()}}}));

System.register("bundle://main/_virtual/boom-popup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts"],(function(e){var o,t,r,i,n,l,p,a;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,p=e.Label},function(e){a=e.BasePopup}],execute:function(){var u,c,s,f,b;n._RF.push({},"fd57cpWbDNGSJX2WuMUcQu5","boom-popup",void 0);var v=l.ccclass,y=l.property;e("BoomFail",(u=v("BoomFail"),c=y(p),u((b=o((f=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return o=e.call.apply(e,[this].concat(n))||this,r(o,"level",b,i(o)),o}return t(o,e),o.prototype.onPopupShow=function(e){this.level.string="LEVEL "+e},o}(a)).prototype,"level",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=f))||s));n._RF.pop()}}}));

System.register("bundle://main/_virtual/BoomDefuseItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(e){var t,i,n,o,r,a,s,l,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Animation,l=e.Vec3},function(e){u=e.SubType},function(e){c=e.default}],execute:function(){var p,f,h,m,d;r._RF.push({},"c5603FwifxAj4rdveJjR9py","BoomDefuseItem",void 0);var y=a.ccclass,v=a.property;e("BoomDefuseItem",(p=y("BoomDefuseItem"),f=v(s),p((d=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).item="useBoom",n(t,"anim",d,o(t)),t}return i(t,e),t.prototype.onUse=function(){var t=this;if(!this.clicked){for(var i,n,o=[],r=0,a=this.game.board.board;r<a.length;r++){var c=a[r];o.push.apply(o,c.filter((function(e){return e.getSubtileList().has(u.BOOM)})))}if(e.prototype.onUse.call(this),o.length>0&&this.quantity>0)this.quantity-=1,this.textChange(),o[0].detachSubType(u.BOOM),this.anim.node.active=!0,this.anim.node.setWorldPosition(o[0].node.worldPosition),o[0].itemTypeSprite.node.setScale(new l(0)),null==(i=this.anim)||i.play(),null==(n=this.anim)||n.once(s.EventType.FINISHED,(function(){t.anim.node.active=!1,o[0].shrink()}))}},t}(c)).prototype,"anim",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));r._RF.pop()}}}));

System.register("bundle://main/_virtual/BoomPool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,r,s,a,c,d,l,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,d=e.Node,l=e.Animation,h=e.Component}],execute:function(){var u,f,p,m,N,v,y;a._RF.push({},"250acO6i6VM/K3U0sNwRWKT","BoomPool",void 0);var g=c.ccclass,A=c.property;e("BoomPool",(u=g("BoomPool"),f=A(d),p=A(d),u((v=t((N=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"firstNode",v,o(t)),n(t,"secondNode",y,o(t)),t.firstAnimationNodes=[],t.secondAnimationNodes=[],t}i(t,e);var a=t.prototype;return a.start=function(){this.initializeNodes(),this.playAnimationSequence()},a.initializeNodes=function(){if(!this.firstNode){var e=this.node.getChildByName("first");if(!e)throw new Error("Child node 'first' not found");this.firstNode=e,this.firstNode.active=!1}if(!this.secondNode){var t=this.node.getChildByName("second");if(!t)throw new Error("Child node 'second' not found");this.secondNode=t,this.secondNode.active=!1}if(this.firstNode){this.firstAnimationNodes=[];for(var i=0;i<this.firstNode.children.length;i++){var n=this.firstNode.children[i];n.getComponent(l)&&this.firstAnimationNodes.push(n)}}if(this.secondNode){this.secondAnimationNodes=[];for(var o=0;o<this.secondNode.children.length;o++){var r=this.secondNode.children[o];r.getComponent(l)&&this.secondAnimationNodes.push(r)}}},a.playAnimationSequence=function(){this.playFirstAnimations().then((function(){}))},a.playFirstAnimations=function(){var e=r(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.firstAnimationNodes.length){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.firstNode.active=!0,t=[],this.firstAnimationNodes.forEach((function(e){var i=e.getComponent(l);if(i&&i.clips.length>0){e.active=!0;var n=new Promise((function(e){i.once(l.EventType.FINISHED,(function(){e()})),i.clips[0]?i.play(i.clips[0].name):e()}));t.push(n)}})),e.next=7,Promise.all(t);case 7:this.firstNode.active=!1;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.playSecondAnimations=function(){var e=r(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.secondAnimationNodes.length){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.secondNode.active=!0,t=[],this.secondAnimationNodes.forEach((function(e){var i=e.getComponent(l);if(i&&i.clips.length>0){e.active=!0;var n=new Promise((function(e){i.once(l.EventType.FINISHED,(function(){e()})),i.clips[0]&&i.play(i.clips[0].name)}));t.push(n)}})),e.next=7,Promise.all(t);case 7:this.secondNode.active=!1;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(h)).prototype,"firstNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(N.prototype,"secondNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=N))||m));a._RF.pop()}}}));

System.register("bundle://main/_virtual/BoomSubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSubTile.ts","./Countdown.ts"],(function(e){var t,o,n,i,r,l,u,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,u=e.Sprite},function(e){c=e.BaseSubTile},function(e){a=e.Countdown}],execute:function(){var s,d,h,p,b,f,v,m,w;r._RF.push({},"d5f97QXjRpBK79IAO1Fuh3q","BoomSubTile",void 0);var y=l.ccclass,S=l.property;e("BoomSubTile",(s=y("BoomSubTile"),d=S(u),h=S(u),p=S(a),s((v=t((f=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(t=e.call.apply(e,[this].concat(r))||this).timer=40,n(t,"coundown",v,i(t)),n(t,"boom",m,i(t)),n(t,"cd",w,i(t)),t}o(t,e);var r=t.prototype;return r.onAttach=function(t){var o;e.prototype.onAttach.call(this,t),null==(o=t.wholeSprite)||o.addChild(this.node),this.coundown.node.active=!0,this.boom.node.active=!0},r.onDead=function(e,t,o){var n,i;null==(n=this.cd)||n.resetCountdown(),null==(i=this.tile)||null==(i=i.wholeSprite)||i.removeChild(this.node),this.coundown.node.active=!1,this.boom.node.active=!1},r.onDetach=function(){var t,o;null==(t=this.cd)||t.resetCountdown(),null==(o=this.tile)||null==(o=o.wholeSprite)||o.removeChild(this.node),this.coundown.node.active=!1,this.boom.node.active=!1,e.prototype.onDetach.call(this)},t}(c)).prototype,"coundown",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(f.prototype,"boom",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(f.prototype,"cd",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));r._RF.pop()}}}));

System.register("bundle://main/_virtual/BreakTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,l,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,u=e.Component}],execute:function(){var c,p,f,s,b,y,g,d,h,m,v;o._RF.push({},"a5fa4bY7stAEZ2ags59CBeu","BreakTile",void 0);var z=l.ccclass,B=l.property;e("BreakTile",(c=z("BreakTile"),p=B(a),f=B(a),s=B(a),b=B(a),c((d=t((g=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"top",d,n(t)),i(t,"bot",h,n(t)),i(t,"right",m,n(t)),i(t,"left",v,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},t}(u)).prototype,"top",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(g.prototype,"bot",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(g.prototype,"right",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(g.prototype,"left",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));o._RF.pop()}}}));

System.register("bundle://main/_virtual/ButterflySubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSubTile.ts","./global.ts"],(function(t){var i,e,n,o,l,s,a,r,c,h,u,g,p,w,f,d,y,v,b,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,s=t._decorator,a=t.Node,r=t.resources,c=t.SpriteFrame,h=t.Tween,u=t.Sprite,g=t.Vec3,p=t.tween,w=t.view},function(t){f=t.BaseSubTile},function(t){d=t.TileType,y=t.SubType,v=t.getTilePath,b=t.Theme,T=t.getAllDescendants}],execute:function(){var S,m,P,B,F,z,D,x,W,A,E,R,I;l._RF.push({},"d9d5e9kBRpGp7Fdbtd6hf8P","ButterflySubTile",void 0);var k=s.ccclass,C=s.property;t("ButterflySubtile",(S=k("ButterflySubtile"),m=C(a),P=C(a),B=C(a),F=C(a),z=C(a),S((W=i((x=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),s=0;s<e;s++)l[s]=arguments[s];return i=t.call.apply(t,[this].concat(l))||this,n(i,"wing1",W,o(i)),n(i,"wing2",A,o(i)),n(i,"body",E,o(i)),n(i,"shadow",R,o(i)),n(i,"wingShadow",I,o(i)),i.wingType=null,i}e(i,t);var l=i.prototype;return l.onAttach=function(i){var e;if(i.getTypeID()==d.ROCKET)return i.detachSubType(y.BUTTERFLY),void this.kill();t.prototype.onAttach.call(this,i);var n=v(this.tile.getTypeID(),b.BUTTERFLY);this.wingType=r.get(n,c),null==(e=this.shadow)||e.setScale(.6*i.originScale,.6*i.originScale)},l.onDead=function(t,i,e,n){var o,l;i&&!n&&this.tile.getTypeID()!=d.ROCKET&&(console.log("butter is flying"),this.setupWing(),null==(o=this.wing1)||o.setPosition(this.tile.node.position),null==(l=this.wing2)||l.setPosition(e.tile.node.position),this.moveWingToWing())},l.kill=function(){t.prototype.kill.call(this),this.stopTween(),this.node.setPosition(0,0),this.body.active=!1,this.node.angle=0,this.wing1.active=!1,this.wing2.active=!1,this.shadow.active=!1},l.stopTween=function(){var t=T(this.node);h.stopAllByTarget(this),t.forEach((function(t){h.stopAllByTarget(t)}))},l.showShadow=function(){this.shadow.active=!0},l.setupWing=function(){var t,i,e,n,o=this,l=null==(t=this.wing1)?void 0:t.getComponent(u),s=null==(i=this.wing2)?void 0:i.getComponent(u);this.wingShadow.forEach((function(t){t.getComponent(u).spriteFrame=o.wingType})),l.spriteFrame=this.wingType,s.spriteFrame=this.wingType,null==(e=this.wing1)||e.setScale(new g(.7*this.tile.originScale,.7*this.tile.originScale)),null==(n=this.wing2)||n.setScale(new g(.7*this.tile.originScale,.7*this.tile.originScale))},l.flap=function(){var t=this.wing1.scale.clone(),i=this.wing2.scale.clone();this.wingShadow.forEach((function(t){var i=t.scale.clone();p(t).repeatForever(p().to(.2,{scale:new g(.5*i.x,i.y,i.z)}).to(.2,{scale:i})).start()})),p(this.wing1).repeatForever(p().to(.2,{scale:new g(.5*t.x,t.y,t.z)}).to(.2,{scale:t})).start(),p(this.wing2).repeatForever(p().to(.2,{scale:new g(.5*i.x,i.y,i.z)}).to(.2,{scale:i})).start()},l.resetPos=function(){var t,i;this.node.setPosition(this.wing2.position),null==(t=this.wing1)||t.setPosition(0,0),null==(i=this.wing2)||i.setPosition(0,0)},l.flyUp=function(){p(this.node).to(.2,{scale:new g(1.2,1.2)}).start()},l.moveWingToWing=function(){var t,i=this;this.wing1.active=!0,this.wing2.active=!0,p(this.wing1).to(.36,{position:null==(t=this.wing2)?void 0:t.position}).call((function(){i.body.active=!0,i.flipWing(i.wing1),i.resetPos(),i.flyUp()})).start()},l.flipWing=function(t){var i,e=this,n=t.scale.clone();null==(i=this.wing1)||i.setScale(new g(-n.x,n.y)),p(t).to(.1,{scale:new g(-n.x,n.y)}).call((function(){e.move(),e.flap()})).start()},l.move=function(){var t=this;this.shadow.active=!0;var i=40+60*Math.random(),e=new g(0,i,0);this.shadow.setPosition(e);var n,o,l,s,a=Math.random()<.5?-500:w.getVisibleSize().width+500,r=new g(a,900),c=(n=this.node.worldPosition,l=(o=r).x-n.x,s=o.y-n.y,180*Math.atan2(s,l)/Math.PI-90);p(this.node).to(.7,{eulerAngles:new g(0,0,c)},{easing:"sineInOut"}).to(3,{worldPosition:r}).call((function(){return t.kill()})).start()},l.onDetach=function(){t.prototype.onDetach.call(this)},i}(f)).prototype,"wing1",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(x.prototype,"wing2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(x.prototype,"body",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(x.prototype,"shadow",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(x.prototype,"wingShadow",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=x))||D));l._RF.pop()}}}));

System.register("bundle://main/_virtual/Combo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./SoundManager.ts","./type.ts"],(function(t){var i,e,o,n,r,s,a,l,c,u,h,m,b,f,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Sprite,l=t.Node,c=t.SpriteFrame,u=t.director,h=t.ParticleSystem2D,m=t.Component},function(t){b=t.default},function(t){f=t.SoundManager},function(t){p=t.TileConnect}],execute:function(){var d,C,g,v,N,y,M,S,P,T,z,w,F,O,_;r._RF.push({},"4bebeCsyLJP8KXneWnzpmLu","Combo",void 0);var D=s.ccclass,R=s.property;t("Combo",(d=D("Combo"),C=R(b),g=R(a),v=R(l),N=R(l),y=R(l),M=R([c]),d((T=i((P=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,o(i,"gm",T,n(i)),i.timer=5,i.currentTime=0,i.comboCount=0,o(i,"fill",z,n(i)),o(i,"bom",w,n(i)),o(i,"firstNode",F,n(i)),o(i,"secondNode",O,n(i)),o(i,"listSprite",_,n(i)),i.boundOnMatchPair=null,i}e(i,t);var r=i.prototype;return r.start=function(){this.fill&&(this.fill.fillRange=1),this.gm&&(this.boundOnMatchPair=this.onMatchPair.bind(this),this.gm.onMatchPair(this.boundOnMatchPair)),this.node.active=!1,u.on(p.GAME_EVENTS.COUNTDOWN_RESET,this.resetCombo,this)},r.onDestroy=function(){this.gm&&this.boundOnMatchPair&&this.gm.offMatchPair(this.boundOnMatchPair)},r.update=function(t){this.currentTime+=t;var i=Math.min(this.currentTime/this.timer,1);this.fill&&(this.fill.fillRange=1-i),this.currentTime>this.timer&&(this.node.active=!1,this.comboCount=0,this.hideAllComboNumbers())},r.explode=function(){var t=this.bom?this.bom.getComponent(h):null;t&&t.resetSystem()},r.onMatchPair=function(){if(this.comboCount++,!(this.comboCount<2)){var t="combo_"+String(this.comboCount>5?5:this.comboCount);if(f.instance.playSFX(t),this.hideAllComboNumbers(),this.explode(),this.comboCount<10){var i=this.comboCount;this.firstNode.getComponent(a).spriteFrame=this.listSprite[i],this.firstNode.active=!0}else{var e=Math.floor(this.comboCount/10),o=this.comboCount%10;this.firstNode.getComponent(a).spriteFrame=this.listSprite[e],this.firstNode.active=!0,this.secondNode.getComponent(a).spriteFrame=this.listSprite[o],this.secondNode.active=!0}this.node.active=!0}},r.hideAllComboNumbers=function(){this.firstNode&&(this.firstNode.active=!1),this.secondNode&&(this.secondNode.active=!1)},r.resetCombo=function(){this.comboCount=0,this.node.active=!1,this.currentTime=0,this.fill&&(this.fill.fillRange=1)},i}(m)).prototype,"gm",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(P.prototype,"fill",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(P.prototype,"bom",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(P.prototype,"firstNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(P.prototype,"secondNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(P.prototype,"listSprite",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=P))||S));r._RF.pop()}}}));

System.register("bundle://main/_virtual/ConfettiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts"],(function(t){var e,n,i,o,r,a,l,c,s,d,f,u,h,p,y,v,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,l=t._decorator,c=t.Prefab,s=t.Vec2,d=t.instantiate,f=t.RigidBody2D,u=t.Tween,h=t.Sprite,p=t.Vec3,y=t.Component,v=t.Color,g=t.tween},function(t){m=t.getAllDescendants}],execute:function(){var M,b,w,C,V,x,R;a._RF.push({},"39457hpjrJOtaS7y/SWY3h9","ConfettiManager",void 0);var L=l.ccclass,S=l.property;t("ConfettiManager",(M=L("ConfettiManager"),b=S(c),w=S(s),M((x=e((V=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"confettiList",x,o(e)),e.confettiRigid=[],i(e,"dir",R,o(e)),e}n(e,t);var a=e.prototype;return a.start=function(){for(var t,e=r(this.confettiList);!(t=e()).done;)for(var n=t.value,i=1;i<20;i++){var o=d(n);this.node.addChild(o);var a=o.getComponent(f);this.confettiRigid.push(a),o.active=!1}},a.update=function(t){for(var e,n=r(this.confettiRigid);!(e=n()).done;){var i=e.value;i.linearVelocity=new s(.98*i.linearVelocity.x,i.linearVelocity.y+-15*t),Math.abs(i.linearVelocity.x)<.1&&(i.linearVelocity.x=0),Math.abs(i.linearVelocity.y)<.1&&(i.linearVelocity.y=0),i.node.position.y<-200&&this.kill(i.node)}},a.emit=function(){var t=this;this.resetConf();for(var e,n=function(){var n=e.value;n.node.active=!0;var i=n.node.getComponent(h),o=new v(Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random()),255);i&&(i.color=o),g(n.node.getComponent(h)).delay(2.5+.2*Math.random()).to(.5,{color:new v(o.r,o.g,o.b,0)}).start();var r=new s(50*t.dir.x,50*t.dir.y),a=50*Math.random()-10,l=0+50*Math.random();n.angularVelocity=(1+2*Math.random())*(Math.random()<.5?1:-1),n.linearVelocity=new s(t.dir.x>0?r.x+a:r.x-a,r.y+l),n.gravityScale=.3,setTimeout((function(){n.node&&n.node.isValid&&(n.gravityScale=.5+.5*Math.random())}),400)},i=r(this.confettiRigid);!(e=i()).done;)n()},a.kill=function(t){t.active=!1;m(t);u.stopAllByTarget(t),u.stopAllByTarget(t.getComponent(h))},a.resetConf=function(){for(var t,e=r(this.confettiRigid);!(t=e()).done;){var n=t.value;this.kill(n.node),n.node.position=new p,n.linearVelocity=new s}},e}(y)).prototype,"confettiList",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(V.prototype,"dir",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),C=V))||C));a._RF.pop()}}}));

System.register("bundle://main/_virtual/continuePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts","./UImanager.ts","./global.ts","./LevelLoader.ts"],(function(t){var e,n,i,o,r,u,l,a,c,p,s,f,h,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,l=t.Button,a=t.Label,c=t.Node,p=t.Sprite},function(t){s=t.BasePopup},function(t){f=t.UImanager},function(t){h=t.Popup},function(t){m=t.LevelLoader}],execute:function(){var b,g,d,v,w,P,y,C,L;r._RF.push({},"faac8qYpV9KXp2I30ztwCOi","continuePopup",void 0);var z=u.ccclass,I=u.property;t("Continue",(b=z("Continue"),g=I(l),d=I(a),v=I(c),b((y=e((P=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,i(e,"continue",y,o(e)),i(e,"countdownlabel",C,o(e)),i(e,"fill",L,o(e)),e.timer=5,e.currentTime=0,e.cur=0,e}n(e,t);var r=e.prototype;return r.onPopupShow=function(t){var e=this.fill.getComponent(p);e&&(e.fillRange=1),this.countdownlabel.string="5",this.cur=t},r.update=function(t){this.currentTime+=t;var e=Math.min(this.currentTime/this.timer,1),n=this.fill.getComponent(p);n&&(n.fillRange=1-e);var i=Math.max(0,Math.ceil(this.timer-this.currentTime));this.countdownlabel.string=""+i,this.currentTime>=this.timer&&this.onCountdownComplete()},r.onCountdownComplete=function(){f.showPopup(h.FAILPOPUP,!0,m.getInstance().getCurrentLevelNumber())},e}(s)).prototype,"continue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(P.prototype,"countdownlabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(P.prototype,"fill",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=P))||w));r._RF.pop()}}}));

System.register("bundle://main/_virtual/Countdown.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundManager.ts","./global.ts","./type.ts"],(function(t){var n,e,i,o,r,s,a,c,u,l,h,d,m,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.Sprite,u=t.director,l=t.find,h=t.Animation,d=t.Component},function(t){m=t.SoundManager},function(t){p=t.SFX},function(t){f=t.TileConnect}],execute:function(){var T,C,E,b,v;r._RF.push({},"6fdbaOrIMdOZL1cybBWtB4E","Countdown",void 0);var S=s.ccclass,g=s.property;t("Countdown",(T=S("Countdown"),C=g(a),T((v=n((b=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(n=t.call.apply(t,[this].concat(r))||this).timer=40,n.currentTime=0,i(n,"bom",v,o(n)),n}e(n,t);var r=n.prototype;return r.start=function(){var t=this.node.getComponent(c);t&&(t.fillRange=-1),this.enabled=!1,u.on(f.GAME_EVENTS.COUNTDOWN_RESET,this.resetToInitialState,this),u.on(f.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this)},r.update=function(t){if(this.enabled){this.currentTime+=t;var n=Math.min(this.currentTime/this.timer,1),e=this.node.getComponent(c);e&&(e.fillRange=-1+n),this.currentTime>=this.timer&&this.onCountdownComplete()}},r.onCountdownComplete=function(){this.enabled=!1,m.instance.playSFX(p.EXPLODE),this.playAnimation(),this.resetCountdown(),this.node.parent.active=!1},r.resetToInitialState=function(){this.enabled=!1,this.node.parent.active=!0,this.currentTime=0;var t=this.node.getComponent(c);t&&(t.fillRange=-1)},r.startCountdown=function(){this.enabled=!0,this.node.parent.active=!0},r.playAnimation=function(){var t=this;this.bom.active=!0;var n=this.bom.parent,e=this.bom.worldPosition,i=l("Canvas")||this.node.scene;this.bom.setParent(i),this.bom.worldPosition=e;var o=this.bom.getComponent(h);o&&(o.play(),console.log(e),o.once(h.EventType.FINISHED,(function(){t.bom.active=!1,t.bom.setParent(n),t.bom.worldPosition=e,t.scheduleOnce((function(){u.emit(f.GAME_EVENTS.COUNTDOWN_COMPLETE)}),.5)})))},r.resetCountdown=function(){this.currentTime=0;var t=this.node.getComponent(c);t&&(t.fillRange=-1)},r.setCountdownTime=function(t){this.timer=t,this.resetToInitialState()},r.onDestroy=function(){u.off(f.GAME_EVENTS.COUNTDOWN_RESET,this.resetToInitialState,this),u.off(f.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this)},n}(d)).prototype,"bom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=b))||E));r._RF.pop()}}}));

System.register("bundle://main/_virtual/CountdownForTutorial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./type.ts"],(function(t){var e,n,i,o,r,a,s,l,c,u,h,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.Sprite,c=t.Vec3,u=t.tween,h=t.director,f=t.Component},function(t){d=t.TileConnect}],execute:function(){var p,w,m,g,C,T,v;r._RF.push({},"03b56Dz5l9CY6Pg/SLW94j+","CountdownForTutorial",void 0);var y=a.ccclass,b=a.property;t("Countdown",(p=y("Countdown"),w=b(s),m=b(s),p((T=e((C=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).timer=3,e.currentTime=0,i(e,"fail",T,o(e)),i(e,"wing",v,o(e)),e}n(e,t);var r=e.prototype;return r.start=function(){var t=this.node.getComponent(l);t&&(t.fillRange=-1),this.enabled=!0,this.fail.active=!1,this.wing.active=!1,this.fail.scale=new c(0,0,1),this.wing.scale=new c(0,0,1)},r.reset=function(){this.enabled=!0,this.fail.active=!1,this.wing.active=!1,this.fail.scale=new c(0,0,1),this.wing.scale=new c(0,0,1),this.resetCountdown()},r.update=function(t){if(this.enabled){this.currentTime+=t;var e=Math.min(this.currentTime/this.timer,1),n=this.node.getComponent(l);n&&(n.fillRange=-1+e),this.currentTime>=this.timer&&this.onCountdownComplete()}},r.onCountdownComplete=function(){this.enabled=!1,this.playAnimation(),this.resetCountdown()},r.resetToInitialState=function(){this.enabled=!1,this.node.parent.active=!0,this.currentTime=0;var t=this.node.getComponent(l);t&&(t.fillRange=-1)},r.startCountdown=function(){this.enabled=!0,this.node.parent.active=!0},r.playAnimation=function(){var t=this;this.fail.active=!0,this.wing.active=!0,u(this.fail).to(.5,{scale:new c(.5,.5,1)}).delay(.2).call((function(){u(t.wing).to(.5,{scale:new c(1,1,1)}).delay(.2).call((function(){t.reset()})).start()})).start()},r.resetCountdown=function(){this.currentTime=0;var t=this.node.getComponent(l);t&&(t.fillRange=-1)},r.setCountdownTime=function(t){this.timer=t,this.resetToInitialState()},r.onDestroy=function(){h.off(d.GAME_EVENTS.COUNTDOWN_RESET,this.resetToInitialState,this),h.off(d.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this)},e}(f)).prototype,"fail",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(C.prototype,"wing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=C))||g));r._RF.pop()}}}));

System.register("bundle://main/_virtual/EndTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./BaseTurn.ts"],(function(n){var t,i,e,o,u;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){e=n.Turn},function(n){o=n.AnimationHandler},function(n){u=n.BaseTurn}],execute:function(){i._RF.push({},"7e7fdGaaZ9HxoPiuFIXzRzg","EndTurn",void 0);n("EndTurn",function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var u=i.prototype;return u.onEnter=function(){var n=this;console.log("end"),this.game.isWin()&&Promise.all(o.animList).then((function(){n.game.isWin()?n.game.switchTurn(e.WIN):n.game.switchTurn(e.START)}))},u.onExit=function(){},u.onUpdate=function(){},i}(u));i._RF.pop()}}}));

System.register("bundle://main/_virtual/fail-popup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts"],(function(e){var t,i,r,n,o,l,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Label},function(e){p=e.BasePopup}],execute:function(){var u,c,s,f,v;o._RF.push({},"bc1f19BDEdJOLEwAl5uYpN5","fail-popup",void 0);var y=l.ccclass,b=l.property;e("Fail",(u=y("Fail"),c=b(a),u((v=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"level",v,n(t)),t}return i(t,e),t.prototype.onPopupShow=function(e){this.level.string="LEVEL "+e},t}(p)).prototype,"level",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=f))||s));o._RF.pop()}}}));

System.register("bundle://main/_virtual/FailTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,o,u,e,i;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){u=n.Popup},function(n){e=n.UImanager},function(n){i=n.BaseTurn}],execute:function(){o._RF.push({},"61b07ACKfhNEKxk69/h4V23","FailTurn",void 0);n("FailTurn",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var i=o.prototype;return i.onEnter=function(){this.game.turnOffInput(),e.togglePauseButton(!1),this.game.unChoose(),console.log("Fail"),e.showPopup(u.CONTINUE,!0,this.game.currentNumber())},i.onExit=function(){},i.onUpdate=function(){},o}(i));o._RF.pop()}}}));

System.register("bundle://main/_virtual/FillProgressBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationHandler.ts","./GameManager.ts","./SoundManager.ts","./global.ts"],(function(t){var i,e,n,s,l,r,o,a,h,u,c,d,f,g,m,p,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,o=t.Sprite,a=t.Label,h=t.UITransform,u=t.tween,c=t.Vec3,d=t.Tween,f=t.Component},function(t){g=t.AnimationHandler},function(t){m=t.default},function(t){p=t.SoundManager},function(t){v=t.SFX}],execute:function(){var b,y,S,z,w,F,P,B,x,L,T,R,M,A,C,N,W,_,D;l._RF.push({},"6a5a6pwZ/1Ba7vEmcx463CK","FillProgressBar",void 0);var H=r.ccclass,X=r.property;t("FillProgressBar",(b=H("FillProgressBar"),y=X(m),S=X(o),z=X(o),w=X(o),F=X(o),P=X(o),B=X(o),x=X(a),b((R=i((T=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),r=0;r<e;r++)l[r]=arguments[r];return i=t.call.apply(t,[this].concat(l))||this,n(i,"gm",R,s(i)),n(i,"left",M,s(i)),n(i,"right",A,s(i)),n(i,"mid",C,s(i)),n(i,"star",N,s(i)),n(i,"star1",W,s(i)),n(i,"star9",_,s(i)),i.currentStar=null,i.total=0,i.currentTile=0,i.size=0,i.isFirstFill=!0,i.tailNode=null,i.currentActive=0,i.score=0,n(i,"level",D,s(i)),i}e(i,t);var l=i.prototype;return l.start=function(){var t,i,e,n,s,l;(this.left.node.setScale(0,this.left.node.scale.y,this.left.node.z),this.right.node.setScale(0,this.right.node.scale.y,this.right.node.z),this.mid.node.setScale(0,this.mid.node.scale.y,this.mid.node.z),this.tailNode=this.mid.node.getChildByName("taile"),this.size=null!=(t=null==(i=this.node.getChildByName("bar"))||null==(i=i.getComponent(h))?void 0:i.contentSize.x)?t:0,g.setFillProgressBar(this),this.currentStar=null!=(e=null==(n=this.star)?void 0:n.node)?e:null,this.gm)&&(this.total=null!=(s=null==(l=this.gm)||null==(l=l.currentLevel)?void 0:l.getTileNum())?s:0,console.log(this.total),this.level.string="Lvl "+this.gm.currentNumber())},l.onTilesMatched=function(t){console.log("Tiles matched!"),this.updateProgressBar()},l.updateProgressBar=function(){if(!(this.mid.node.scale.x>8||this.total<=0||this.size<=0)){var t=18/this.total;this.isFirstFill&&t>0&&(this.showLeft(),this.showRight(),this.isFirstFill=!1),this.updateMidWidth(t),this.checkActive()}},l.isLastStar=function(){var t;return this.currentStar==(null==(t=this.star1)?void 0:t.node)},l.updateTillWin=function(){var t,i;this.showLeft(),this.updateMidWidth(8-this.mid.node.scale.x),this.star.node.active=!0,this.star9.node.active=!0,this.star1.node.active=!0,this.currentStar=null!=(t=null==(i=this.star1)?void 0:i.node)?t:null},l.checkActive=function(){var t,i,e,n;this.mid.node.scale.x>=4.5&&(this.star.node.active=!0,this.currentStar=null!=(t=null==(i=this.star9)?void 0:i.node)?t:null);this.mid.node.scale.x>=6&&(this.star9.node.active=!0,this.currentStar=null!=(e=null==(n=this.star1)?void 0:n.node)?e:null);this.mid.node.scale.x>=7.4&&(this.star1.node.active=!0)},l.showLeft=function(){this.left.node.setScale(1,this.left.node.scale.y,this.left.node.scale.z)},l.updateMidWidth=function(t){var i=this;p.instance.playSFX(v.PROGRESS),u(this.mid.node).to(.3,{scale:new c(t+this.mid.node.scale.x,this.mid.node.scale.y,this.mid.node.scale.z)},{onUpdate:function(){i.updateRightPosition()}}).start()},l.updateRightPosition=function(){if(this.right&&this.mid){var t=this.mid.node.getComponent(h);if(t){var i=t.contentSize.x*this.mid.node.scale.x,e=t.anchorX,n=this.mid.node.position.x+i*(1-e);this.right.node.setPosition(n,this.right.node.position.y,this.right.node.position.z)}}},l.showRight=function(){this.updateRightPosition(),this.right.node.setScale(1,this.right.node.scale.y,this.right.node.scale.z)},l.resetProgressBar=function(){var t,i,e;d.stopAllByTarget(null==(t=this.mid)?void 0:t.node),this.score=0,this.currentTile=0,this.isFirstFill=!0,this.left.node.setScale(0,this.left.node.scale.y,this.left.node.z),this.right.node.setScale(0,this.right.node.scale.y,this.right.node.z),this.mid.node.setScale(0,this.mid.node.scale.y,this.mid.node.z),this.star.node.active=!1,this.star1.node.active=!1,this.star9.node.active=!1,this.currentStar=null!=(i=null==(e=this.star)?void 0:e.node)?i:null},l.setTotal=function(t){this.total=t},l.setLv=function(t){this.level.string="Lvl "+t},i}(f)).prototype,"gm",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(T.prototype,"left",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(T.prototype,"right",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(T.prototype,"mid",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(T.prototype,"star",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(T.prototype,"star1",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(T.prototype,"star9",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(T.prototype,"level",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=T))||L));l._RF.pop()}}}));

System.register("bundle://main/_virtual/GameConfig.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"066a2a7XoVHzJHXDKi1vGjH","GameConfig",void 0);e("default",{TileSize:85});i._RF.pop()}}}));

System.register("bundle://main/_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./type.ts","./Board.ts","./LevelLoader.ts","./PathPool.ts","./StarPool.ts","./TilePool.ts","./SubTilePool.ts","./BaseTurn.ts","./EndTurn.ts","./LoadTurn.ts","./MatchTurn.ts","./StartTurn.ts","./AdsTurn.ts","./BombFail.ts","./FailTurn.ts","./PauseTurn.ts","./WinTurn.ts","./UImanager.ts","./ItemManager.ts","./InvalidPool.ts","./NopePool.ts","./SoundManager.ts","./ConfettiManager.ts"],(function(t){var e,i,n,o,r,s,a,l,h,u,c,f,d,v,g,T,m,p,C,P,L,E,b,w,y,S,A,M,N,I,O,B,z,D,U,_,F,W,k,V,H,G,R,K,X,x,j,Y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.assertThisInitialized,o=t.initializerDefineProperty,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,l=t.director,h=t.view,u=t.Vec3,c=t.Widget,f=t.find,d=t.Button,v=t.EventHandler,g=t.Tween,T=t.ParticleSystem2D,m=t.Component,p=t.tween,C=t.Color},function(t){P=t.Item,L=t.Turn,E=t.SUBTILE_PATH,b=t.TileType,w=t.SFX,y=t.getAllDescendants},function(t){S=t.TileConnect},function(t){A=t.default},function(t){M=t.LevelLoader},function(t){N=t.default},function(t){I=t.default},function(t){O=t.default},function(t){B=t.default},function(t){z=t.BaseTurn},function(t){D=t.EndTurn},function(t){U=t.LoadTurn},function(t){_=t.MatchTurn},function(t){F=t.StartTurn},function(t){W=t.AdsTurn},function(t){k=t.BombFail},function(t){V=t.FailTurn},function(t){H=t.PauseTurn},function(t){G=t.WinTurn},function(t){R=t.UImanager},function(t){K=t.ItemManager},function(t){X=t.default},function(t){x=t.default},function(t){j=t.SoundManager},function(t){Y=t.ConfettiManager}],execute:function(){var q,J,Q,Z,$,tt,et,it,nt,ot,rt,st,at,lt,ht,ut,ct,ft,dt;s._RF.push({},"d7cedYkadBLIrlmBMhdIKaL","GameManager",void 0);var vt=a.ccclass,gt=a.property;t("default",(q=vt("GameManager"),J=gt(O),Q=gt(Map),Z=gt(K),$=gt(N),tt=gt(I),et=gt(X),it=gt(x),nt=gt(Y),q((st=e((rt=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).levelLoader=M.getInstance(),e.currentLevel=void 0,e.time=0,e.isFirstTouch=0,e.ispause=!1,e.turnList=new Map,e.eventTarget=new EventTarget,e.currentTurn=new z(n(e)),e.board=new A,e.matchPair=[],o(e,"tilePool",st,n(e)),o(e,"subtilePool",at,n(e)),o(e,"itemManager",lt,n(e)),o(e,"pathPool",ht,n(e)),o(e,"starPool",ut,n(e)),o(e,"invalid",ct,n(e)),o(e,"nope",ft,n(e)),e.firstChosen=null,e.secondChosen=null,e.hintPath=[],e.hintPoint=[],e.hintTile=[],e.isgameOver=!1,o(e,"conf",dt,n(e)),e}i(e,t);var s=e.prototype;return s.onMatchPair=function(t){this.eventTarget.addEventListener("matchPair",t)},s.offMatchPair=function(t){this.eventTarget.removeEventListener("matchPair",t)},s.onTouch=function(t){this.eventTarget.addEventListener("touch",t)},s.offTouch=function(t){this.eventTarget.removeEventListener("touch",t)},s.onChoose=function(t){this.eventTarget.addEventListener("choose",t)},s.offChoose=function(t){this.eventTarget.removeEventListener("choose",t)},s.emitChoose=function(){this.eventTarget.dispatchEvent(new Event("choose"))},s.emitMatchPair=function(){this.eventTarget.dispatchEvent(new Event("matchPair"))},s.emitTouch=function(){this.eventTarget.dispatchEvent(new Event("touch"))},s.update=function(t){console.log(this.currentTurn)},s.stopHint=function(){var t;if(0!=this.hintPath.length){for(var e,i=r(this.hintPath);!(e=i()).done;){var n=e.value;n.updateVisual(n.node)}for(var o,s=function(){var t=o.value;p(t.circle).to(.2,{color:new C(255,255,255,0)}).call((function(){t.kill(),t.circle.color=new C(255,255,255,255)})).start()},a=r(this.hintPoint);!(o=a()).done;)s();this.hintTile.forEach((function(t){t.onUnHint()})),this.hintPath=[],this.hintPoint=[],this.hintTile=[],null==(t=this.itemManager)||null==(t=t.itemList.get(P.HINT))||t.enableFunction()}},s.start=function(){var t,e,i,n,o,r=this;null==(t=this.tilePool)||t.initialize(this),null==(e=this.pathPool)||e.initialize(this),null==(i=this.starPool)||i.initialize(this),null==(n=this.invalid)||n.initialize(this),null==(o=this.nope)||o.initialize(this),this.subTilePoolInit(),this.hideAll(),l.on(S.GAME_EVENTS.START_COUNTDOWN,(function(){}),this),this.levelLoader.restartLevel().then((function(){r.currentLevel=r.levelLoader.getCurrentLevel(),console.log(r.pathPool);var t=h.getVisibleSize();t.height>=t.width?(r.node.setPosition(new u(0,0)),r.currentLevel.scale=t.width/(r.currentLevel.gridWidth+3)/80):(r.node.setPosition(new u(0,-50)),r.currentLevel.scale=t.height/(r.currentLevel.gridHeight+3)/80),r.currentLevel.tileSize=80*r.currentLevel.scale+5,r.turnInit(),h.on("canvas-resize",r.resize,r),l.on(S.GAME_EVENTS.COUNTDOWN_COMPLETE,(function(){r.switchTurn(L.BOOM)}),r)}))},s.resize=function(){var t,e,i=this,n=h.getVisibleSize(),o=null==(t=this.node.getChildByName("Overlay"))?void 0:t.getComponent(c);n.height>=n.width?(o&&(o.verticalCenter=0),this.node.setPosition(new u(0,0)),this.currentLevel.scale=n.width/(this.currentLevel.gridWidth+3)/80):(o&&(o.verticalCenter=50),this.node.setPosition(new u(0,-50)),this.currentLevel.scale=n.height/(this.currentLevel.gridHeight+3)/80),this.currentLevel.tileSize=80*this.currentLevel.scale+5,null==(e=this.board)||e.board.forEach((function(t){t.forEach((function(t){t.reScale(i.currentLevel.scale),t.moveToRealPositionWithPadding(i.currentLevel,!1)}))}))},s.subTilePoolInit=function(){for(var t,e=this,i=f(E),n=r(null==i?void 0:i.children);!(t=n()).done;){var o=t.value;this.subtilePool.set(o.name,null==o?void 0:o.getComponent(B))}this.subtilePool.forEach((function(t){t.initialize(e)}))},s.isWin=function(){for(var t,e=r(this.board.board);!(t=e()).done;)for(var i,n=t.value,o=r(n);!(i=o()).done;){if(i.value.getTypeID()!=b.NONE)return!1}return!0},s.turnInit=function(){this.turnList.set(L.START,new F(this)),this.turnList.set(L.MATCH,new _(this)),this.turnList.set(L.END,new D(this)),this.turnList.set(L.LOAD,new U(this)),this.turnList.set(L.FAIL,new V(this)),this.turnList.set(L.WIN,new G(this)),this.turnList.set(L.PAUSE,new H(this)),this.turnList.set(L.BOOM,new k(this)),this.turnList.set(L.ADS,new W(this)),this.switchTurn(L.LOAD)},s.isSame=function(t,e){return t.getCoordinate().x===e.getCoordinate().x&&t.getCoordinate().y===e.getCoordinate().y},s.hideBot=function(){var t=this.node.scene.getChildByName("Canvas");if(t){var e=t.getChildByName("Bot");e&&(e.active=!1)}},s.hideAll=function(){var t,e=this.node.scene.getChildByName("Canvas");if(console.log("hide"),e){var i=e.getChildByName("Top"),n=e.getChildByName("Bot"),o=f("UImanager/combo",e),r=f("UImanager/good",e);null==(t=this.itemManager)||t.hideAll(),i&&(i.active=!1),n&&(n.active=!1),o&&(o.active=!1),r&&(r.active=!1)}},s.showAll=function(){var t=this.node.scene.getChildByName("Canvas");if(console.log("hide"),t){var e=t.getChildByName("Top"),i=f("UImanager/combo",t),n=f("UImanager/good",t),o=t.getChildByName("Bot");e&&(e.active=!0),o&&h.getVisibleSize().height>h.getVisibleSize().width&&(o.active=!0),i&&(i.active=!0),n&&(n.active=!0),this.resize()}},s.sameType=function(t,e){return t.getTypeID()===e.getTypeID()},s.adsPop=function(){var t;this.switchTurn(L.ADS);var e=null==(t=this.itemManager)?void 0:t.skipButton.getComponent(d);if(e){e.clickEvents.length=0;var i=new v;i.target=this.node,i.component="GameManager",i.handler="rescue",e.clickEvents.push(i)}console.log(this.currentTurn)},s.choose=function(t){var e;if(t.getTypeID()!=b.NONE){var i,n,o;if(this.emitTouch(),this.isFirstTouch++,1==this.isFirstTouch&&l.emit(S.GAME_EVENTS.START_COUNTDOWN),console.log(t.getCoordinate()),!this.firstChosen||!this.sameType(this.firstChosen,t))return null==(i=this.firstChosen)||i.onUnchoose(),this.firstChosen=t,this.firstChosen.onChoose(),this.stopHint(),void console.log("first: ",this.firstChosen.getCoordinate(),"second: ",null==(n=this.secondChosen)?void 0:n.getCoordinate());if(this.isSame(t,this.firstChosen))return null==(o=this.firstChosen)||o.onChoose(),void this.unChoose();this.emitChoose(),this.secondChosen=t,console.log("first: ",this.firstChosen.getCoordinate(),"second: ",null==(e=this.secondChosen)?void 0:e.getCoordinate()),this.matchPair.push({tile1:this.firstChosen,tile2:this.secondChosen}),this.unChoose(),this.switchTurn(L.MATCH)}},s.unChoose=function(){var t;null==(t=this.firstChosen)||t.onUnchoose(),this.firstChosen=null,this.secondChosen=null},s.match=function(){if(this.matchPair.length>0){var t,e,i;console.log(this.matchPair[0]);var n=null==(t=this.board)?void 0:t.getPath(this.matchPair[0].tile1,this.matchPair[0].tile2);null!=(e=this.board)&&e.canMatch(this.matchPair[0].tile1,this.matchPair[0].tile2,n.path,n.turnNum)&&this.emitMatchPair(),null==(i=this.board)||i.match(this.matchPair[0].tile1,this.matchPair[0].tile2),this.matchPair.shift()}},s.currentNumber=function(){return this.levelLoader.getCurrentLevelNumber()},s.poolInit=function(){},s.createBoard=function(t){var e,i,n;this.hintPath=[],this.hintPoint=[],this.hintTile=[],this.subtilePool.forEach((function(t){t.returnAll()})),null==(e=this.tilePool)||e.returnAll(),null==(i=this.itemManager)||i.intialize(this),null==(n=this.board)||n.create(this.tilePool,t);for(var o,s=r(this.subtilePool);!(o=s()).done;){var a,l=o.value;null==(a=this.board)||a.addSubTile(l[1],this.currentLevel,l[0])}this.currentLevel=this.levelLoader.getCurrentLevel()},s.switchTurn=function(t){this.isgameOver||(this.currentTurn&&this.currentTurn.onExit(),this.currentTurn=this.turnList.get(t),this.currentTurn.onEnter())},s.hideItem=function(){this.itemManager.node.active=!1},s.showItem=function(){this.itemManager.node.active=!0},s.turnOnInput=function(){var t=this;this.tilePool.itemList.forEach((function(e){0==e.onClickCallbacks.length&&e.addOnClickCallback((function(e){return t.choose(e)}))}))},s.restart=function(){var t=this;j.instance.playSFX(w.CLICK),this.ispause=!1,this.isgameOver=!1;for(var e,i=y(this.node),n=r(i);!(e=n()).done;){var o,s=e.value;g.stopAllByTarget(s),null==(o=s.getComponent(T))||o.stopSystem()}R.togglePauseButton(!0),R.hideAllPopups(),this.levelLoader.checkNeedToChange("failed"),this.levelLoader.restartLevel().then((function(){l.emit(S.GAME_EVENTS.COUNTDOWN_RESET),t.switchTurn(L.LOAD)}))},s.pause=function(){j.instance.playSFX(w.CLICK),this.ispause=!0,R.hideAllPopups(),R.togglePauseButton(!1),this.switchTurn(L.PAUSE)},s.rescue=function(){j.instance.playSFX(w.CLICK),this.isgameOver=!1,this.ispause=!1,R.hideAllPopups(),R.togglePauseButton(!0),this.time+=65,l.emit(S.GAME_EVENTS.COUNTDOWN_RESET),l.emit(S.GAME_EVENTS.START_COUNTDOWN),this.turnOnInput(),this.switchTurn(L.START)},s.unPause=function(){this.ispause=!1,j.instance.playSFX(w.CLICK);for(var t,e=y(this.node),i=r(e);!(t=i()).done;){var n,o=t.value;if(g.resumeAllByTarget(o),o.getComponent(T))null==(n=o.getComponent(T))||n.resetSystem()}R.hideAllPopups(),R.togglePauseButton(!0),this.turnOnInput(),this.showItem(),this.switchTurn(L.START)},s.moveOn=function(){var t=this;j.instance.playSFX(w.CLICK),this.isgameOver=!1,this.ispause=!1,R.togglePauseButton(!0),R.hideAllPopups(),this.levelLoader.checkNeedToChange("completed"),this.levelLoader.changeLevel().then((function(){t.switchTurn(L.LOAD)}))},s.turnOffInput=function(){this.tilePool.itemList.forEach((function(t){t.clearOnClickCallbacks()}))},s.onDestroy=function(){l.off(S.GAME_EVENTS.COUNTDOWN_COMPLETE,(function(){}),this)},s.setActive=function(t){this.node.active=t},e}(m)).prototype,"tilePool",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(rt.prototype,"subtilePool",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),lt=e(rt.prototype,"itemManager",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(rt.prototype,"pathPool",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(rt.prototype,"starPool",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(rt.prototype,"invalid",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(rt.prototype,"nope",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(rt.prototype,"conf",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ot=rt))||ot));s._RF.pop()}}}));

System.register("bundle://main/_virtual/global.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts"],(function(e){var t,o,n,i,r,T,u;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,n=e.Vec2,i=e.view,r=e.Vec3,T=e.easing},function(e){u=e.default}],execute:function(){e({backInSlowEnd:function(e){return e<.5?T.backIn(2*e)/2:.5+T.cubicOut(2*(e-.5))/2},getAllDescendants:function(e){var o=[];return function e(n){for(var i,r=t(n.children);!(i=r()).done;){var T=i.value;o.push(T),e(T)}}(e),o},getComboCount:function(e){return"resources/animation/"+e},getScale:function(){var e=i.getVisibleSize(),t=e.width/720,o=e.width/1280,n=Math.max(t,o);return new r(n,n)},getTilePath:function(e,t){return e==l.ROCKET?"AllTiles/rocket/spriteFrame":"AllTiles/"+(t+String(e))+"/spriteFrame"},getTilePosition:function(e,t,o,i,r){var T=i*u.TileSize/2,l=o*u.TileSize/2,E=t*u.TileSize+u.TileSize/2-T,O=-(e*u.TileSize+u.TileSize/2-l);return new n(E,O)},getTilePositionByLevel:function(e,t,o,i){void 0===i&&(i=0);var r=o.tileSize,T=(o.gridWidth+2*i)*r,u=(o.gridHeight+2*i)*r;return new n(e*r+r/2-T/2,-(t*r+r/2-u/2))}}),o._RF.push({},"99b72YbvlRKuojoDTLGRoZ0","global",void 0);e("SubType",function(e){return e.BOOM="BOOM",e.GRAVITY="GRAVITY",e.ROCKET="ROCKET",e.BUTTERFLY="BUTTERFLY",e}({})),e("Turn",function(e){return e[e.LOAD=0]="LOAD",e[e.START=1]="START",e[e.MATCH=2]="MATCH",e[e.END=3]="END",e[e.PAUSE=4]="PAUSE",e[e.FAIL=5]="FAIL",e[e.WIN=6]="WIN",e[e.BOOM=7]="BOOM",e[e.ADS=8]="ADS",e}({}));var l=e("TileType",function(e){return e[e.NONE=-1]="NONE",e[e.TYPE0=0]="TYPE0",e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4",e[e.TYPE5=5]="TYPE5",e[e.TYPE6=6]="TYPE6",e[e.TYPE7=7]="TYPE7",e[e.ROCKET=8]="ROCKET",e}({}));e("Popup",function(e){return e.FAILPOPUP="failPopUp",e.BOOMPOPUP="boomPopup",e.WINPOPUP="victoryPopup",e.PAUSEPOPUP="pausePopup",e.ADSPOPUP="adsPopup",e.CONTINUE="continuePopup",e.ROCKETTUTORIAL="rocketTutorial",e.BOOMTUTORIAL="Bomtuto",e}({})),e("Theme",function(e){return e.NONE="",e.CAKE="Img0_",e.FRUIT="Img1_",e.FISH="Img2_",e.CHAR="Img3_",e.VEHICLE="Img4_",e.ANIMAL="Img5_",e.FASHION="Img6_",e.SHELL="Img7_",e.BUTTERFLY="Img8_",e.DRINK="Img9_",e}({}));e("FIREWORK_PATH","AllTiles/firework/spriteFrame");e("SUBTILE_PATH","Canvas/SubtilePool"),e("ROCKET_NODE_PATH","Canvas/SubtilePool/RocketPool"),e("GRAVITY_NODE_PATH","Canvas/SubtilePool/GravityPool"),e("BOOM_NODE_PATH","Canvas/SubtilePool/BoomPool"),e("Direction",function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.RIGHT=2]="RIGHT",e[e.DOWN=3]="DOWN",e[e.LEFT=4]="LEFT",e}({})),e("directionValue",{none:new n(0,0),up:new n(0,1),right:new n(1,0),down:new n(0,-1),left:new n(-1,0)}),e("Item",function(e){return e.HINT="HintItem",e.BOOM="BoomDefuseItem",e.SHUFFLE="ShuffleItem",e.ROCKET="RocketItem",e.SUPERROCKET="SuperRocketItem",e}({})),e("ROCKET_PATH","sprite/prop_rocket/spriteFrame");e("SFX",function(e){return e.CLICK="clicks",e.COLLECT_STAR="collect_stars",e.PROGRESS="progress_star",e.LEVELSTART="level_start",e.COMBO1="combo_1",e.COMBO2="combo_2",e.COMBO3="combo_3",e.COMBO4="combo_4",e.COMBO5="combo_5",e.LEVELCOMPLETE="level_complete",e.THREE_STAR="three_stars",e.ROCKET_FLY="rocket_fly",e.EXPLODE="bomb_explode_1",e.INVALID_MATCH="invalid_match",e}({}));o._RF.pop()}}}));

System.register("bundle://main/_virtual/GoodPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./type.ts"],(function(t){var i,e,n,o,r,s,a,l,c,u,h,g,p,d,m,f,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.SpriteFrame,l=t.Node,c=t.Vec3,u=t.director,h=t.Sprite,g=t.Tween,p=t.Color,d=t.tween,m=t.Component},function(t){f=t.default},function(t){b=t.TileConnect}],execute:function(){var v,w,y,C,P,T,M,O,S,z,F,L,A;r._RF.push({},"d3896edoUNFH6c8V2svOnF6","GoodPopup",void 0);var N=s.ccclass,G=s.property;t("Good",(v=N("Good"),w=G(f),y=G([a]),C=G([a]),P=G(l),T=G(l),v((S=i((O=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"gm",S,o(i)),i.timer=5,i.currentTime=0,i.comboCount=0,n(i,"listSprite",z,o(i)),n(i,"listLight",F,o(i)),i.boundOnMatchPair=null,n(i,"light",L,o(i)),n(i,"gud",A,o(i)),i.origin=new c,i}e(i,t);var r=i.prototype;return r.start=function(){this.gm&&(this.boundOnMatchPair=this.onMatchPair.bind(this),this.gm.onMatchPair(this.boundOnMatchPair)),this.node.active=!1,this.origin=this.node.position.clone(),u.on(b.GAME_EVENTS.COUNTDOWN_RESET,this.resetCombo1,this)},r.onDestroy=function(){this.gm&&this.boundOnMatchPair&&this.gm.offMatchPair(this.boundOnMatchPair)},r.update=function(t){this.currentTime+=t,this.currentTime>this.timer&&(this.node.active=!1,this.comboCount=0)},r.onMatchPair=function(){var t,i;if(this.comboCount++,!(this.comboCount<2)){var e=this.comboCount-2,n=Math.min(e,this.listSprite.length-1),o=null==(t=this.gud)?void 0:t.getComponent(h);o&&n>=0&&n<this.listSprite.length&&(o.spriteFrame=this.listSprite[n]);var r=null==(i=this.light)?void 0:i.getComponent(h);r&&n>=0&&n<this.listLight.length&&(r.spriteFrame=this.listLight[n]),this.gud.active=!1,this.light.active=!1,this.node.active=!0,this.playSequentialAnimation(),this.resetCombo()}},r.playSequentialAnimation=function(){g.stopAllByTarget(this.light),g.stopAllByTarget(this.gud),g.stopAllByTarget(this.node),this.showLight((function(){})),this.showPic((function(){})),this.moveNodeUp()},r.showLight=function(t){var i;this.light.active=!0,this.light.scale=new c(0,0,1),this.light.getComponent(h).color=new p(255,255,255,0),d(this.light).to(.3,{scale:new c(1,1,1)},{easing:"quadOut"}).call((function(){t&&t()})).start(),d(null==(i=this.light)?void 0:i.getComponent(h)).repeatForever(d().to(.1,{color:new p(255,255,255,255)},{easing:"sineOut"}).to(.1,{color:new p(255,255,255,0)},{easing:"sineOut"}).call((function(){t&&t()}))).start()},r.showPic=function(t){this.gud.active=!0,this.gud.scale=new c(0,0,1),d(this.gud).to(.3,{scale:new c(.8,.8,1)},{easing:"backOut"}).call((function(){t&&t()})).start()},r.moveNodeUp=function(){var t=this;this.node.setPosition(this.origin.clone());var i=this.node.position.clone(),e=new c(i.x,i.y+70,i.z);d(this.node).to(.6,{position:e},{easing:"quadOut"}).delay(.2).call((function(){d(t.node.getComponent(h)).to(.15,{color:new p(255,255,255,0)}).call((function(){t.node.getComponent(h).color=new p(255,255,255,255),t.gud.active=!1,t.light.active=!1,t.node.position=i})).start()})).start()},r.resetCombo=function(){this.currentTime=0},r.resetCombo1=function(){this.comboCount=0,this.currentTime=0},i}(m)).prototype,"gm",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(O.prototype,"listSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=i(O.prototype,"listLight",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=i(O.prototype,"light",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(O.prototype,"gud",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=O))||M));r._RF.pop()}}}));

System.register("bundle://main/_virtual/GravityManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts"],(function(e){var t,a,r,i,n,c,o;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,r=e._decorator,i=e.Vec2,n=e.Component},function(e){c=e.directionValue,o=e.Direction}],execute:function(){var s,u;a._RF.push({},"82dfaktVwVLkrbOVb+WvtfO","GravityManager",void 0);var l=r.ccclass;r.property,e("GravityManager",l("GravityManager")(((u=function(e){function a(){return e.apply(this,arguments)||this}return t(a,e),a.setCircle=function(e){a.gravityChangable=!!e},a.changeGravity=function(e){switch(e){case o.DOWN:a.direction=c.down;break;case o.UP:a.direction=c.up;break;case o.LEFT:a.direction=c.left;break;case o.RIGHT:a.direction=c.right;break;default:a.direction=c.none}},a.setUpManager=function(e){this.changeGravity(o.DOWN)},a.cycleGravity=function(){if(this.gravityChangable){var e;switch(this.getCurrentDirection()){case o.UP:e=o.RIGHT;break;case o.RIGHT:e=o.DOWN;break;case o.DOWN:e=o.LEFT;break;case o.LEFT:e=o.UP;break;default:e=o.NONE}this.changeGravity(e)}},a.getCurrentDirection=function(){var e=this.direction;return e.equals(c.up)?o.UP:e.equals(c.right)?o.RIGHT:e.equals(c.down)?o.DOWN:e.equals(c.left)?o.LEFT:o.NONE},a}(n)).direction=new i,u.gravityChangable=!0,s=u))||s);a._RF.pop()}}}));

System.register("bundle://main/_virtual/GravitySubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./GameManager.ts","./GravityManager.ts","./BaseSubTile.ts"],(function(t){var e,r,n,i,o,a,c,l,u;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,i=t.Vec2},function(t){o=t.Direction,a=t.TileType},function(t){c=t.default},function(t){l=t.GravityManager},function(t){u=t.BaseSubTile}],execute:function(){var f;r._RF.push({},"26465GJPW5B5o/Iu8qhYkx4","GravitySubTile",void 0);var s=n.ccclass;n.property,t("GravitySubTile",s("GravitySubtile")(f=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).changeAfterMove=!1,e}e(r,t);var n=r.prototype;return n.onAttach=function(e){t.prototype.onAttach.call(this,e)},n.onDead=function(t,e,r){if(this.tile&&r&&r.tile){var n=this.tile.getCoordinate(),i=r.tile.getCoordinate();if(e){var o=n.x*l.direction.x+n.y*l.direction.y,a=i.x*l.direction.x+i.y*l.direction.y>o?[r,this]:[this,r],c=a[0],u=a[1];c.tile.kill(),u.tile.kill(),c.resolveGravity(t)&&l.cycleGravity()}}},n.resolveGravity=function(t){var e,r=l.getCurrentDirection();if(r===o.NONE)return!1;console.log(r);var n=null==(e=this.node.parent)||null==(e=e.getComponent(c))?void 0:e.currentLevel;if(!n)return!1;var u=t.board.length,f=t.board[0].length,s=l.direction.x,v=l.direction.y,d=s+v>0,y=function(t){return Array.from({length:t},(function(t,e){return e})).slice(1,t-1)},g=!1;if(0!==v)for(var h=function(e){for(var r=y(u).map((function(r){return t.board[r][e]})),o=r.filter((function(t){return t.getTypeID()===a.NONE})),c=r.filter((function(t){return t.getTypeID()!==a.NONE})),l=d?[].concat(o,c):[].concat(c,o),f=0;f<l.length;f++){var s=f+1,v=l[f];t.board[s][e]!==v&&(g=!0),t.board[s][e]=v,v.setCoordinate(new i(e,s)),v.moveToRealPositionWithPadding(n)}},p=0;p<f;p++)h(p);else for(var b=function(e){for(var r=y(f).map((function(r){return t.board[e][r]})),o=r.filter((function(t){return t.getTypeID()===a.NONE})),c=r.filter((function(t){return t.getTypeID()!==a.NONE})),l=d?[].concat(o,c):[].concat(c,o),u=0;u<l.length;u++){var s=u+1,v=l[u];t.board[e][s]!==v&&(g=!0),t.board[e][s]=v,v.setCoordinate(new i(s,e)),v.moveToRealPositionWithPadding(n)}},T=0;T<u;T++)b(T);return g},r}(u))||f);r._RF.pop()}}}));

System.register("bundle://main/_virtual/HintItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(t){var n,e,o,a,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator},function(t){a=t.TileType},function(t){i=t.default}],execute:function(){var r;e._RF.push({},"129f9RmAKxFALGZ3rb0g4tX","HintItem",void 0);var l=o.ccclass;o.property,t("default",l("HintItem")(r=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))||this).item="useHint",n}n(e,t);var o=e.prototype;return o.onUse=function(){var n,e;if(!(this.clicked||this.locked||null!=(n=this.game)&&n.isgameOver||(t.prototype.onUse.call(this),this.game.hintPath.length>0||0==this.quantity))){var o=null==(e=this.game)||null==(e=e.board)?void 0:e.board;if(o){var i=!1;t:for(var r=0;r<o.length;r++)for(var l=0;l<o[0].length;l++){var h=o[r][l];if(h&&h.getTypeID()!=a.NONE)for(var s=r;s<o.length;s++)for(var u=r===s?l+1:0;u<o[0].length;u++){var g,c,f=o[s][u];if(f&&f.getTypeID()!=a.NONE){var d=null==(g=this.game.board)?void 0:g.getPath(h,f);if(h!==f&&null!=(c=this.game)&&null!=(c=c.board)&&c.canMatch(h,f,d.path,d.turnNum)){this.showHintEffect(h,f),i=!0;break t}}}}i&&(this.quantity--,this.textChange())}}},o.showHintEffect=function(t,n){var e,o,a,i;null==(e=this.game)||e.unChoose();null==(o=this.game)||o.board;var r=null==(a=this.game)||null==(a=a.board)?void 0:a.getPath(t,n),l=this.getTurnPoints(r.path);null==(i=this.game)||i.hintTile.push(t,n),t.onHint(),n.onHint(),this.drawPath(l,this.game.pathPool),this.putStar(l,this.game.starPool)},o.getTurnPoints=function(t){if(t.length<2)return t;for(var n=[t[0]],e=1;e<t.length-1;e++){var o=t[e-1],a=t[e],i=t[e+1],r=a.x-o.x,l=a.y-o.y,h=i.x-a.x,s=i.y-a.y;r===h&&l===s||n.push(a)}return n.push(t[t.length-1]),n},o.drawPath=function(t,n){for(var e=0;e<t.length-1;e++){var o,a,i=t[e],r=(null==(o=this.game.board)?void 0:o.board[i.y][i.x]).node.getPosition().toVec2(),l=t[e+1],h=(null==(a=this.game.board)?void 0:a.board[l.y][l.x]).node.getPosition().toVec2(),s=n.getFirstItem();console.log("from: ",r,"to: ",h),null==s||s.createPath(r,h,!1),this.game.hintPath.push(s),console.log("draw path from",i,"to",l)}},o.putStar=function(t,n){for(var e=0;e<t.length;e++){var o,a,i=t[e],r=(null==(o=this.game)||null==(o=o.board)?void 0:o.board[i.y][i.x]).node.getPosition().clone(),l=n.getFirstItem();null==l||l.putAtForHint(r),null==(a=this.game)||a.hintPoint.push(l)}},e}(i))||r);e._RF.pop()}}}));

System.register("bundle://main/_virtual/InvalidPath.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,a,i,l,r,s,c,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.Sprite,i=t.Vec3,l=t.Color,r=t.tween,s=t.Tween,c=t.Vec2,d=t.Component}],execute:function(){var h;n._RF.push({},"6122aofLhxDlZgS/TrkdMAd","InvalidPath",void 0);var u=o.ccclass;o.property,t("InvalidPath",u("InvalidPath")(h=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).used=!1,e.headCoord=new c,e.tailCoord=new c,e}e(n,t);var o=n.prototype;return o.createPath=function(t,e,n){void 0===n&&(n=!0),this.headCoord=t,this.tailCoord=e,this.updateVisual(this.node,n)},o.calcDir=function(){var t=this.tailCoord.clone().subtract(this.headCoord.clone()),e=t.clone().normalize();return{angle:180*Math.atan2(e.y,e.x)/Math.PI,length:t.length()}},o.updateVisual=function(t,e){var n=this;void 0===e&&(e=!0);var o=t.getChildByName("Path"),s=o.getComponent(a),c=this.calcDir(),d=c.angle,h=c.length;t.angle=d-90,t.setPosition(this.headCoord.x,this.headCoord.y),o.setScale(new i(1,h/12)),s.color=new l(255,255,255,255),e&&r(s).delay(.1).to(.45,{color:new l(255,255,255,0)}).call((function(){s.color=new l(255,255,255,255),n.kill()})).start()},o.isUsed=function(){return this.used},o.reSpawn=function(){this.used=!0,this.node.active=!0},o.kill=function(){this.used=!1;var t=this.node.getChildByName("Path");if(null!=t&&t.isValid){var e=t.getComponent(a);null!=e&&e.isValid&&(s.stopAllByTarget(e),e.color=new l(255,255,255,0),this.node.active=!1)}},n}(d))||h);n._RF.pop()}}}));

System.register("bundle://main/_virtual/InvalidPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InvalidPath.ts"],(function(e){var t,i,r,n,o,l,a,u,s,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,u=e.Prefab,s=e.instantiate,c=e.Component},function(e){f=e.InvalidPath}],execute:function(){var p,d,h,v,b,m,P;l._RF.push({},"10f992DS1dKqJ0D7B31ryEV","InvalidPool",void 0);var g=a.ccclass,y=a.property;e("default",(p=g("InvalidPool"),d=y(u),h=y(Number),p((m=t((b=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"pathPrefab",m,n(t)),r(t,"size",P,n(t)),t.itemList=[],t}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=s(this.pathPrefab);i&&(console.log("added child"),e.node.addChild(i),i.setSiblingIndex(999998)),this.itemList.push(null==i?void 0:i.getComponent(f))}this.returnAll()},l.getFirstItem=function(){for(var e,t=o(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i.node.setSiblingIndex(999998),i}return null},l.returnPool=function(e){e.kill()},l.returnMultiple=function(e){for(var t,i=o(e);!(t=i()).done;){t.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(c)).prototype,"pathPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(b.prototype,"size",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=b))||v));l._RF.pop()}}}));

System.register("bundle://main/_virtual/ItemManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(t){var e,i,n,o,a,l,r,u,s,c,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,r=t._decorator,u=t.Node,s=t.Component},function(t){c=t.Item},function(t){m=t.default}],execute:function(){var f,g,h,v,p,d,I,b,L;l._RF.push({},"af1dc3vGOxM0YqhvfMwuQjP","ItemManager",void 0);var y=r.ccclass,k=r.property;t("ItemManager",(f=y("ItemManager"),g=k(u),h=k(u),v=k(u),f((I=e((d=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this).game=null,e.itemList=new Map,n(e,"bg",I,o(e)),n(e,"botOverlay",b,o(e)),n(e,"skipButton",L,o(e)),e}i(e,t);var l=e.prototype;return l.onLoad=function(){this.cacheAllItem()},l.hideExcept=function(t){for(var e,i=a(this.itemList);!(e=i()).done;){var n=e.value;n[0]!=t&&n[1].fade(!0)}},l.hideAll=function(){for(var t,e=a(this.itemList);!(t=e()).done;){t.value[1].node.active=!1}},l.showItem=function(t){this.bg.active=!0;for(var e,i=a(this.itemList);!(e=i()).done;){var n=e.value;n[0]==t&&(n[1].node.active=!0)}},l.showAll=function(){this.bg.active=!0;for(var t,e=a(this.itemList);!(t=e()).done;){t.value[1].fade(!1)}},l.intialize=function(t){console.log(this.itemList),t&&(this.game=t),console.log("DONE INIT, GAME MANAGER: ",t);for(var e,i=a(this.itemList);!(e=i()).done;){var n=e.value,o=Number(localStorage.getItem(n[0]));localStorage.getItem(n[0])||(o=10),0==o&&localStorage.setItem(n[0],"0"),console.log(o),n[1].setquantity(o),n[1].init(),t&&(n[1].game=this.game,console.log("init item: ",n[1],n[1].game))}},l.cacheAllItem=function(){var t=this;Object.values(c).forEach((function(e){var i=t.node.getChildByName(e);i.getComponent(m).itemManager=t,i.getComponent(m).itemName=e,i&&t.itemList.set(e,i.getComponent(m)),console.log("cached: ",e)}))},l.useItem=function(t){var e;if(null==(e=this.game)||!e.isgameOver){var i=this.itemList.get(t);null==i||i.onUse(),0==(null==i?void 0:i.quantity)&&(i.stopFunction(),i.needToAds()),localStorage.setItem(t,String(null==i?void 0:i.quantity))}},l.useHint=function(){var t;this.useItem(c.HINT),null==(t=this.itemList.get(c.HINT))||t.stopFunction()},l.useBoom=function(){this.useItem(c.BOOM)},l.useShuffle=function(){this.useItem(c.SHUFFLE)},l.useRocket=function(){this.useItem(c.ROCKET)},l.useSuperRocket=function(){this.useItem(c.SUPERROCKET)},l.unlockItem=function(t){var e;null==(e=this.itemList.get(t))||e.unlock()},l.lockItem=function(t){var e;null==(e=this.itemList.get(t))||e.lock()},l.lockAll=function(){this.itemList.forEach((function(t){t.lock()}))},l.unlockAll=function(){this.itemList.forEach((function(t){t.unlock()}))},e}(s)).prototype,"bg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(d.prototype,"botOverlay",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(d.prototype,"skipButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));l._RF.pop()}}}));

System.register("bundle://main/_virtual/Level.ts",["cc","./global.ts"],(function(i){var t,e,h;return{setters:[function(i){t=i.cclegacy,e=i.view},function(i){h=i.Theme}],execute:function(){t._RF.push({},"65509Fo80xNN5Sl/JgNMJaN","Level",void 0);i("Level",function(){function i(i,t,s,r,g,l,c,d){this.theme=h.CAKE,this.gridHeight=0,this.gridWidth=0,this.grid=[],this.time=void 0,this.tileSize=0,this.scale=0,this.gravity=0,this.circle=!1,this.layer=new Map,this.theme=r,this.gridHeight=i,this.gridWidth=t,this.grid=s,this.gravity=l,this.circle=c,this.scale=e.getVisibleSize().width/(this.gridWidth+2)/80,this.tileSize=80*this.scale+5,d&&(this.layer=d),this.time=g}var t=i.prototype;return t.change=function(i,t,h,s,r,g,l,c){this.theme=s,this.gridHeight=i,this.gridWidth=t,this.grid=h,this.gravity=g,this.circle=l;var d=e.getVisibleSize();d.height>=d.width?this.scale=e.getVisibleSize().width/(this.gridWidth+3)/80:this.scale=e.getVisibleSize().height/(this.gridHeight+3)/80,this.tileSize=80*this.scale+5,c&&(this.layer=c),this.time=r},t.getTime=function(){return this.time},t.getTileNum=function(){return this.gridHeight*this.gridWidth},i}());t._RF.pop()}}}));

System.register("bundle://main/_virtual/LevelLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./Level.ts","./ShuffleLevel2.ts"],(function(e){var t,r,n,u,a,s,i,c;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,u=e.resources,a=e.JsonAsset},function(e){s=e.Theme},function(e){i=e.Level},function(e){c=e.ShuffleLevel}],execute:function(){n._RF.push({},"808700sc6VHnLXKwlOdsw7G","LevelLoader",void 0),e("LevelLoader",function(){function e(){this.currentLevel=null,this.current=1,this.needToChange=!1,this.data=null,this.shuffleLevel=null,this.maxLevel=100;var e=localStorage.getItem("currentLevel");this.current=e?parseInt(e,10):1,this.loadLevel(this.current)}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var n=e.prototype;return n.saveCurrentLevel=function(){localStorage.setItem("currentLevel",this.current.toString())},n.checkNeedToChange=function(e){switch(e){case"completed":case"skip":this.needToChange=!0;break;case"failed":this.needToChange=!1}},n.loadLevelData=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r="map/map/level"+t;u.load(r,a,(function(r,n){if(r)console.error("Không load được level "+t+":",r),e(null);else{var u=n.json;e(u)}}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadLevel=function(){var e=t(r().mark((function e(t){var n,u,a,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLevelData(t);case 2:if(n=e.sent){e.next=6;break}return console.error("cant load level "+t),e.abrupt("return",!1);case 6:if(this.data=n,this.shuffleLevel=new c(n),u=this.shuffleLevel.generateMap(),a=this.shuffleLevel.getMapLayer(u),o=this.getThemeFromString(n.Theme),this.currentLevel){e.next=15;break}this.currentLevel=new i(5,5,[[0,1,2,2,3],[4,5,4,6,7],[3,2,-1,2,6],[2,1,-1,-1,5],[7,2,-1,-1,0]],s.CAKE,1e6,0,!1),e.next=18;break;case 15:if(1!==t){e.next=17;break}return e.abrupt("return",!0);case 17:this.currentLevel.change(n.GridHeight,n.GridWidth,u,o,n.Time,n.Gravity,n.Circle,a);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getThemeFromString=function(e){switch(e.toUpperCase()){case"CAKE":return s.CAKE;case"FRUIT":return s.FRUIT;case"BUTTERFLY":return s.BUTTERFLY;case"DRINK":return s.DRINK;default:return s.CAKE}},n.changeLevel=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.needToChange){e.next=3;break}return console.log("no need bro "),e.abrupt("return",!1);case 3:if(!((t=this.current+1)>this.maxLevel)){e.next=7;break}return console.log("donelevel!"),e.abrupt("return",!1);case 7:return e.next=9,this.loadLevel(t);case 9:if(!e.sent){e.next=15;break}return this.current=t,this.saveCurrentLevel(),this.needToChange=!1,e.abrupt("return",!0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.jumpToLevel=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<1||t>this.maxLevel)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.loadLevel(t);case 4:if(!e.sent){e.next=10;break}return this.current=t,this.saveCurrentLevel(),this.needToChange=!1,e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.restartLevel=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLevel(this.current);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.previousLevel=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.current<=1)){e.next=2;break}return e.abrupt("return",!1);case 2:return t=this.current-1,e.next=5,this.loadLevel(t);case 5:if(!e.sent){e.next=11;break}return this.current=t,this.saveCurrentLevel(),this.needToChange=!1,e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getCurrentLevel=function(){return this.currentLevel},n.getCurrentLevelNumber=function(){return this.current},n.getNeedToChange=function(){return this.needToChange},n.getLevelData=function(){return this.data},n.getShuffleLevel=function(){return this.shuffleLevel},n.setNeedToChange=function(e){this.needToChange=e},n.setMaxLevel=function(e){this.maxLevel=e},e}()).instance=null,n._RF.pop()}}}));

System.register("bundle://main/_virtual/LoadTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./GravityManager.ts","./SoundManager.ts","./BaseTurn.ts","./type.ts","./TutorialManager.ts"],(function(t){var e,n,r,a,i,u,s,l,o,g,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.director},function(t){a=t.SFX,i=t.Turn},function(t){u=t.AnimationHandler},function(t){s=t.GravityManager},function(t){l=t.SoundManager},function(t){o=t.BaseTurn},function(t){g=t.TileConnect},function(t){h=t.TutorialManager}],execute:function(){n._RF.push({},"d5f4fF36RhJ4qZay0AgrkgB","LoadTurn",void 0);t("LoadTurn",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onEnter=function(){var t,e,n,o,m,c,f,T;(this.game.isFirstTouch=0,null==(t=this.game.pathPool)||t.returnAll(),null==(e=this.game.starPool)||e.returnAll(),this.game.subtilePool.forEach((function(t){t.returnAll()})),u.animList=[],null==(n=u.fillProgressBar)||n.resetProgressBar(),this.turnOffInput(),null==(o=this.game.tilePool)||o.returnAll(),this.game.unChoose(),this.game.currentNumber()<2)&&(this.game.hideBot(),null==(f=this.game.itemManager)||f.hideAll());(this.game.currentNumber()>=2&&this.game.showAll(),this.turnOffInput(),s.setUpManager(this.game.currentLevel),this.game.time=this.game.currentLevel.getTime(),r.emit(g.GAME_EVENTS.COUNTDOWN_RESET),this.game.matchPair=[],this.game.createBoard(this.game.currentLevel),l.instance.playSFX(a.LEVELSTART),null==(m=u.fillProgressBar)||m.setTotal(this.game.currentLevel.getTileNum()),null==(c=u.fillProgressBar)||c.setLv(this.game.currentNumber()),this.turnOnInput(),this.game.board&&h.showCurrentTutorial(this.game.currentNumber(),this.game.board,this.game),this.game.currentNumber()>=7)&&(null==(T=this.game.itemManager)||T.showAll());this.game.switchTurn(i.START)},o.onExit=function(){},o.turnOnInput=function(){var t;null==(t=this.game.board)||t.setUpManager(this.game)},o.turnOffInput=function(){var t;null==(t=this.game.board)||t.resetInput()},n}(o));n._RF.pop()}}}));

System.register("bundle://main/_virtual/main",["./AssetLoader.ts","./BackGround.ts","./ShuffleLevel.ts","./AnimationHandler.ts","./FillProgressBar.ts","./Board.ts","./ConfettiManager.ts","./BaseItem.ts","./BoomDefuseItem.ts","./HintItem.ts","./RocketItem.ts","./ShuffleItem.ts","./SuperRocketItem.ts","./Level.ts","./LevelLoader.ts","./ShuffleLevel2.ts","./GameManager.ts","./GravityManager.ts","./ItemManager.ts","./SoundManager.ts","./TutorialManager.ts","./InvalidPath.ts","./Path.ts","./BoomPool.ts","./InvalidPool.ts","./NopePool.ts","./PathPool.ts","./StarPool.ts","./TilePool.ts","./Nope.ts","./Star.ts","./BaseSubTile.ts","./BoomSubTile.ts","./ButterflySubTile.ts","./Countdown.ts","./CountdownForTutorial.ts","./GravitySubTile.ts","./Pulse.ts","./RocketSubTile.ts","./SubTilePool.ts","./SubTilePoolManager.ts","./BreakTile.ts","./RocketTutorial.ts","./Tile.ts","./Timer.ts","./AdsTurn.ts","./BaseTurn.ts","./BombFail.ts","./EndTurn.ts","./FailTurn.ts","./LoadTurn.ts","./MatchTurn.ts","./PauseTurn.ts","./StartTurn.ts","./WinTurn.ts","./BaseTutorial.ts","./Tutorial1.ts","./Tutorial2.ts","./Tutorial3.ts","./Tutorial4.ts","./Tutorial5.ts","./Tutorial6.ts","./Combo.ts","./GoodPopup.ts","./UImanager.ts","./adsPopup.ts","./continuePopup.ts","./basePopup.ts","./Rotate.ts","./Sand.ts","./boom-popup.ts","./fail-popup.ts","./RotateStar.ts","./victoryPopup.ts","./GameConfig.ts","./global.ts","./type.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("bundle://main/_virtual/MatchTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./BaseTurn.ts"],(function(n){var t,i,e,o,a;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){e=n.Turn},function(n){o=n.AnimationHandler},function(n){a=n.BaseTurn}],execute:function(){i._RF.push({},"517aeOebrlEc5HpaDQzdL6d","MatchTurn",void 0);n("MatchTurn",function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var a=i.prototype;return a.onEnter=function(){var n=this;for(console.log("match"),this.game.stopHint();this.game.matchPair.length>0;)this.game.match();Promise.all(o.animTile).then((function(){Promise.all(o.animList).then((function(){n.game.switchTurn(e.END)}))}))},a.onExit=function(){},a.onUpdate=function(){},i}(a));i._RF.pop()}}}));

System.register("bundle://main/_virtual/Nope.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,s,r,c,a,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.Node,a=t.Label,l=t.Vec3,u=t.Component}],execute:function(){var h,p,d,f,v,b,y,g,w;s._RF.push({},"f8b12GCjO5CWaAFHw+gNiYe","Nope",void 0);var m=r.ccclass,N=r.property;t("Nope",(h=m("Nope"),p=N(c),d=N(c),f=N(a),h((y=e((b=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).used=!1,n(e,"dot",y,o(e)),n(e,"cross",g,o(e)),n(e,"x",w,o(e)),e}i(e,t);var s=e.prototype;return s.putAt=function(t){this.node.setPosition(t),this.dot.active=!1,this.cross.active=!0,this.scheduleOnce(this.kill,.5)},s.putX=function(t,e){this.node.setPosition(t),this.x.string=""+e,this.dot.active=!0,this.cross.active=!1,this.scheduleOnce(this.kill,.5)},s.isUsed=function(){return this.used},s.reSpawn=function(){this.node.setScale(.5,.5),this.used=!0,this.node.active=!0,this.cross.active=!0,this.dot.active=!0},s.kill=function(){this.node.scale=new l(.5,.5,1),this.used=!1,this.node.active=!1,this.cross.active=!1,this.dot.active=!1},e}(u)).prototype,"dot",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(b.prototype,"cross",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(b.prototype,"x",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));s._RF.pop()}}}));

System.register("bundle://main/_virtual/NopePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Nope.ts"],(function(e){var t,i,r,n,o,l,a,u,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,u=e.Prefab,s=e.instantiate,c=e.Component},function(e){p=e.Nope}],execute:function(){var f,d,h,b,v,m,g;l._RF.push({},"49adcOjOvxBqY7zZ4I6eqbE","NopePool",void 0);var y=a.ccclass,P=a.property;e("default",(f=y("NopePool"),d=P(u),h=P(Number),f((m=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"pathPrefab",m,n(t)),r(t,"size",g,n(t)),t.itemList=[],t}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=s(this.pathPrefab);i&&(console.log("added child"),e.node.addChild(i),i.setSiblingIndex(999999)),this.itemList.push(null==i?void 0:i.getComponent(p))}this.returnAll()},l.getFirstItem=function(){for(var e,t=o(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i.node.setSiblingIndex(999999),i}return null},l.returnPool=function(e){e.kill()},l.returnMultiple=function(e){for(var t,i=o(e);!(t=i()).done;){t.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(c)).prototype,"pathPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(v.prototype,"size",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=v))||b));l._RF.pop()}}}));

System.register("bundle://main/_virtual/Path.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,i,a,l,r,s,c,h;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Sprite,a=t.Vec3,l=t.Color,r=t.tween,s=t.Tween,c=t.Vec2,h=t.Component}],execute:function(){var d;o._RF.push({},"acc89i+H69Gj4VYQHePnuuj","Path",void 0);var u=n.ccclass;n.property,t("Path",u("Path")(d=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).used=!1,e.headCoord=new c,e.tailCoord=new c,e}e(o,t);var n=o.prototype;return n.createPath=function(t,e,o,n){void 0===o&&(o=!0),void 0===n&&(n=.2),this.headCoord=t,this.tailCoord=e,this.updateVisual(this.node,o,n)},n.calcDir=function(){var t=this.tailCoord.clone().subtract(this.headCoord.clone()),e=t.clone().normalize();return{angle:180*Math.atan2(e.y,e.x)/Math.PI,length:t.length()}},n.updateVisual=function(t,e,o){var n=this;void 0===e&&(e=!0),void 0===o&&(o=.2),this.node.setSiblingIndex(2e3);var s=t.getChildByName("Path"),c=s.getComponent(i),h=this.calcDir(),d=h.angle,u=h.length;t.angle=d-90,t.setPosition(this.headCoord.x,this.headCoord.y),console.log("length: ",u),s.setScale(new a(u/36,1)),c.color=new l(255,255,255,255),e&&r(c).delay(.1).to(o,{color:new l(255,255,255,0)}).call((function(){c.color=new l(255,255,255,255),n.kill()})).start()},n.isUsed=function(){return this.used},n.reSpawn=function(){this.used=!0,this.node.active=!0},n.kill=function(){this.used=!1;var t=this.node.getChildByName("Path");if(null!=t&&t.isValid){var e=t.getComponent(i);null!=e&&e.isValid&&(s.stopAllByTarget(e),e.color=new l(255,255,255,0),this.node.active=!1)}},o}(h))||d);o._RF.pop()}}}));

System.register("bundle://main/_virtual/PathPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Path.ts"],(function(e){var t,i,r,n,o,l,a,u,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,u=e.Prefab,s=e.instantiate,c=e.Component},function(e){p=e.Path}],execute:function(){var f,d,h,b,v,P,m;l._RF.push({},"fb6aed0AFlLFYBJs4psdZpJ","PathPool",void 0);var g=a.ccclass,y=a.property;e("default",(f=g("PathPool"),d=y(u),h=y(Number),f((P=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"pathPrefab",P,n(t)),r(t,"size",m,n(t)),t.itemList=[],t}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=s(this.pathPrefab);i&&(console.log("added child"),e.node.addChild(i),i.setSiblingIndex(999998)),(null==i?void 0:i.getComponent(p)).kill(),this.itemList.push(null==i?void 0:i.getComponent(p))}this.returnAll()},l.getFirstItem=function(){for(var e,t=o(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i.node.setSiblingIndex(999998),i}return null},l.returnPool=function(e){e.kill()},l.returnMultiple=function(e){for(var t,i=o(e);!(t=i()).done;){t.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(c)).prototype,"pathPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(v.prototype,"size",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=v))||b));l._RF.pop()}}}));

System.register("bundle://main/_virtual/PauseTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(e){var n,t,o,u,r,s,a,i,c;return{setters:[function(e){n=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,u=e.Tween,r=e.ParticleSystem2D},function(e){s=e.getAllDescendants,a=e.Popup},function(e){i=e.UImanager},function(e){c=e.BaseTurn}],execute:function(){o._RF.push({},"4917fGp/FdAZ5CjyBwSBrh4","PauseTurn",void 0);e("PauseTurn",function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var c=o.prototype;return c.onEnter=function(){for(var e,n=s(this.game.node),o=t(n);!(e=o()).done;){var c,l=e.value;u.pauseAllByTarget(l),null==(c=l.getComponent(r))||c.stopSystem()}this.game.turnOffInput(),this.game.unChoose(),console.log("Pause"),i.showPopup(a.PAUSEPOPUP,!0,this.game.currentNumber())},c.onExit=function(){},c.onUpdate=function(){},o}(c));o._RF.pop()}}}));

System.register("bundle://main/_virtual/Pulse.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,s,a,c,l,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,c=e.tween,l=e.Vec3,o=e.Component}],execute:function(){var u,f,p,h,b;s._RF.push({},"e0c33H0tlRKgb4xR/17Vv4D","Pulse",void 0);var d=a.ccclass,y=a.property;e("Pulse",d("Pulse")((p=t((f=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(t,"frstscale",p,r(t)),i(t,"scndscale",h,r(t)),i(t,"time",b,r(t)),t}n(t,e);var s=t.prototype;return s.start=function(){this.startPulseEffect()},s.startPulseEffect=function(){c(this.node).to(this.time,{scale:new l(this.frstscale,this.frstscale,1)},{easing:"sineInOut"}).to(this.time,{scale:new l(this.scndscale,this.scndscale,1)},{easing:"sineInOut"}).union().repeatForever().start()},s.update=function(e){},t}(o)).prototype,"frstscale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=t(f.prototype,"scndscale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=t(f.prototype,"time",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=f))||u);s._RF.pop()}}}));

System.register("bundle://main/_virtual/RocketItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts","./SoundManager.ts"],(function(e){var t,n,o,i,a,r,l,s,c,u,g,d,v,h,m,p,f,y,k,S,w,b,C,I,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,c=e.Widget,u=e.Vec3,g=e.view,d=e.resources,v=e.SpriteFrame,h=e.Animation,m=e.Sprite,p=e.ParticleSystem2D,f=e.tween},function(e){y=e.Item,k=e.FIREWORK_PATH,S=e.ROCKET_PATH,w=e.TileType,b=e.SFX,C=e.Turn},function(e){I=e.default},function(e){P=e.SoundManager}],execute:function(){var M,R,F,O,T,E,x;r._RF.push({},"6b0094l8LJMia3bOkZdOrCP","RocketItem",void 0);var B=l.ccclass,N=l.property;e("default",(M=B("RocketItem"),R=N(s),F=N(s),M((E=t((T=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"overlay",E,i(t)),o(t,"rockets",x,i(t)),t.item="useRocket",t}n(t,e);var r=t.prototype;return r.onUse=function(){var t,n,o,i;if(!this.clicked&&0!=this.quantity&&!this.locked){e.prototype.onUse.call(this),console.log(this.node.parent);var r=this.getRandomMatchingPair();if(r){var l=new Set(r),s=this.getRandomMatchingPair(l);if(s){var d=[].concat(r,s);null==(t=this.game)||t.node.addChild(this.overlay),this.overlay.getComponent(c).verticalCenter=-this.game.node.position.y,this.overlay.active=!0,this.overlay.setPosition(new u),g.getVisibleSize().width<g.getVisibleSize().height&&(this.itemManager.botOverlay.active=!0),this.itemManager.botOverlay.setSiblingIndex(this.node.getSiblingIndex()-1),null==(n=this.game)||n.unChoose(),null==(o=this.game)||o.turnOffInput();for(var v,h=a(null==(m=this.game)||null==(m=m.board)?void 0:m.board);!(v=h()).done;)for(var m,p,f=v.value,k=a(f);!(p=k()).done;){p.value.node.setSiblingIndex(1)}for(var S,w=a(d);!(S=w()).done;){S.value.node.setSiblingIndex(this.overlay.getSiblingIndex()+1)}null==(i=this.itemManager)||i.hideExcept(y.ROCKET),this.showRocket(d),console.log("rocket"),this.quantity--,this.textChange()}}}},r.showRocket=function(e){var t=this;this.stopFunction();for(var n=g.getVisibleSize().width/5,o=g.getVisibleSize(),i=d.get(k,v),a=d.get(S,v),r=function(r){var l,s,c,d;t.rockets[r].active=!0;var v=t.rockets[r].getChildByName("Rocket1"),y=null==(l=t.rockets[r].getChildByName("Explosion"))?void 0:l.getComponent(h),k=null==(s=t.rockets[r].getChildByName("break"))?void 0:s.getComponent(h);console.log(k),t.rockets[r].angle=0,v.getComponent(m).spriteFrame=i;var S=t.rockets[r].getChildByName("Rocket1"),w=S?S.getChildByName("RocketDust"):null,I=w?w.getChildByName("whiteSmoke"):null;I.active=!0,null==I||null==(c=I.getComponent(p))||c.resetSystem();var M=w?w.getChildByName("yellow"):null;M.active=!0,null==M||null==(d=M.getComponent(p))||d.resetSystem(),t.rockets[r].setWorldPosition(new u(n*(r+1),-100)),v.active=!0;var R=r>=2?g.getVisibleSize().width+1e3:-1e3,F=t.getAngleBetween(t.rockets[r].worldPosition,new u(R,500));e[r].underKill=!0,t.rockets[r].setScale(.8*e[0].originScale,.8*e[0].originScale),f(t.rockets[r]).to(.5,{worldPosition:new u(n*(r+1),50)}).delay(.2).to(.1+.1*r,{angle:F-25}).call((function(){P.instance.playSFX(b.ROCKET_FLY)})).to(.5,{worldPosition:new u(R,o.height/2)}).delay(.5).call((function(){t.rockets[r].setScale(e[r].originScale,e[r].originScale),v.getComponent(m).spriteFrame=a,I.active=!1,M.active=!1,t.rockets[r].angle=t.getAngleBetween(t.rockets[r].worldPosition,e[r].node.worldPosition),f(t.rockets[r]).to(.1+.09*r,{worldPosition:e[r].node.worldPosition},{easing:"sineOut"}).call((function(){P.instance.playSFX(b.EXPLODE),e[r].wholeSprite.active=!1,e[r].node.setSiblingIndex(1),v.active=!1,k.node.active=!0,k.node.angle=-t.rockets[r].angle,y.node.active=!0,y.node.angle=-t.rockets[r].angle,null==k||k.play(),null==y||y.play(),null==y||y.once(h.EventType.FINISHED,(function(){var n;if(y.node.active=!1,3==r){var o,i;null==(o=t.game)||o.turnOnInput(),null==(i=t.itemManager)||i.showAll(),t.overlay.active=!1,t.itemManager.botOverlay.active=!1;for(var a=0;a<4;a++)e[a].onDead(t.game.board,a%2==0,a%2==0?e[a+1]:e[a-1],!0),e[a].kill()}null==(n=t.game)||n.switchTurn(C.MATCH)})),null==k||k.once(h.EventType.FINISHED,(function(){k.node.active=!1,t.enableFunction()}))})).start()})).start()},l=0;l<e.length;l++)r(l)},r.getAngleBetween=function(e,t){var n=t.x-e.x,o=t.y-e.y;return 180*Math.atan2(o,n)/Math.PI-90+25},r.getRandomMatchingPair=function(e){var t;void 0===e&&(e=new Set);var n=null==(t=this.game)||null==(t=t.board)?void 0:t.board;if(!n)return null;for(var o,i=new Map,r=a(n);!(o=r()).done;)for(var l,s=o.value,c=a(s);!(l=c()).done;){var u=l.value,g=u;if(!e.has(g)){var d=u.getTypeID();d!==w.NONE&&(i.has(d)||i.set(d,[]),i.get(d).push(g))}}var v=Array.from(i.values()).filter((function(e){return e.length>=2}));if(0===v.length)return null;var h=v[Math.floor(Math.random()*v.length)].slice().sort((function(){return Math.random()-.5}));return[h[0],h[1]]},t}(I)).prototype,"overlay",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(T.prototype,"rockets",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=T))||O));r._RF.pop()}}}));

System.register("bundle://main/_virtual/RocketSubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./GameManager.ts","./BaseSubTile.ts","./SoundManager.ts"],(function(e){var t,n,i,o,l,r,a,c,u,s,p,d,v,g,h,k,f,m,S,y,b,w,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,u=e.Sprite,s=e.Animation,p=e.ParticleSystem2D,d=e.tween,v=e.Vec3},function(e){g=e.TileType,h=e.getTilePositionByLevel,k=e.Item,f=e.SFX,m=e.backInSlowEnd,S=e.Turn},function(e){y=e.AnimationHandler},function(e){b=e.default},function(e){w=e.BaseSubTile},function(e){T=e.SoundManager}],execute:function(){var A,x,B,C,I,E,P,M,D,F,H,z,R,L,N,O,K;r._RF.push({},"83479iP3vZCo72QyCNS0T0K","RocketSubTile",void 0);var _=a.ccclass,X=a.property;e("RocketSubTile",(A=_("RocketSubTile"),x=X(c),B=X(u),C=X(u),I=X(s),E=X(s),P=X(s),M=X(s),A((H=t((F=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,i(t,"particle",H,o(t)),i(t,"rocket1",z,o(t)),i(t,"rocket2",R,o(t)),i(t,"exploAnim",L,o(t)),i(t,"exploAnim2",N,o(t)),i(t,"tileBreak",O,o(t)),i(t,"tileBreak1",K,o(t)),t}n(t,e);var r=t.prototype;return r.onAttach=function(t){var n,i,o;e.prototype.onAttach.call(this,t),this.particle.active=!0,null==(n=this.tile)||n.wholeSprite.addChild(this.particle),null==(i=this.particle)||null==(i=i.getComponent(p))||i.resetSystem(),console.log(null==(o=this.tile)?void 0:o.node.position)},r.kill=function(){this.rocket1.node.active=!1,this.rocket1.node.active=!1,this.particle.active=!1,this.rocket2.node.active=!1,e.prototype.kill.call(this)},r.onDead=function(e,t,n){var i,o,r,a,c=this;if(this.kill(),null==(i=this.tile)||i.node.removeChild(this.particle),this.particle.active=!1,this.tile&&t&&n&&n.tile){for(var u,p=new Map,w=l(e.board);!(u=w()).done;)for(var A,x=u.value,B=l(x);!(A=B()).done;){var C=A.value,I=C.getTypeID();I===g.NONE||C.underKill||C===this.tile||C===n.tile||(p.has(I)||p.set(I,[]),p.get(I).push(C))}var E=Array.from(p.entries()).filter((function(e){e[0];return e[1].length>=2}));if(0!==E.length){var P=E[Math.floor(Math.random()*E.length)],M=P[0],D=P[1].sort((function(){return Math.random()-.5})).slice(0,2);D[0].underKill=!0,D[1].underKill=!0;var F=null==(o=this.node.parent)?void 0:o.getComponent(b);console.log("explode random 2 tiles of type:",M),this.rocket1.node.active=!0,this.rocket2.node.active=!0;var H=this.tile.node.position,z=n.tile.node.position,R=h(D[0].getCoordinate().x,D[0].getCoordinate().y,F.currentLevel,1).toVec3(),L=h(D[1].getCoordinate().x,D[1].getCoordinate().y,F.currentLevel,1).toVec3();if(null==(r=this.rocket1)||r.node.setPosition(H),null==(a=this.rocket2)||a.node.setPosition(z),D&&D.length>=2&&this.rocket1&&this.rocket2){var N;null==(N=this.node.parent)||N.getComponent(b).itemManager.lockItem(k.ROCKET);var O=V(H,R),K=V(z,L);T.instance.playSFX(f.ROCKET_FLY),y.animTile.push(new Promise((function(t){var n,i;d(c.rocket1.node).to(.2,{scale:new v(null==(n=c.tile)?void 0:n.originScale,null==(i=c.tile)?void 0:i.originScale),angle:O},{easing:"sineOut"}).to(.6,{position:R},{easing:m}).call((function(){var n,i,o,l,r,a;T.instance.playSFX(f.EXPLODE),D[0].wholeSprite.active=!1,c.tileBreak.node.setScale(new v(D[0].originScale,D[0].originScale)),c.exploAnim.node.setScale(new v(D[0].originScale,D[0].originScale)),c.rocket1.node.active=!1,c.rocket1.node.setScale(new v(1,1,1)),c.rocket1.node.angle=0,c.exploAnim.node.setPosition(null==(n=c.rocket1)?void 0:n.node.position),c.exploAnim.node.active=!0,null==(i=c.exploAnim)||i.play(),c.tileBreak.node.setPosition(null==(o=c.rocket1)?void 0:o.node.position),c.tileBreak.node.active=!0,null==(l=c.tileBreak)||l.play(),null==(r=c.tileBreak)||r.once(s.EventType.FINISHED,(function(){var t;c.tileBreak.node.active=!1,D[0].onDead(e,!0,D[1],!0),D[0].kill(),null==(t=c.node.parent)||t.getComponent(b).itemManager.unlockItem(k.ROCKET)})),null==(a=c.exploAnim)||a.once(s.EventType.FINISHED,(function(){var e;c.exploAnim.node.active=!1,null==(e=c.node.parent)||null==(e=e.getComponent(b))||e.switchTurn(S.MATCH)})),t()})).start()}))),y.animTile.push(new Promise((function(t){var n,i;d(c.rocket2.node).to(.2,{scale:new v(null==(n=c.tile)?void 0:n.originScale,null==(i=c.tile)?void 0:i.originScale),angle:K},{easing:"sineOut"}).to(.6,{position:L},{easing:m}).call((function(){var n,i,o,l,r,a;D[1].wholeSprite.active=!1,c.exploAnim2.node.setScale(new v(D[1].originScale,D[1].originScale)),c.tileBreak1.node.setScale(new v(D[1].originScale,D[1].originScale)),c.rocket2.node.active=!1,c.rocket2.node.setScale(new v(1,1,1)),c.rocket2.node.angle=0,c.exploAnim2.node.setPosition(null==(n=c.rocket2)?void 0:n.node.position),c.exploAnim2.node.active=!0,null==(i=c.exploAnim2)||i.play(),c.tileBreak1.node.setPosition(null==(o=c.rocket2)?void 0:o.node.position),c.tileBreak1.node.active=!0,null==(l=c.tileBreak1)||l.play(),null==(r=c.tileBreak1)||r.once(s.EventType.FINISHED,(function(){var t;c.tileBreak1.node.active=!1,D[1].onDead(e,!1,D[0],!0),D[1].kill(),null==(t=c.node.parent)||null==(t=t.getComponent(b))||t.switchTurn(S.MATCH)})),null==(a=c.exploAnim2)||a.once(s.EventType.FINISHED,(function(){console.log("2"),c.exploAnim2.node.active=!1})),t()})).start()})))}}}},t}(w)).prototype,"particle",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(F.prototype,"rocket1",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(F.prototype,"rocket2",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"exploAnim",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(F.prototype,"exploAnim2",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(F.prototype,"tileBreak",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(F.prototype,"tileBreak1",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=F))||D));function V(e,t){var n=t.x-e.x,i=t.y-e.y;return 180*Math.atan2(i,n)/Math.PI-90}r._RF.pop()}}}));

System.register("bundle://main/_virtual/RocketTutorial.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,e,n,a,c,s,l,p,r,h;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,s=t.Node,l=t.Vec3,p=t.UIOpacity,r=t.tween,h=t.Component}],execute:function(){var u,k,R,f,m,w,g,y,d;a._RF.push({},"6d063jmQERDXawqphEHWftM","RocketTutorial",void 0);var x=c.ccclass,b=c.property;t("RocketTutorial",(u=x("RocketTutorial"),k=b(s),R=b(s),f=b([s]),u((g=o((w=function(t){function o(){for(var o,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=t.call.apply(t,[this].concat(a))||this,e(o,"topRocket",g,n(o)),e(o,"BotRocket",y,n(o)),e(o,"listTile",d,n(o)),o.topRocketInitialPos=new l,o.botRocketInitialPos=new l,o.topRocketInitialAngle=0,o.botRocketInitialAngle=0,o.initialOpacities=[],o.animationCompleteCount=0,o}i(o,t);var a=o.prototype;return a.start=function(){var t=this;this.topRocket&&(this.topRocketInitialPos=this.topRocket.position.clone(),this.topRocketInitialAngle=this.topRocket.angle),this.BotRocket&&(this.botRocketInitialPos=this.BotRocket.position.clone(),this.botRocketInitialAngle=this.BotRocket.angle),this.listTile.forEach((function(o){var i=o.getComponent(p);t.initialOpacities.push(i?i.opacity:255)})),this.startAnimation()},a.startAnimation=function(){this.topAnim(),this.botAnim()},a.resetAndLoop=function(){var t=this;this.topRocket&&(this.topRocket.position=this.topRocketInitialPos.clone(),this.topRocket.angle=this.topRocketInitialAngle),this.BotRocket&&(this.BotRocket.position=this.botRocketInitialPos.clone(),this.BotRocket.angle=this.botRocketInitialAngle),this.listTile.forEach((function(o,i){var e=o.getComponent(p);e&&(e.opacity=t.initialOpacities[i]||255)})),this.scheduleOnce((function(){t.startAnimation()}),1)},a.topAnim=function(){var t=this,o=this.topRocket.position,i=this.listTile[1].position,e=(this.topRocket.angle,new l(o.x+.3*(i.x-o.x),o.y+120,0)),n=new l(o.x+.7*(i.x-o.x),i.y+90,0);r({t:0}).to(.85,{t:1},{onUpdate:function(a){if(a){var c=a.t,s=Math.pow(1-c,3)*o.x+3*Math.pow(1-c,2)*c*e.x+3*(1-c)*Math.pow(c,2)*n.x+Math.pow(c,3)*i.x,p=Math.pow(1-c,3)*o.y+3*Math.pow(1-c,2)*c*e.y+3*(1-c)*Math.pow(c,2)*n.y+Math.pow(c,3)*i.y,r=new l(s,p,0);t.topRocket.position=new l(r);var h=-155*c;t.topRocket.angle=h}}}).call((function(){t.fade(t.listTile[1].getComponent(p)),t.checkAnimationComplete()})).start(),this.fade(this.listTile[0].getComponent(p))},a.botAnim=function(){var t=this,o=this.BotRocket.position,i=this.listTile[3].position,e=(this.BotRocket.angle,new l(o.x+.3*(i.x-o.x),o.y-120,0)),n=new l(o.x+.7*(i.x-o.x),i.y-90,0);this.BotRocket.angle=-155,r({t:0}).to(.85,{t:1},{onUpdate:function(a){if(a){var c=a.t,s=Math.pow(1-c,3)*o.x+3*Math.pow(1-c,2)*c*e.x+3*(1-c)*Math.pow(c,2)*n.x+Math.pow(c,3)*i.x,p=Math.pow(1-c,3)*o.y+3*Math.pow(1-c,2)*c*e.y+3*(1-c)*Math.pow(c,2)*n.y+Math.pow(c,3)*i.y,r=new l(s,p,0);t.BotRocket.position=new l(r);var h=25*c;t.BotRocket.angle=h}}}).call((function(){t.fade(t.listTile[3].getComponent(p)),t.checkAnimationComplete()})).start(),this.fade(this.listTile[2].getComponent(p))},a.checkAnimationComplete=function(){var t=this;this.animationCompleteCount++,this.animationCompleteCount>=2&&(this.animationCompleteCount=0,this.scheduleOnce((function(){t.resetAndLoop()}),.7))},a.fade=function(t){r(t).to(.6,{opacity:0},{easing:"quadOut"}).start()},a.update=function(t){},o}(h)).prototype,"topRocket",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=o(w.prototype,"BotRocket",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=o(w.prototype,"listTile",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=w))||m));a._RF.pop()}}}));

System.register("bundle://main/_virtual/rollupPluginModLoBabelHelpers.js",[],(function(t){return{execute:function(){function r(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function e(r,n){return(e=t("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t}))(r,n)}function n(t,r){if(t){if("string"==typeof t)return o(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,r):void 0}}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}t({applyDecoratedDescriptor:function(t,r,e,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=e.slice().reverse().reduce((function(e,n){return n(t,r,e)||e}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,r,i),i=null);return i},arrayLikeToArray:o,assertThisInitialized:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},asyncToGenerator:function(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var a=t.apply(e,n);function c(t){r(a,o,i,c,u,"next",t)}function u(t){r(a,o,i,c,u,"throw",t)}c(void 0)}))}},createForOfIteratorHelperLoose:function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=n(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},inheritsLoose:function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,e(t,r)},initializerDefineProperty:function(t,r,e,n){if(!e)return;Object.defineProperty(t,r,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(n):void 0})},regeneratorRuntime:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("regeneratorRuntime",(function(){return e}));var r,e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(r){f=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof g?r:g,a=Object.create(o.prototype),c=new k(n||[]);return i(a,"_invoke",{value:_(t,e,c)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};f(w,c,(function(){return this}));var L=Object.getPrototypeOf,x=L&&L(L(z([])));x&&x!==n&&o.call(x,c)&&(w=x);var O=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function j(t,r){function e(n,i,a,c){var u=h(t[n],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&o.call(f,"__await")?r.resolve(f.__await).then((function(t){e("next",t,a,c)}),(function(t){e("throw",t,a,c)})):r.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return e("throw",t,a,c)}))}c(u.arg)}var n;i(this,"_invoke",{value:function(t,o){function i(){return new r((function(r,n){e(t,o,r,n)}))}return n=n?n.then(i,i):i()}})}function _(t,e,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=h(t,e,n);if("normal"===l.type){if(o=n.done?v:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function P(t,e){var n=e.method,o=t.iterator[n];if(o===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,P(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function T(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function z(t){if(t||""===t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return m.prototype=b,i(O,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=f(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(j.prototype),f(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(O),f(O,l,"Generator"),f(O,c,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=z,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),T(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;T(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:z(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}},e},setPrototypeOf:e,unsupportedIterableToArray:n})}}}));

System.register("bundle://main/_virtual/Rotate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,r,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,n=t.tween,a=t.Component}],execute:function(){var i;o._RF.push({},"48be9MUFW9F46I/P/pHk7MG","Rotate",void 0);var c=r.ccclass;r.property,t("Rotate",c("Rotate")(i=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var r=o.prototype;return r.start=function(){this.rotate()},r.rotate=function(){n(this.node).by(1.5,{angle:360}).repeatForever().start()},o}(a))||i);o._RF.pop()}}}));

System.register("bundle://main/_virtual/RotateStar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.tween,a=t.Vec3,s=t.Component}],execute:function(){var c;n._RF.push({},"619d7FYvcVN0b+/E8HeIEFB","RotateStar",void 0);var i=o.ccclass;o.property,t("RotateStar",i("RotateStar")(c=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){},o.rotateLoop=function(){r(this.node).parallel(r().to(.2,{angle:4}).to(1,{angle:-4}).to(.5,{angle:0}),r().to(.2,{scale:new a(1.1,1.1,1)},{easing:"sineInOut"}).to(.2,{scale:new a(1.2,1.2,1)},{easing:"sineInOut"})).repeatForever().start()},n}(s))||c);n._RF.pop()}}}));

System.register("bundle://main/_virtual/Sand.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.tween,a=t.Component}],execute:function(){var i;n._RF.push({},"13955tJWsxLsLQhgQ3zAeZZ","Sand",void 0);var s=r.ccclass;r.property,t("Sand",s("Sand")(i=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){this.rotate()},r.rotate=function(){var t=this;o(this.node).repeatForever(o().to(.5,{angle:180}).delay(.3).call((function(){return t.node.angle=0})).delay(.2)).start()},n}(a))||i);n._RF.pop()}}}));

System.register("bundle://main/_virtual/ShuffleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseItem.ts"],(function(t){var e,i,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator},function(t){o=t.default}],execute:function(){var s;i._RF.push({},"438ffQp8BhHubr0sDJ7hdL0","ShuffleItem",void 0);var r=n.ccclass;n.property,t("ShuffleItem",r("ShuffleItem")(s=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).item="useShuffle",e}return e(i,t),i.prototype.onUse=function(){var e;this.clicked||this.locked||this.clicked||this.locked||(t.prototype.onUse.call(this),(null==(e=this.game)?void 0:e.board).shuffle(),this.quantity>0&&(this.quantity-=1,this.textChange()))},i}(o))||s);i._RF.pop()}}}));

System.register("bundle://main/_virtual/ShuffleLevel.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"c215bmfg1lHvYYueRESS7r2","ShuffleLevel",void 0),e._RF.pop()}}}));

System.register("bundle://main/_virtual/ShuffleLevel2.ts",["cc","./global.ts","./GravityManager.ts"],(function(t){var i,r,e,n;return{setters:[function(t){i=t.cclegacy},function(t){r=t.Direction,e=t.SubType},function(t){n=t.GravityManager}],execute:function(){i._RF.push({},"f7407cbz29Dxrai4GTJytW0","ShuffleLevel",void 0);t("ShuffleLevel",function(){function t(t){this.gridHeight=void 0,this.gridWidth=void 0,this.data=void 0,this.RocketTile=void 0,this.difficulty=void 0,this.Timer=void 0,this.grid=[],this.layerList=new Map,this.gridHeight=t.GridHeight,this.gridWidth=t.GridWidth,this.RocketTile=t.Tiles.RocketTiles,this.difficulty=t.Difficulty,this.Timer=t.Time,this.data=t}var i=t.prototype;return i.changeLevel=function(t){this.gridHeight=t.GridHeight,this.gridWidth=t.GridWidth,this.RocketTile=t.Tiles.RocketTiles,this.difficulty=t.Difficulty,this.Timer=t.Time,this.data=t},i.shuffle=function(){var t=this;this.grid=Array(this.gridHeight).fill(null).map((function(){return Array(t.gridWidth).fill(-1)}));var i=[];Object.entries(this.data.Tiles.NormalTiles).forEach((function(t){for(var r=t[0],e=t[1],n=Math.floor(Number(e)/2),s=0;s<n;s++)i.push({tileId:parseInt(r),positions:[]})}));for(var r=Math.floor(this.RocketTile/2),e=0;e<r;e++)i.push({tileId:8,positions:[]});for(var n=this.shuffleArray([].concat(i)),s=n.length,h=Math.floor(2*s/3),a=this.getAllPositions(),o=[].concat(a),f=function(){var i=n[l],r=t.getStrategicPositions(o,t.difficulty);i.positions=r,r.forEach((function(r){t.grid[r.y][r.x]=i.tileId;var e=o.findIndex((function(t){return t.x===r.x&&t.y===r.y}));e>-1&&o.splice(e,1)}))},l=0;l<h;l++)f();for(var c=h;c<s;c++){for(var d=n[c],u=[],g=0;g<2&&o.length>0;g++){var y=Math.floor(Math.random()*o.length),v=o.splice(y,1)[0];u.push(v),this.grid[v.y][v.x]=d.tileId}d.positions=u}return this.grid},i.getStrategicPositions=function(t,i){return t.length<2?t.splice(0,2):i<=1?this.getNearbyPositions(t):this.getDistantPositions(t)},i.getNearbyPositions=function(t){for(var i=[],r=1/0,e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++){var s=t[e],h=t[n],a=this.calculateDistance(s,h);a<r&&(r=a,i=[s,h])}return i.forEach((function(i){var r=t.findIndex((function(t){return t.x===i.x&&t.y===i.y}));r>-1&&t.splice(r,1)})),2===i.length?i:this.getRandomPositions(t,2)},i.getDistantPositions=function(t){for(var i=[],r=0,e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++){var s=t[e],h=t[n],a=this.calculateDistance(s,h);a>r&&(r=a,i=[s,h])}return i.forEach((function(i){var r=t.findIndex((function(t){return t.x===i.x&&t.y===i.y}));r>-1&&t.splice(r,1)})),2===i.length?i:this.getRandomPositions(t,2)},i.calculateDistance=function(t,i){return Math.abs(t.x-i.x)+Math.abs(t.y-i.y)},i.getRandomPositions=function(t,i){for(var r=[],e=0;e<i&&t.length>0;e++){var n=Math.floor(Math.random()*t.length);r.push(t.splice(n,1)[0])}return r},i.isEasyEnough=function(){for(var t=0,i=0;i<this.gridHeight;i++)for(var r=0;r<this.gridWidth;r++)-1!==this.grid[i][r]&&(r<this.gridWidth-1&&this.grid[i][r]===this.grid[i][r+1]&&t++,i<this.gridHeight-1&&this.grid[i][r]===this.grid[i+1][r]&&t++);return this.difficulty<=2?t>=8:this.difficulty<=3.5?t>=4&&t<=8:t<=3},i.generateMap=function(){return this.shuffle()},i.shuffleArray=function(t){for(var i=[].concat(t),r=i.length-1;r>0;r--){var e=Math.floor(Math.random()*(r+1)),n=[i[e],i[r]];i[r]=n[0],i[e]=n[1]}return i},i.getAllPositions=function(){for(var t=[],i=0;i<this.gridHeight;i++)for(var r=0;r<this.gridWidth;r++)t.push({x:r,y:i});return t},i.checkDirection=function(){switch(this.data.Gravity){case 0:return r.NONE;case 1:return r.LEFT;case 2:return r.RIGHT;case 3:return r.UP;case 4:return r.DOWN;default:return r.NONE}},i.getMapLayer=function(t){for(var i=this,r=Array.from({length:this.gridHeight},(function(){return Array(i.gridWidth).fill(0)})),s=Array.from({length:this.gridHeight},(function(){return Array(i.gridWidth).fill(0)})),h=Array.from({length:this.gridHeight},(function(){return Array(i.gridWidth).fill(0)})),a=[],o=0;o<this.gridHeight;o++)for(var f=0;f<this.gridWidth;f++)n.setCircle(this.data.Circle),this.data.Gravity&&(h[o][f]=1),8==t[o][f]?r[o][f]=1:(r[o][f]=0,a.push({x:f,y:o}));console.log(this.checkDirection()),n.changeGravity(this.checkDirection());for(var l=this.data.Tiles.BombEffects,c=0;c<l;c++){var d=Math.floor(Math.random()*a.length),u=a.splice(d,1)[0],g=u.x;s[u.y][g]=1}if(this.layerList.set(e.ROCKET,r),this.layerList.set(e.BOOM,s),this.layerList.set(e.GRAVITY,h),"BUTTERFLY"==this.data.Theme.toUpperCase()){var y=Array.from({length:this.gridHeight},(function(){return Array(i.gridWidth).fill(1)}));this.layerList.set(e.BUTTERFLY,y)}return this.layerList},i.getGrid=function(){return this.grid},t}());i._RF.pop()}}}));

System.register("bundle://main/_virtual/SoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts"],(function(n){var t,e,o,i,a,r,s,u,c,l,d,p,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.AudioClip,u=n.director,c=n.resources,l=n.Node,d=n.AudioSource,p=n.Component},function(n){f=n.SFX}],execute:function(){var h,g,v,y,M,S;a._RF.push({},"87c02nmM8FG6bkLfKHe+tjw","SoundManager",void 0);var b=r.ccclass,w=r.property;n("SoundManager",(h=b("SoundManager"),g=w({type:[s]}),h(((S=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,o(t,"audioClips",M,i(t)),t.soundOn=!0,t.musicOn=!0,t.vibrateOn=!0,t.sfxMap=new Map,t.loaded=!1,t}e(t,n);var a=t.prototype;return a.start=function(){t.instance?this.destroy():(t.instance=this,u.addPersistRootNode(this.node),this.setUpAudio())},a.setUpAudio=function(){var n=this,t=Object.values(f).filter((function(n){return"string"==typeof n})),e=0;t.forEach((function(o){c.load("sfx/"+o,s,(function(i,a){if(!i&&a){var r=new l("Audio_"+o);r.parent=n.node;var s=r.addComponent(d);s.clip=a,s.playOnAwake=!1,n.sfxMap.set(o,s)}++e===t.length&&(n.loaded=!0)}))}))},a.playSFX=function(n){var t;this.soundOn&&(this.loaded?null==(t=this.sfxMap.get(n))||t.play():console.warn("SFX chưa load xong: "+n))},a.stopSFX=function(n){var t;this.loaded?null==(t=this.sfxMap.get(n))||t.stop():console.warn("SFX chưa load xong: "+n)},t}(p)).instance=void 0,M=t((y=S).prototype,"audioClips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=y))||v));a._RF.pop()}}}));

System.register("bundle://main/_virtual/Star.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./SoundManager.ts"],(function(t){var e,i,n,a,o,r,l,s,c,u,h,d,p,f,v,w,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Sprite,s=t.Node,c=t.tween,u=t.Vec3,h=t.Tween,d=t.ParticleSystem2D,p=t.Component},function(t){f=t.backInSlowEnd,v=t.SFX},function(t){w=t.AnimationHandler},function(t){y=t.SoundManager}],execute:function(){var m,g,S,b,P,x,M,A,B,z,C,L,T;o._RF.push({},"33b93Zd5mNJZ4pCIbu6p1BS","Star",void 0);var k=r.ccclass,F=r.property;t("Star",(m=k("Star"),g=F(l),S=F(l),b=F(s),P=F(s),x=F(s),m((B=e((A=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).used=!1,n(e,"circle",B,a(e)),n(e,"star",z,a(e)),n(e,"match",C,a(e)),n(e,"trail",L,a(e)),n(e,"death",T,a(e)),e}i(e,t);var o=e.prototype;return o.putAt=function(t,e){var i,n=this;void 0===e&&(e=0),this.node.setPosition(t),this.star.node.active=!0,this.circle.node.active=!1;var a=null==(i=w.fillProgressBar)?void 0:i.currentStar;if(a){var o=a.getWorldPosition();w.animList.push(new Promise((function(t){c(n.node).delay(.15+.1*(e+1)).call((function(){n.follow()})).to(1.36-.1*(e+1),{worldPosition:o,scale:new u(2,2,1)},{easing:f}).call((function(){n.used&&w.callProgress(),n.trail.active=!1})).delay(.1).call((function(){n.explode()})).delay(.5).call((function(){n.kill(),t()})).start()})))}},o.putAtForHint=function(t){this.star.node.active=!1,this.node.setPosition(t),this.circle.node.active=!0},o.isUsed=function(){return this.used},o.reSpawn=function(){this.node.setScale(1.5,1.5),this.used=!0,this.node.active=!0},o.kill=function(){h.stopAllByTarget(this.node),h.stopAllByTarget(this.star),h.stopAllByTarget(this.circle),this.used=!1,this.death.active=!1,this.trail.active=!1,this.node.scale=new u(1,1,1),this.star.node.active=!1,this.match.active=!1,this.circle.node.active=!1,this.trail.active=!1,this.node.active=!1},o.firstAndLastMatch=function(){var t;this.used&&(this.match.active=!0,null==(t=this.match)||null==(t=t.getComponent(d))||t.resetSystem())},o.explode=function(){var t,e;this.death.active=!0,this.star.node.active=!1,null==(t=this.death)||null==(t=t.getComponent(d))||t.resetSystem(),null==(e=w.fillProgressBar)||e.checkActive()},o.follow=function(){var t;this.trail.active=!0,null==(t=this.trail)||null==(t=t.getComponent(d))||t.resetSystem()},o.winPut=function(t){var e,i=this;this.star.node.active=!0,this.circle.node.active=!1,this.node.setWorldPosition(t),this.follow();var n=null==(e=w.fillProgressBar)?void 0:e.currentStar;if(n){var a=n.getWorldPosition(),o=t,r=a,l=new u(o.x+.3*(r.x-o.x),o.y-80,0),s=new u(o.x+.7*(r.x-o.x),r.y-60,0);w.animList.push(new Promise((function(t){c({t:0}).to(.7,{t:1},{onUpdate:function(t){if(t){var e=t.t,n=Math.pow(1-e,3)*o.x+3*Math.pow(1-e,2)*e*l.x+3*(1-e)*Math.pow(e,2)*s.x+Math.pow(e,3)*r.x,a=Math.pow(1-e,3)*o.y+3*Math.pow(1-e,2)*e*l.y+3*(1-e)*Math.pow(e,2)*s.y+Math.pow(e,3)*r.y,c=new u(n,a,0);i.node.setWorldPosition(c);var h=1+e;i.node.setScale(h,h,1)}},easing:"quadOut"}).call((function(){y.instance.playSFX(v.COLLECT_STAR),i.kill(),t()})).start()})))}},e}(p)).prototype,"circle",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(A.prototype,"star",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(A.prototype,"match",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(A.prototype,"trail",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(A.prototype,"death",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=A))||M));o._RF.pop()}}}));

System.register("bundle://main/_virtual/StarPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Star.ts"],(function(t){var e,r,i,n,o,l,a,u,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,a=t._decorator,u=t.Prefab,s=t.instantiate,c=t.Component},function(t){p=t.Star}],execute:function(){var f,d,h,b,v,m,g;l._RF.push({},"56628dzOJROhJhl1rXXnlo8","StarPool",void 0);var y=a.ccclass,P=a.property;t("default",(f=y("StarPool"),d=P(u),h=P(Number),f((m=e((v=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"pathPrefab",m,n(e)),i(e,"size",g,n(e)),e.itemList=[],e}r(e,t);var l=e.prototype;return l.initialize=function(t){for(var e=0;e<this.size;e++){var r=s(this.pathPrefab);r&&(console.log("added child"),t.node.addChild(r),r.setSiblingIndex(999999)),this.itemList.push(null==r?void 0:r.getComponent(p))}this.returnAll()},l.getFirstItem=function(){for(var t,e=o(this.itemList);!(t=e()).done;){var r=t.value;if(!r.isUsed())return r.reSpawn(),r.node.setSiblingIndex(999999),r}return null},l.returnPool=function(t){t.kill()},l.returnMultiple=function(t){for(var e,r=o(t);!(e=r()).done;){e.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},e}(c)).prototype,"pathPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(v.prototype,"size",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=v))||b));l._RF.pop()}}}));

System.register("bundle://main/_virtual/StartTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseTurn.ts"],(function(t){var n,e,i,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.Turn},function(t){r=t.BaseTurn}],execute:function(){e._RF.push({},"8446640he9A4aLCzzhPV5qN","StartTurn",void 0);t("StartTurn",function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.onEnter=function(){this.game.isWin()?this.game.switchTurn(i.LOAD):this.game.matchPair.length>0?this.game.switchTurn(i.MATCH):this.game.showItem()},r.onExit=function(){},e}(r));e._RF.pop()}}}));

System.register("bundle://main/_virtual/SubTilePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSubTile.ts"],(function(e){var t,i,r,n,o,l,u,a,s,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,u=e._decorator,a=e.Prefab,s=e.instantiate,c=e.Component},function(e){f=e.BaseSubTile}],execute:function(){var p,d,b,v,h;l._RF.push({},"6abaecMCXJMGaMNASv2EoDQ","SubTilePool",void 0);var m=u.ccclass,P=u.property;e("default",(p=m("SubTilePool"),d=P(a),p((h=t((v=function(e){function t(t){var i;return i=e.call(this)||this,r(i,"subTilePrefab",h,n(i)),i.size=70,i.itemList=[],i}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=s(this.subTilePrefab);i&&(console.log("added child"),e.node.addChild(i)),this.itemList.push(null==i?void 0:i.getComponent(f))}this.returnAll()},l.getFirstItem=function(){for(var e,t=o(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i}return null},l.returnPool=function(e){e.kill()},l.returnMultiple=function(e){for(var t,i=o(e);!(t=i()).done;){t.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(c)).prototype,"subTilePrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));l._RF.pop()}}}));

System.register("bundle://main/_virtual/SubTilePoolManager.ts",["cc"],(function(){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"c891fSXY/dP55IEbIOEqz8m","SubTilePoolManager",void 0),e._RF.pop()}}}));

System.register("bundle://main/_virtual/SuperRocketItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts","./SoundManager.ts"],(function(e){var t,n,o,i,a,r,l,s,c,u,g,d,h,v,f,m,p,y,S,k,w,b,C,I,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,c=e.Vec3,u=e.Widget,g=e.view,d=e.resources,h=e.SpriteFrame,v=e.Animation,f=e.Sprite,m=e.ParticleSystem2D,p=e.tween},function(e){y=e.Item,S=e.FIREWORK_PATH,k=e.ROCKET_PATH,w=e.TileType,b=e.SFX,C=e.Turn},function(e){I=e.default},function(e){P=e.SoundManager}],execute:function(){var R,M,E,F,O,N,T;r._RF.push({},"c0eedNhZqVOJaxyRPVN7ifG","SuperRocketItem",void 0);var x=l.ccclass,B=l.property;e("default",(R=x("SuperRocketItem"),M=B(s),E=B(s),R((N=t((O=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"overlay",N,i(t)),o(t,"rockets",T,i(t)),t.item="useSuperRocket",t}n(t,e);var r=t.prototype;return r.onUse=function(){var t,n,o,i;if(!this.clicked&&0!=this.quantity&&!this.locked){e.prototype.onUse.call(this);var r=new Set,l=this.getRandomMatchingPair(r);if(l){l.forEach((function(e){return r.add(e)}));var s=this.getRandomMatchingPair(r);if(s){s.forEach((function(e){return r.add(e)}));var d=this.getRandomMatchingPair(r);if(d){var h=[].concat(l,s,d);null==(t=this.game)||t.node.addChild(this.overlay),this.overlay.active=!0,this.overlay.setPosition(new c),console.log(this.itemManager.botOverlay),this.overlay.getComponent(u).verticalCenter=-this.game.node.position.y,g.getVisibleSize().width<g.getVisibleSize().height&&(this.itemManager.botOverlay.active=!0),this.itemManager.botOverlay.setSiblingIndex(this.node.getSiblingIndex()-1),null==(n=this.game)||n.unChoose(),null==(o=this.game)||o.turnOffInput();for(var v,f=a(null==(m=this.game)||null==(m=m.board)?void 0:m.board);!(v=f()).done;)for(var m,p,S=v.value,k=a(S);!(p=k()).done;){p.value.node.setSiblingIndex(1)}for(var w,b=a(h);!(w=b()).done;){w.value.node.setSiblingIndex(this.overlay.getSiblingIndex()+1)}null==(i=this.itemManager)||i.hideExcept(y.SUPERROCKET),this.showRocket(h),console.log("rocket"),this.quantity--,this.textChange()}}}}},r.showRocket=function(e){var t=this;this.stopFunction();for(var n=g.getVisibleSize().width/7,o=g.getVisibleSize(),i=d.get(S,h),a=d.get(k,h),r=function(r){var l,s,u,d;t.rockets[r].active=!0;var h=t.rockets[r].getChildByName("Rocket1"),y=null==(l=t.rockets[r].getChildByName("Explosion"))?void 0:l.getComponent(v),S=null==(s=t.rockets[r].getChildByName("break"))?void 0:s.getComponent(v);console.log(y),t.rockets[r].angle=0,h.getComponent(f).spriteFrame=i;var k=t.rockets[r].getChildByName("Rocket1"),w=k?k.getChildByName("RocketDust"):null,I=w?w.getChildByName("whiteSmoke"):null;I.active=!0,null==I||null==(u=I.getComponent(m))||u.resetSystem();var R=w?w.getChildByName("yellow"):null;R.active=!0,null==R||null==(d=R.getComponent(m))||d.resetSystem(),t.rockets[r].setWorldPosition(new c(n*(r+1),-100)),h.active=!0;var M=r>=3?g.getVisibleSize().width+1e3:-1e3,E=t.getAngleBetween(t.rockets[r].worldPosition,new c(M,500));e[r].underKill=!0,t.rockets[r].setScale(.8*e[0].originScale,.8*e[0].originScale),p(t.rockets[r]).to(.5,{worldPosition:new c(n*(r+1),50)}).delay(.2).to(.1+.1*r,{angle:E-25}).call((function(){P.instance.playSFX(b.ROCKET_FLY)})).to(.5,{worldPosition:new c(M,o.height/2)}).delay(.5).call((function(){t.rockets[r].setScale(e[r].originScale,e[r].originScale),h.getComponent(f).spriteFrame=a,t.rockets[r].angle=t.getAngleBetween(t.rockets[r].worldPosition,e[r].node.worldPosition),p(t.rockets[r]).to(.1+.09*r,{worldPosition:e[r].node.worldPosition},{easing:"sineOut"}).call((function(){P.instance.playSFX(b.EXPLODE),e[r].wholeSprite.active=!1,e[r].node.setSiblingIndex(1),h.active=!1,S.node.active=!0,y.node.active=!0,y.node.angle=-t.rockets[r].angle,S.node.active=!0,S.node.angle=-t.rockets[r].angle,null==y||y.play(),null==y||y.once(v.EventType.FINISHED,(function(){var n;if(y.node.active=!1,5==r){var o,i;null==(o=t.game)||o.turnOnInput(),null==(i=t.itemManager)||i.showAll(),t.overlay.active=!1,t.itemManager.botOverlay.active=!1;for(var a=0;a<6;a++)e[a].onDead(t.game.board,a%2==0,a%2==0?e[a+1]:e[a-1],!0),e[a].kill()}null==(n=t.game)||n.switchTurn(C.MATCH)})),null==S||S.play(),null==y||y.once(v.EventType.FINISHED,(function(){S.node.active=!1,t.enableFunction()}))})).start()})).start()},l=0;l<e.length;l++)r(l)},r.getAngleBetween=function(e,t){var n=t.x-e.x,o=t.y-e.y;return 180*Math.atan2(o,n)/Math.PI-90+25},r.getRandomMatchingPair=function(e){var t;void 0===e&&(e=new Set);var n=null==(t=this.game)||null==(t=t.board)?void 0:t.board;if(!n)return null;for(var o,i=new Map,r=a(n);!(o=r()).done;)for(var l,s=o.value,c=a(s);!(l=c()).done;){var u=l.value,g=u;if(!e.has(g)){var d=u.getTypeID();d!==w.NONE&&(i.has(d)||i.set(d,[]),i.get(d).push(g))}}var h=Array.from(i.values()).filter((function(e){return e.length>=2}));if(0===h.length)return null;var v=h[Math.floor(Math.random()*h.length)].slice().sort((function(){return Math.random()-.5}));return[v[0],v[1]]},t}(I)).prototype,"overlay",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(O.prototype,"rockets",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=O))||F));r._RF.pop()}}}));

System.register("bundle://main/_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts"],(function(t){var e,i,n,o,s,l,a,r,h,c,u,p,f,d,g,S,w,y,b,v,T,m,C,k,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,a=t._decorator,r=t.Sprite,h=t.Node,c=t.Animation,u=t.Vec2,p=t.Vec3,f=t.tween,d=t.resources,g=t.SpriteFrame,S=t.Color,w=t.UITransform,y=t.Size,b=t.Component},function(t){v=t.Theme,T=t.TileType,m=t.getTilePath,C=t.SubType,k=t.getTilePositionByLevel},function(t){E=t.AnimationHandler}],execute:function(){var I,D,O,L,A,P,z,G,F,N,H,R,q,x,U,V,_;l._RF.push({},"4fdf9U4ak9Guqei/yF8Luzo","Tile",void 0);var Y=a.ccclass,B=a.property;t("default",(I=Y("Tile"),D=B(r),O=B(r),L=B(h),A=B(h),P=B(h),z=B(h),G=B(c),I((H=e((N=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,n(e,"itemTypeSprite",H,o(e)),n(e,"backGroundSpite",R,o(e)),n(e,"wholeSprite",q,o(e)),n(e,"hintGlow",x,o(e)),n(e,"choosingEffect",U,o(e)),n(e,"rotatedChoosingEff",V,o(e)),n(e,"polishEffect",_,o(e)),e.underKill=!1,e.selfPromise=[],e.originScale=1,e.used=!1,e.theme=v.NONE,e.coordinate=new u,e.typeID=T.NONE,e.hintAnimation=null,e.hintglow=null,e.subTileList=new Map,e.onClickCallbacks=[],e}i(e,t);var l=e.prototype;return l.start=function(){this.node.on(h.EventType.TOUCH_START,this.emitOnClickCallbacks,this)},l.getSubtileList=function(){return this.subTileList},l.playPolish=function(){var t=this;this.polishEffect.node.active=!0,this.polishEffect.play(),this.polishEffect.once(c.EventType.FINISHED,(function(){t.polishEffect.node.active=!1}))},l.show=function(){var t=this;this.node.scale=new p(0,0,1),f(this.node).to(.3,{scale:new p(1,1,1)},{easing:"backOut"}).call((function(){return t.playPolish()})).start()},l.setTheme=function(t){if(t!=this.theme){this.theme=t;var e=m(this.typeID,this.theme),i=d.get(e,g);this.itemTypeSprite&&(this.itemTypeSprite.spriteFrame=i)}},l.getTheme=function(){return this.theme},l.addOnClickCallback=function(t){this.onClickCallbacks.push(t)},l.emitOnClickCallbacks=function(){var t=this;this.onClickCallbacks.forEach((function(e){e(t)}))},l.clearOnClickCallbacks=function(){this.onClickCallbacks=[]},l.getCoordinate=function(){return this.coordinate},l.setCoordinate=function(t){this.coordinate=new u(t.x,t.y)},l.getTypeID=function(){return this.typeID},l.isUsed=function(){return this.used},l.reSpawn=function(){this.used=!0,this.wholeSprite.active=!0},l.hide=function(){this.setTypeID(T.NONE),this.wholeSprite.active=!1},l.kill=function(){this.wholeSprite.scale=new p(this.originScale,this.originScale),this.wholeSprite.angle=0,this.underKill=!1,this.setTypeID(T.NONE),this.used=!1,this.wholeSprite.active=!1},l.setTypeID=function(t){if(t!=this.typeID){this.typeID=t;var e=m(this.typeID,this.theme),i=d.get(e,g);this.itemTypeSprite&&(this.itemTypeSprite.spriteFrame=i)}},l.attachSubType=function(t,e){this.subTileList.set(e,t),t.onAttach(this)},l.detachAll=function(){for(var t,e=s(this.subTileList);!(t=e()).done;){var i=t.value;this.detachSubType(i[0])}},l.detachSubType=function(t){var e;null==(e=this.subTileList.get(t))||e.onDetach(),this.subTileList.delete(t)},l.onDead=function(t,e,i,n){var o;void 0===n&&(n=!1);var l=i.subTileList.get(C.GRAVITY);null==(o=this.subTileList.get(C.GRAVITY))||o.onDead(t,e,l,n),this.detachSubType(C.GRAVITY);for(var a,r=s(this.subTileList);!(a=r()).done;){var h=a.value,c=i.subTileList.get(h[0]);h[1].onDead(t,e,c,n),this.detachSubType(h[0])}},l.moveToRealPosition=function(t){var e=k(this.coordinate.x,this.coordinate.y,t);this.node.setPosition(new p(e.x,e.y))},l.onHint=function(){var t=this;this.hintGlow.active=!0,this.hintglow||(this.hintglow=f(this.hintGlow).repeatForever(f().to(3,{angle:360}).call((function(){t.hintGlow.angle=0}))).start()),this.hintAnimation?(this.hintAnimation.start(),this.hintglow.start()):this.hintAnimation=f(this.wholeSprite).repeatForever(f().to(.2,{scale:new p(.7*this.originScale,.7*this.originScale)}).to(.1,{angle:20},{easing:"quadOut"}).to(.1,{angle:-20},{easing:"quadOut"}).to(.1,{angle:20},{easing:"quadOut"}).to(.1,{angle:0},{easing:"quadOut"}).to(.2,{scale:new p(this.originScale,this.originScale)})).start()},l.onUnHint=function(){var t,e;this.wholeSprite&&(null==(t=this.hintAnimation)||t.stop(),null==(e=this.hintglow)||e.stop(),this.hintGlow.active=!1,this.wholeSprite.angle=0,f(this.wholeSprite).to(.05,{scale:new p(this.originScale,this.originScale)},{easing:"backOut"}).start())},l.fadeIn=function(t){var e,i,n=null==(e=this.wholeSprite)?void 0:e.getComponent(r);n.color=new S(255,255,255,0),null==(i=this.wholeSprite)||i.setScale(new p),f(n).delay(t).to(.5,{color:new S(255,255,255,255)}).start(),f(this.wholeSprite).delay(t).to(.5,{scale:new p(this.originScale,this.originScale,1)}).start()},l.moveToRealPositionWithPadding=function(t,e,i,n,o){var s=this;void 0===e&&(e=!0),void 0===i&&(i=0),void 0===n&&(n="quadOut"),void 0===o&&(o=.5);var l=k(this.coordinate.x-1,this.coordinate.y-1,t),a=new p(l.x,l.y,0);e?E.animTile.push(new Promise((function(t){f(s.node).delay(i).to(o,{position:a},{easing:n}).call((function(){t()})).start()}))):this.node.setPosition(a)},l.reScale=function(t){var e,i;null==(e=this.wholeSprite)||e.setScale(new p(t,t)),this.originScale=t,null==(i=this.node.getComponent(w))||i.setContentSize(new y(100*t,100*t))},l.onChoose=function(){this.choosingEffect.active=!0,this.wholeSprite.setScale(new p(this.originScale,this.originScale)),f(this.wholeSprite).to(.1,{scale:new p(.7*this.originScale,.7*this.originScale)}).to(.1,{scale:new p(this.originScale,this.originScale)}).call((function(){})).start(),f(this.rotatedChoosingEff).repeatForever(f().by(1,{angle:360})).start()},l.onUnchoose=function(){this.choosingEffect.active=!1},l.shrink=function(){var t;null==(t=this.itemTypeSprite)||t.node.setScale(new p),f(this.itemTypeSprite.node).to(.3,{scale:new p(1,1)},{easing:"backOut"}).start()},e}(b)).prototype,"itemTypeSprite",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(N.prototype,"backGroundSpite",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(N.prototype,"wholeSprite",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(N.prototype,"hintGlow",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(N.prototype,"choosingEffect",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(N.prototype,"rotatedChoosingEff",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(N.prototype,"polishEffect",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=N))||F));l._RF.pop()}}}));

System.register("bundle://main/_virtual/TilePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./Tile.ts"],(function(e){var t,i,n,o,r,l,a,s,u,c,f,d,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,s=e.Prefab,u=e.instantiate,c=e.Vec3,f=e.tween,d=e.Component},function(e){p=e.getTilePositionByLevel},function(e){h=e.default}],execute:function(){var v,g,b,P,m,y,L;l._RF.push({},"a66d1k6sRREzqELqEAJOtRR","TilePool",void 0);var w=a.ccclass,z=a.property;e("default",(v=w("TilePool"),g=z(s),b=z(Number),v((y=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"tilePrefab",y,o(t)),n(t,"size",L,o(t)),t.itemList=[],t.shaking=!1,t}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=u(this.tilePrefab);i&&(console.log("added child"),e.node.addChild(i)),this.itemList.push(null==i?void 0:i.getComponent(h)),null==i||i.setPosition(new c(-1e4,-1e4))}this.returnAll()},l.shake=function(e,t){var i=this;if(!this.shaking){this.shaking=!0;for(var n,o=r(this.itemList);!(n=o()).done;){var l=n.value;if(l.isUsed()){var a=p(l.getCoordinate().x,l.getCoordinate().y,t,1).toVec3();f(l.node).to(.05,{position:a.clone().add(new c(e,e))}).to(.05,{position:a.clone().subtract(new c(e,e))}).to(.05,{position:a}).call((function(){return i.shaking=!1})).start()}}}},l.getFirstItem=function(){for(var e,t=r(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i}return null},l.returnPool=function(e){e.kill(),e.node.setPosition(new c)},l.returnMultiple=function(e){for(var t,i=r(e);!(t=i()).done;){var n=t.value;n.node.setPosition(-1e4,-1e4),n.kill(),n.detachAll()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(d)).prototype,"tilePrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(m.prototype,"size",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=m))||P));l._RF.pop()}}}));

System.register("bundle://main/_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./GameManager.ts","./type.ts"],(function(t){var i,e,n,r,s,o,h,m,a,g,u,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,h=t.director,m=t.Label,a=t.Component},function(t){g=t.Turn},function(t){u=t.default},function(t){T=t.TileConnect}],execute:function(){var c,l,p,f,d;s._RF.push({},"66f8aBZv6RGz5IalYI5GxGc","Timer",void 0);var v=o.ccclass,E=o.property;t("Timer",(c=v("Timer"),l=E(u),c((d=i((f=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s))||this,n(i,"gm",d,r(i)),i.hasTriggeredTimeUp=!1,i.isrun=!1,i}e(i,t);var s=i.prototype;return s.start=function(){this.resetTimer(),this.hasTriggeredTimeUp=!1,h.on(T.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this),h.on(T.GAME_EVENTS.COUNTDOWN_RESET,this.resetTimer,this)},s.resetTimer=function(){this.isrun=!1,this.hasTriggeredTimeUp=!1;var t=this.node.getComponent(m);this.gm&&t&&(t.string=this.convertTime(this.gm.time))},s.convertTime=function(t){return Math.floor(t/60)+":"+(t%60).toString().padStart(2,"0")},s.startCountdown=function(){var t;this.isrun=!0;var i=this.node.getComponent(m);console.log(null==(t=this.gm)?void 0:t.time),this.gm&&i&&(i.string=this.convertTime(this.gm.time))},s.update=function(t){if(this.gm&&!this.gm.ispause&&this.isrun){var i=this.node.getComponent(m);this.gm.time>0&&this.hasTriggeredTimeUp&&(this.hasTriggeredTimeUp=!1),this.gm.time>0&&(this.gm.time-=t,this.gm.time<0&&(this.gm.time=0),i&&(i.string=this.convertTime(Math.ceil(this.gm.time)))),this.gm.time<=0&&!this.hasTriggeredTimeUp&&(console.log("Time up!"),this.isrun=!1,this.hasTriggeredTimeUp=!0,this.gm.isWin()||this.gm.switchTurn(g.FAIL),i&&(i.string=this.convertTime(0)))}},s.isWin=function(){var t;null!=(t=this.gm)&&t.isWin()&&this.gm.time},s.onDestroy=function(){h.off(T.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this),h.off(T.GAME_EVENTS.COUNTDOWN_RESET,this.resetTimer,this)},i}(a)).prototype,"gm",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));s._RF.pop()}}}));

System.register("bundle://main/_virtual/Tutorial1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts"],(function(e){var t,n,s,i,o,a,h,r,l,c;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,i=e._decorator,o=e.Tween,a=e.UIOpacity,h=e.Vec3,r=e.tween},function(e){l=e.BaseTutorial},function(e){c=e.getTilePositionByLevel}],execute:function(){var u;s._RF.push({},"6d475gYXitDa563KKEFBZkI","Tutorial1",void 0);var d=i.ccclass;e("Level1Tutorial",d("Level1Tutorial")(u=function(e){function s(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).currentPhaseIndex=0,t.phases=[{tiles:[[3,2],[3,4]],helpText:"Tap to connect"},{tiles:[[3,5],[2,4]],helpText:"Connect similar tiles with less than 2 turns"},{tiles:[[1,5],[3,1]],helpText:"Connect similar tiles with less than 2 turns"},{tiles:[[4,1],[5,2]],helpText:"More than 2 turns are NOT allowed",showHelpAfterClick:!0},{tiles:[[1,2],[4,2]],helpText:"There's obstacle between the tiles",showHelpAfterClick:!0}],t}t(s,e);var i=s.prototype;return i.begin=function(e,t){var n=this;this.currentPhaseIndex=0,this.gm=t,this.currentBoard=e,this.resetAllSiblingIndices(e),this.showPhase(this.phases[this.currentPhaseIndex],e),this.boundOnChoose=function(){n.nextPhase(e)},this.boundOnTouch=function(){n.hideAll()},t.onTouch(this.boundOnTouch),t.onChoose(this.boundOnChoose)},i.showPhase=function(e,t){this.setupOverlay();var s=e.tiles.map((function(e){var n=e[0],s=e[1];return t.board[n][s]}));t.resetInputExcept(s[0],s[1]),this.storeSiblingIndices(t),this.setAllTilesToBackground(t);for(var i,o=n(s);!(i=o()).done;){i.value.node.setSiblingIndex(this.overlay.getSiblingIndex()+1)}e.showHelpAfterClick?this.hidePanel():this.showPanel(e.helpText),this.showHand(s[0],s[1])},i.nextPhase=function(e){var t=this,n=this.phases[this.currentPhaseIndex];if(n.showHelpAfterClick&&""===this.help.string)return this.showPanel(n.helpText),void this.scheduleOnce((function(){t.currentPhaseIndex++,t.currentPhaseIndex<t.phases.length?t.showPhase(t.phases[t.currentPhaseIndex],t.currentBoard):t.end()}),1);this.currentPhaseIndex++,this.currentPhaseIndex<this.phases.length?this.showPhase(this.phases[this.currentPhaseIndex],this.currentBoard):this.end()},i.hideAll=function(){this.hidePanel(),this.hideHand()},i.showHand=function(e,t){var n;if(this.hand){o.stopAllByTarget(this.hand);var s=this.hand.getChildByName("circle");o.stopAllByTarget(s),o.stopAllByTarget(s.getComponent(a)),this.hand.active=!0;var i=null==(n=this.gm)?void 0:n.currentLevel,l=c(e.getCoordinate().x,e.getCoordinate().y,i,1).toVec3(),u=c(t.getCoordinate().x,t.getCoordinate().y,i,1).toVec3();this.hand.setScale(new h(1,1,1)),this.hand.setPosition(l.clone().add(this.gm.node.position.clone())),s.setScale(new h(0,0,0)),s.getComponent(a).opacity=255;var d=function(){s.getComponent(a).opacity=200,s.setScale(new h(.3,.3,.3)),r(s).to(.6,{scale:new h(1.5,1.5,2.5)},{easing:"quadOut"}).start(),r(s.getComponent(a)).to(.6,{opacity:0},{easing:"quadOut"}).start()},p=r(this.hand).to(.5,{position:u.clone().add(this.gm.node.position.clone()),scale:new h(1,1,1)},{easing:"quadInOut"}).call((function(){return s.setScale(new h(0,0,0))})).to(.1,{scale:new h(.8,.8,.8)}).call(d).delay(.6).to(.1,{scale:new h(1,1,1)}).call((function(){return s.setScale(new h(0,0,0))})),g=r(this.hand).to(.5,{position:l.clone().add(this.gm.node.position.clone()),scale:new h(1,1,1)},{easing:"quadInOut"}).call((function(){return s.setScale(new h(0,0,0))})).to(.1,{scale:new h(.8,.8,.8)}).call(d).delay(.6).to(.1,{scale:new h(1,1,1)}).call((function(){return s.setScale(new h(0,0,0))}));r(this.hand).sequence(p,g).repeatForever().start()}},i.end=function(){this.hideHand(),this.hideOverlay(),this.showPanel("Clear all tiles to win"),this.currentBoard&&(this.restoreAllSiblingIndices(this.currentBoard),this.currentBoard.resetInput(),this.currentBoard.setUpManager(this.gm)),this.overlay&&this.overlay.parent&&this.overlay.removeFromParent(),this.cleanup()},i.showObstacle=function(){var e=this;this.showPanel("There's obstacle between the tiles"),this.scheduleOnce((function(){e.hidePanel()}),1)},i.showInvalid=function(){var e=this;this.showPanel("More than 2 turns are NOT allowed"),this.scheduleOnce((function(){e.hidePanel()}),1)},s}(l))||u);s._RF.pop()}}}));

System.register("bundle://main/_virtual/Tutorial2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts"],(function(t){var e,i,n,r,a,l,o;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,r=t.find,a=t.Widget,l=t.Node},function(t){o=t.BaseTutorial}],execute:function(){var s;i._RF.push({},"8c158ThJjpNILwU1lIGLKqb","Tutorial2",void 0);var u=n.ccclass;t("Level2Tutorial",u("Level2Tutorial")(s=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).originalTimerParent=null,e.originalWidgetState=void 0,e}e(i,t);var n=i.prototype;return n.begin=function(t,e){var i,n=this;this.gm=e,this.currentBoard=t,this.resetAllSiblingIndices(t),this.setupOverlay(),this.showPanel("Remove all icon tiles before the end of time"),null==(i=this.gm.itemManager)||i.hideAll();var o=r("Canvas/Top/Timer"),s=r("Canvas/Bot"),u=r("Canvas");if(o&&s&&u){var g=o.getComponent(a);g&&(this.originalWidgetState={isAlignTop:g.isAlignTop,top:g.top,target:g.target},g.target=u,g.isAlignTop=!0,g.top=48,g.updateAlignment()),this.overlay.on(l.EventType.TOUCH_START,(function(){return n.end()}),this),s.active=!1,this.originalTimerParent=o.parent,o.setParent(u),o.setSiblingIndex(9999)}this.gm.turnOffInput()},n.end=function(){var t,e,i,n=this;this.overlay&&this.overlay.off(l.EventType.TOUCH_START,(function(){return n.end()}),this),this.hideOverlay();var o=r("Canvas/Timer"),s=r("Canvas/Top");if(o&&s){var u=o.getComponent(a);u&&this.originalWidgetState&&(o.setParent(s),u.target=s,u.isAlignTop=this.originalWidgetState.isAlignTop,u.top=this.originalWidgetState.top,u.updateAlignment())}this.hidePanel(),null==(t=this.gm)||null==(t=t.itemManager)||t.hideAll(),null==(e=this.gm)||null==(e=e.board)||e.resetInput(),null==(i=this.gm)||i.turnOnInput(),this.overlay&&this.overlay.parent&&this.overlay.removeFromParent(),this.resetAllSiblingIndices(this.gm.board),this.cleanup()},i}(o))||s);i._RF.pop()}}}));

System.register("bundle://main/_virtual/Tutorial3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts"],(function(t){var e,i,n,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator},function(t){s=t.BaseTutorial},function(t){a=t.Item}],execute:function(){var r;i._RF.push({},"a11e2gfZmFHD6a97U27Ht0d","Tutorial3",void 0);var l=n.ccclass;t("Level3Tutorial",l("Level3Tutorial")(r=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).currentPhase=1,e.hintUsed=!1,e.shuffleUsed=!1,e.originalUseHint=function(){},e.originalUseShuffle=function(){},e}e(i,t);var n=i.prototype;return n.begin=function(t,e){var i;this.gm=e,this.currentBoard=t,this.resetAllSiblingIndices(t),this.currentPhase=1,this.hintUsed=!1,this.shuffleUsed=!1,this.setupOverlay(),this.startPhase1(),this.gm.turnOffInput(),this.listenForHintUsage(),this.listenForMatchPair(),this.listenForShuffleUsage(),null==(i=this.gm.itemManager)||i.itemList.forEach((function(t){t.setquantity(11)}))},n.startPhase1=function(){var t,e;this.showPanel("Click to use Hint"),null==(t=this.gm.itemManager)||t.hideAll(),null==(e=this.gm.itemManager)||e.showItem(a.HINT)},n.startPhase2=function(){var t,e;this.currentPhase=2,this.showPanel("Click to use Shuffle"),this.gm.turnOffInput(),null==(t=this.gm.itemManager)||t.hideAll(),null==(e=this.gm.itemManager)||e.showItem(a.SHUFFLE)},n.listenForHintUsage=function(){var t,e=this;this.originalUseHint=null==(t=this.gm.itemManager)?void 0:t.useHint.bind(this.gm.itemManager),this.gm.itemManager&&(this.gm.itemManager.useHint=function(){1!==e.currentPhase||e.hintUsed||(e.hintUsed=!0,e.originalUseHint(),e.hideOverlay(),e.hidePanel(),e.gm.turnOnInput())})},n.listenForMatchPair=function(){var t=this;this.gm&&this.gm.onMatchPair((function(){1===t.currentPhase&&t.hintUsed&&setTimeout((function(){t.setupOverlay(),t.startPhase2()}),500)}))},n.listenForShuffleUsage=function(){var t,e=this;this.originalUseShuffle=null==(t=this.gm.itemManager)?void 0:t.useShuffle.bind(this.gm.itemManager),this.gm.itemManager&&(this.gm.itemManager.useShuffle=function(){2!==e.currentPhase||e.shuffleUsed||(e.shuffleUsed=!0,null==e.originalUseShuffle||e.originalUseShuffle(),setTimeout((function(){e.end()}),500))})},n.end=function(){var t,e,i,n,s;this.hideOverlay(),this.hidePanel(),null==(t=this.gm)||null==(t=t.itemManager)||t.hideAll(),null==(e=this.gm)||null==(e=e.itemManager)||e.showItem(a.HINT),null==(i=this.gm)||null==(i=i.itemManager)||i.showItem(a.SHUFFLE),null==(n=this.gm.board)||n.resetInput(),null==(s=this.gm)||s.turnOnInput(),this.cleanup(),this.restoreOriginalMethods()},n.restoreOriginalMethods=function(){var t;null!=(t=this.gm)&&t.itemManager&&(this.gm.itemManager.useHint=this.originalUseHint,this.gm.itemManager.useShuffle=this.originalUseShuffle)},n.cleanup=function(){t.prototype.cleanup.call(this),this.restoreOriginalMethods()},i}(s))||r);i._RF.pop()}}}));

System.register("bundle://main/_virtual/Tutorial4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts","./UImanager.ts"],(function(t){var e,n,i,l,r,u,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){l=t.BaseTutorial},function(t){r=t.Popup,u=t.Item},function(t){s=t.UImanager}],execute:function(){var a;n._RF.push({},"67105d55RRKL5OwUYVGbQ+5","Tutorial4",void 0);var o=i.ccclass;t("Level4Tutorial",o("Level4Tutorial")(a=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))||this).currentPhase=1,e.hintUsed=!1,e.shuffleUsed=!1,e}e(n,t);var i=n.prototype;return i.begin=function(t,e){var n;this.gm=e,this.currentBoard=t,this.resetAllSiblingIndices(t),this.setupOverlay(),s.showPopup(r.ROCKETTUTORIAL,!0,null==(n=this.gm)?void 0:n.currentNumber()),this.gm.turnOffInput()},i.end=function(){var t,e,n,i,l;s.hideAllPopups(),this.hideOverlay(),this.hidePanel(),null==(t=this.gm)||null==(t=t.itemManager)||t.hideAll(),null==(e=this.gm)||null==(e=e.itemManager)||e.showItem(u.HINT),null==(n=this.gm)||null==(n=n.itemManager)||n.showItem(u.SHUFFLE),null==(i=this.gm.board)||i.resetInput(),null==(l=this.gm)||l.turnOnInput(),this.cleanup()},n}(l))||a);n._RF.pop()}}}));

System.register("bundle://main/_virtual/Tutorial5.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts","./UImanager.ts"],(function(t){var e,n,i,l,u,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){l=t.BaseTutorial},function(t){u=t.Popup,r=t.Item},function(t){s=t.UImanager}],execute:function(){var a;n._RF.push({},"7acd0hPo+xLJ6cZmgOhCITe","Tutorial5",void 0);var o=i.ccclass;t("Level5Tutorial",o("Level5Tutorial")(a=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.begin=function(t,e){var n;this.gm=e,this.currentBoard=t,this.resetAllSiblingIndices(t),this.setupOverlay(),s.showPopup(u.BOOMTUTORIAL,!0,null==(n=this.gm)?void 0:n.currentNumber()),this.gm.turnOffInput()},i.end=function(){var t,e,n,i,l;s.hideAllPopups(),this.hideOverlay(),this.hidePanel(),null==(t=this.gm)||null==(t=t.itemManager)||t.hideAll(),null==(e=this.gm)||null==(e=e.itemManager)||e.showItem(r.HINT),null==(n=this.gm)||null==(n=n.itemManager)||n.showItem(r.SHUFFLE),null==(i=this.gm.board)||i.resetInput(),null==(l=this.gm)||l.turnOnInput(),this.cleanup()},n}(l))||a);n._RF.pop()}}}));

System.register("bundle://main/_virtual/Tutorial6.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts"],(function(e){var t,i,s,n,a;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,s=e._decorator},function(e){n=e.BaseTutorial},function(e){a=e.Item}],execute:function(){var o;i._RF.push({},"9469aIRBvJIOZwzerWHc3k0","Tutorial6",void 0);var r=s.ccclass;e("Level6Tutorial",r("Level6Tutorial")(o=function(e){function i(){for(var t,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this).currentPhase=1,t.hintUsed=!1,t.shuffleUsed=!1,t.originalUseBoom=function(){},t.originalUseRocket=function(){},t}t(i,e);var s=i.prototype;return s.begin=function(e,t){this.gm=t,this.currentBoard=e,this.resetAllSiblingIndices(e),this.currentPhase=1,this.hintUsed=!1,this.shuffleUsed=!1,this.setupOverlay(),this.startPhase1(),this.gm.turnOffInput(),this.listenForBoomUsage(),this.listenForRocketUsage()},s.startPhase1=function(){var e,t;this.showPanel("Click to use defuse kit"),null==(e=this.gm.itemManager)||e.hideAll(),null==(t=this.gm.itemManager)||t.showItem(a.BOOM)},s.startPhase2=function(){var e,t;this.currentPhase=2,this.showPanel("Click to use Rocket"),this.gm.turnOffInput(),null==(e=this.gm.itemManager)||e.hideAll(),null==(t=this.gm.itemManager)||t.showItem(a.ROCKET)},s.listenForBoomUsage=function(){var e,t=this;this.originalUseBoom=null==(e=this.gm.itemManager)?void 0:e.useBoom.bind(this.gm.itemManager),this.gm.itemManager&&(this.gm.itemManager.useBoom=function(){1!==t.currentPhase||t.hintUsed||(t.hintUsed=!0,t.originalUseBoom(),t.hideOverlay(),t.hidePanel(),t.setupOverlay(),t.scheduleOnce((function(){t.startPhase2()}),1))},console.log(this.gm.itemManager.useBoom))},s.listenForRocketUsage=function(){var e,t=this;this.originalUseRocket=null==(e=this.gm.itemManager)?void 0:e.useRocket.bind(this.gm.itemManager),this.gm.itemManager&&(this.gm.itemManager.useRocket=function(){2!==t.currentPhase||t.shuffleUsed||(t.shuffleUsed=!0,t.originalUseRocket(),t.end())})},s.end=function(){var e,t;null==(e=this.gm.board)||e.resetInput(),null==(t=this.gm)||t.turnOnInput(),this.cleanup(),this.restoreOriginalMethods(),this.hideOverlay(),this.hidePanel()},s.restoreOriginalMethods=function(){var e;null!=(e=this.gm)&&e.itemManager&&(this.gm.itemManager.useBoom=this.originalUseBoom,this.gm.itemManager.useRocket=this.originalUseRocket)},s.cleanup=function(){e.prototype.cleanup.call(this),this.restoreOriginalMethods()},i}(n))||o);i._RF.pop()}}}));

System.register("bundle://main/_virtual/TutorialManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tutorial1.ts","./Tutorial2.ts","./Tutorial3.ts","./Tutorial4.ts","./Tutorial5.ts","./Tutorial6.ts"],(function(t){var i,e,r,n,o,a,l,u,s,c,h,p,T,d,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Node,u=t.Label,s=t.Component},function(t){c=t.Level1Tutorial},function(t){h=t.Level2Tutorial},function(t){p=t.Level3Tutorial},function(t){T=t.Level4Tutorial},function(t){d=t.Level5Tutorial},function(t){f=t.Level6Tutorial}],execute:function(){var v,b,y,g,m,w,P,C,L,z,M,I;o._RF.push({},"64ab0dIORpPUYjVvXqoFKy1","TutorialManager",void 0);var _=a.ccclass,D=a.property;t("TutorialManager",(v=_("TutorialManager"),b=D(l),y=D(l),g=D(u),m=D(l),v(((I=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,r(i,"overlay",C,n(i)),r(i,"panel",L,n(i)),r(i,"help",z,n(i)),r(i,"hand",M,n(i)),i.tutorials=new Map,i.currentTutorial=null,i}e(i,t);var o=i.prototype;return o.start=function(){i.instance=this,this.initializeTutorials(),this.hand.active=!1,this.panel.active=!1},o.initializeTutorials=function(){var t=this.node.addComponent(c),i=this.node.addComponent(h),e=this.node.addComponent(p),r=this.node.addComponent(T),n=this.node.addComponent(d),o=this.node.addComponent(f);this.setTutorialProperties(t),this.setTutorialProperties(i),this.setTutorialProperties(e),this.setTutorialProperties(r),this.setTutorialProperties(n),this.setTutorialProperties(o),this.tutorials.set(1,t),this.tutorials.set(2,i),this.tutorials.set(3,e),this.tutorials.set(4,r),this.tutorials.set(5,n),this.tutorials.set(6,o)},o.setTutorialProperties=function(t){t.overlay=this.overlay,t.panel=this.panel,t.help=this.help,t.hand=this.hand},i.showCurrentTutorial=function(t,e,r){!i.instance||t>6||e&&r&&i.instance.startTutorial(t,e,r)},o.startTutorial=function(t,i,e){this.currentTutorial&&this.currentTutorial.end();var r=this.tutorials.get(t);r&&(this.currentTutorial=r,r.begin(i,e))},o.endCurrentTutorial=function(){this.currentTutorial&&(this.currentTutorial.end(),this.currentTutorial=null)},o.showObstacle=function(){this.currentTutorial instanceof c&&this.currentTutorial.showObstacle()},o.showInvalid=function(){this.currentTutorial instanceof c&&this.currentTutorial.showInvalid()},i}(s)).instance=null,C=i((P=I).prototype,"overlay",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(P.prototype,"panel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(P.prototype,"help",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(P.prototype,"hand",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=P))||w));o._RF.pop()}}}));

System.register("bundle://main/_virtual/type.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var n;e("TileConnect",void 0),t._RF.push({},"b1d490w25hJl6tzYD9F8pgq","type",void 0),(n||(n=e("TileConnect",{}))).GAME_EVENTS={START_COUNTDOWN:"star-countdown",COUNTDOWN_COMPLETE:"countdown-complete",GAME_OVER:"game-over",LEVEL_WIN:"level-win",COUNTDOWN_RESET:"countdown-reset"},t._RF.pop()}}}));

System.register("bundle://main/_virtual/UImanager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./basePopup.ts","./SoundManager.ts","./LevelLoader.ts"],(function(e){var t,n,i,o,r,a,s,u,l,p,c,g,f,d,m,h,b,v,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,u=e.view,l=e.Widget,p=e.Vec3,c=e.tween,g=e.resources,f=e.SpriteFrame,d=e.Sprite,m=e.Component},function(e){h=e.Popup},function(e){b=e.BasePopup},function(e){v=e.SoundManager},function(e){w=e.LevelLoader}],execute:function(){var C,y,B,P,z,A,F,O,N,I,S,T,M,L,D,U,V,H,_,k,E,R;r._RF.push({},"306aehmDdVK9KkrxQbG4DJr","UImanager",void 0);var j=a.ccclass,x=a.property;e("UImanager",(C=j("UImanager"),y=x(s),B=x(s),P=x(s),z=x(s),A=x(s),F=x(s),O=x(s),N=x(s),I=x(s),C(((R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"top",M,o(t)),i(t,"bot",L,o(t)),i(t,"overlay",D,o(t)),i(t,"itembar",U,o(t)),t.popupNodes=new Map,t.popupComponents=new Map,i(t,"pauseButton",V,o(t)),i(t,"progressBar",H,o(t)),i(t,"soundButton",_,o(t)),i(t,"musicButton",k,o(t)),i(t,"vibrateButton",E,o(t)),t}n(t,e);var r=t.prototype;return r.start=function(){t.instance=this,this.cachePopupNodes(),this.hideAllPopups(),this.resize(),u.on("canvas-resize",this.resize,this)},r.resize=function(){var e,t,n,i,o,r=u.getVisibleSize(),a=null==(e=this.itembar)?void 0:e.getComponent(l);a&&(r.width>=r.height?(1!=w.getInstance().getCurrentLevelNumber()&&(this.bot.active=!1),null==(t=this.top)||t.addChild(this.itembar),null==(n=this.progressBar)||n.setScale(new p(1,1)),a.target=this.top,a.isAlignRight=!0,a.right=100,a.isAlignVerticalCenter=!0,a.verticalCenter=10):(1!=w.getInstance().getCurrentLevelNumber()&&(this.bot.active=!0),null==(i=this.bot)||i.addChild(this.itembar),null==(o=this.progressBar)||o.setScale(new p(r.width/800,r.width/800)),a.target=this.bot,a.isAlignHorizontalCenter=!0,a.horizontalCenter=0,a.isAlignVerticalCenter=!0,a.verticalCenter=40))},t.togglePauseButton=function(e){},r.hideAllPopups=function(){var e=this;t.instance.overlay.active=!1,this.popupNodes.forEach((function(t,n){var i=e.popupComponents.get(n);i&&t.active&&i.onPopupHide(),t.active=!1}))},t.showPopup=function(e,n,i){if(void 0===n&&(n=!0),t.instance){n&&t.instance.hideAllPopups(),console.log(e);var o=t.instance.popupNodes.get(e),r=t.instance.popupComponents.get(e);o?(t.instance.overlay.active=!0,o.active=!0,o.scale=new p(0,0,1),c(o).to(.3,{scale:new p(1,1,1)},{easing:"backOut"}).start(),r&&r.onPopupShow(i)):console.warn("Popup not found: "+e)}else console.warn("UIManager instance not found!")},t.hidePopup=function(e){if(t.instance){var n=t.instance.popupNodes.get(e),i=t.instance.popupComponents.get(e);n&&n.active&&c(n).delay(.15).to(.3,{scale:new p(0,0,1)},{easing:"backOut"}).call((function(){t.instance.overlay.active=!1,i&&i.onPopupHide()})).start()}else console.warn("UIManager instance not found!")},t.hideAllPopups=function(){t.instance?(t.instance.hideAllPopups(),console.log("Hidden all popups")):console.warn("UIManager instance not found!")},r.cachePopupNodes=function(){var e=this;Object.values(h).forEach((function(t){var n=e.node.getChildByName(t);if(n){e.popupNodes.set(t,n);var i=n.getComponent(b);i&&(e.popupComponents.set(t,i),console.log("Cached popup component: "+t)),console.log("Cached popup: "+t)}else console.warn("Popup node not found: "+t)}))},r.onDestroy=function(){this.popupComponents.forEach((function(e,t){e&&e.onPopupDestroy()}))},r.ToggleSound=function(){if(v.instance.soundOn=!v.instance.soundOn,v.instance.soundOn){var e=g.get("AllTiles/sound-on/spriteFrame",f);this.soundButton.getComponent(d).spriteFrame=e}else{var t=g.get("AllTiles/sound-off/spriteFrame",f);this.soundButton.getComponent(d).spriteFrame=t}},r.ToggleMusic=function(){if(v.instance.musicOn=!v.instance.musicOn,v.instance.musicOn){var e=g.get("AllTiles/music-on/spriteFrame",f);this.musicButton.getComponent(d).spriteFrame=e}else{var t=g.get("AllTiles/music-off/spriteFrame",f);this.musicButton.getComponent(d).spriteFrame=t}},r.ToggleVibration=function(){if(v.instance.vibrateOn=!v.instance.vibrateOn,v.instance.vibrateOn){var e=g.get("AllTiles/vibrate-on/spriteFrame",f);this.vibrateButton.getComponent(d).spriteFrame=e}else{var t=g.get("AllTiles/vibrate-off/spriteFrame",f);this.vibrateButton.getComponent(d).spriteFrame=t}},t}(m)).instance=null,M=t((T=R).prototype,"top",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(T.prototype,"bot",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(T.prototype,"overlay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(T.prototype,"itembar",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(T.prototype,"pauseButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(T.prototype,"progressBar",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(T.prototype,"soundButton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(T.prototype,"musicButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(T.prototype,"vibrateButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=T))||S));r._RF.pop()}}}));

System.register("bundle://main/_virtual/victoryPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts","./SoundManager.ts","./global.ts"],(function(e){var t,n,a,i,r,l,o,s,c,u,p,g,h,f,v,y,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Label,s=e.Node,c=e.Sprite,u=e.Button,p=e.Vec3,g=e.tween,h=e.ParticleSystem2D,f=e.Tween},function(e){v=e.BasePopup},function(e){y=e.SoundManager},function(e){d=e.SFX}],execute:function(){var w,S,m,b,C,B,A,N,E,I,O,P,z;r._RF.push({},"5529e6jOhZOXIn3Hd8ylniS","victoryPopup",void 0);var F=l.ccclass,L=l.property;e("Victory",(w=F("Victory"),S=L(o),m=L([s]),b=L(c),C=L(c),B=L(u),w((E=t((N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,a(t,"level",E,i(t)),a(t,"stars",I,i(t)),a(t,"ribbon",O,i(t)),a(t,"glow",P,i(t)),a(t,"continue",z,i(t)),t}n(t,e);var r=t.prototype;return r.onPopupShow=function(e){var t=this;this.resetAura(),this.popStar((function(){t.dropAllStars((function(){t.trailStar(),t.playAura(),t.glow.node.active=!0,t.repeatStar(),t.playJiggle(),t.playLevel((function(){}),e),t.playContinue()}))}))},r.playLevel=function(e,t){this.level.string="LEVEL "+t,this.level.node.active=!0,this.level.node.scale=new p(0,0,1),g(this.level.node).to(.2,{scale:new p(1,1,1)},{}).call((function(){e()})).start()},r.playContinue=function(e){this.continue.node.active=!0,this.continue.node.scale=new p(0,0,1),g(this.continue.node).to(.05,{scale:new p(1,1,1)},{}).start()},r.playAura=function(){this.stars.forEach((function(e){var t,n,a,i=e.getChildByName("MainAura");i&&(i.active=!0,null==(t=i.getChildByName("Aura"))||null==(t=t.getComponent(h))||t.resetSystem(),null==(n=i.getChildByName("Aura2"))||null==(n=n.getComponent(h))||n.resetSystem(),null==(a=i.getChildByName("Aura1"))||null==(a=a.getComponent(h))||a.resetSystem(),console.log(i))}))},r.resetAura=function(){var e=this;this.level.string="",this.stars.forEach((function(t){var n=t.getChildByName("MainAura");n&&(n.active=!1),e.glow.node.active=!1;var a=t.getChildByName("Star"),i=null==a?void 0:a.getChildByName("Trail");i&&(i.active=!1)}))},r.playJiggle=function(e){g(this.ribbon.node).to(.08,{scale:new p(1.09,.98,1)}).to(.08,{scale:new p(.98,1.09,1)}).to(.08,{scale:new p(1,1,1)}).call((function(){e&&e()})).start()},r.popStar=function(e){var t=this;y.instance.playSFX(d.THREE_STAR),this.stars.forEach((function(e){var t=e.getChildByName("Star");t&&(f.stopAllByTarget(t),t.setScale(0,0,1),t.active=!0)}));var n=0;this.stars.slice().reverse().forEach((function(a,i){var r=a.getChildByName("Star"),l=.225*(1-.2*i);r&&g(r).delay(l).to(.45,{scale:new p(2.5,2.5,1)}).call((function(){++n===t.stars.length&&e&&e()})).start()}))},r.trailStar=function(){this.stars.forEach((function(e){var t=e.getChildByName("Star"),n=null==t?void 0:t.getChildByName("Trail");n&&(n.active=!0)}))},r.dropAllStars=function(e){var t=this;this.stars.forEach((function(n,a){var i=n.getChildByName("Star");i&&g(i).to(.1,{scale:new p(1.2,1.2,1)}).call((function(){a===t.stars.length-1&&e&&e()})).start()}))},r.repeatStar=function(){this.stars.forEach((function(e,t){var n=e.getChildByName("Star");n&&0==t?g(n).parallel(g().to(1.4,{scale:new p(1.2,1.2,1)},{easing:"sineInOut"}).to(1.4,{scale:new p(1.3,1.3,1)},{easing:"sineInOut"}),g().to(1.7,{angle:2}).to(1.5,{angle:5})).repeatForever().start():n&&1==t?g(n).parallel(g().to(1.4,{scale:new p(1.2,1.2,1)},{easing:"sineInOut"}).to(1.4,{scale:new p(1.3,1.3,1)},{easing:"sineInOut"}),g().to(1.7,{angle:0}).to(1.5,{angle:0})).repeatForever().start():n&&2==t&&g(n).parallel(g().to(1.4,{scale:new p(1.2,1.2,1)},{easing:"sineInOut"}).to(1.4,{scale:new p(1.3,1.3,1)},{easing:"sineInOut"}),g().to(1.7,{angle:-2}).to(1.5,{angle:-5})).repeatForever().start()}))},t}(v)).prototype,"level",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(N.prototype,"stars",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(N.prototype,"ribbon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(N.prototype,"glow",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(N.prototype,"continue",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=N))||A));r._RF.pop()}}}));

System.register("bundle://main/_virtual/WinTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts","./AnimationHandler.ts","./LevelLoader.ts","./SoundManager.ts"],(function(n){var t,e,a,i,o,r,s,u,l,c,f;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,a=n.find,i=n.tween},function(n){o=n.SFX,r=n.Popup},function(n){s=n.UImanager},function(n){u=n.BaseTurn},function(n){l=n.AnimationHandler},function(n){c=n.LevelLoader},function(n){f=n.SoundManager}],execute:function(){e._RF.push({},"a99a1BvIGtDzZ+e6hcZIVzB","WinTurn",void 0);n("WinTurn",function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var u=e.prototype;return u.onEnter=function(){var n=this;this.game.isgameOver=!0,Promise.all(l.animList).then((function(){var t,e;(s.togglePauseButton(!1),0==(null==(t=l.fillProgressBar)?void 0:t.isLastStar()))&&(console.log("hi"),null==(e=l.fillProgressBar)||e.updateTillWin());var u=a("Canvas/Top/Timer");if(u){var m=u.getChildByName("clock");if(m){var g=m.getWorldPosition();n.game.starPool&&n.startStarAnimation(g,n.game.starPool)}}var p=n.game.time;i({time:p}).to(2,{time:0},{onUpdate:function(t){t&&(n.game.time=Math.max(0,t.time))}}).delay(.2).call((function(){n.game.conf.forEach((function(n){n.emit()})),f.instance.playSFX(o.LEVELCOMPLETE),s.showPopup(r.WINPOPUP,!0,c.getInstance().getCurrentLevelNumber())})).start()}))},u.startStarAnimation=function(n,t){for(var e=0;e<10;e++)i({}).delay(.2*e).call((function(){var e=t.getFirstItem();e&&e.winPut(n)})).start()},u.onExit=function(){f.instance.stopSFX(o.LEVELCOMPLETE)},u.onUpdate=function(){},e}(u));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'bundle://main/_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});