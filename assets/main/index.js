System.register("chunks:///_virtual/adsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts","./Countdown.ts"],(function(e){var t,i,n,o,r,l,a,u,c,p,s,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Label,u=e.Node,c=e.VideoPlayer,p=e.Sprite,s=e.director},function(e){f=e.BasePopup},function(e){d=e.GAME_EVENTS}],execute:function(){var h,m,b,g,v,y,w,C,P;r._RF.push({},"e4fb1lxX6pNMZ0iUKVaENoF","adsPopup",void 0);var T=l.ccclass,E=l.property;e("Ads",(h=T("Ads"),m=E(a),b=E(u),g=E(u),h((w=t((y=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"countdownlabel",w,o(t)),n(t,"fill",C,o(t)),n(t,"clip",P,o(t)),t.timer=5,t.currentTime=0,t}i(t,e);var r=t.prototype;return r.onPopupShow=function(e){var t;null==(t=this.clip.getComponent(c))||t.play();var i=this.fill.getComponent(p);i&&(i.fillRange=1)},r.update=function(e){this.currentTime+=e;var t=Math.min(this.currentTime/this.timer,1),i=this.fill.getComponent(p);i&&(i.fillRange=1-t),this.currentTime>=this.timer&&this.onCountdownComplete()},r.onCountdownComplete=function(){this.countdownlabel.node.active=!0},r.onPopupHide=function(){this.countdownlabel.node.active=!1;var e=this.fill.getComponent(p);e&&(e.fillRange=1),s.emit(d.COUNTDOWN_RESET),this.currentTime=0},t}(f)).prototype,"countdownlabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(y.prototype,"fill",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(y.prototype,"clip",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/AdsTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,o,e,u,s;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.Popup},function(n){u=n.UImanager},function(n){s=n.BaseTurn}],execute:function(){o._RF.push({},"8a66cdks8FDq6yoo0NUkqll","AdsTurn",void 0);n("AdsTurn",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var s=o.prototype;return s.onEnter=function(){this.game.isgameOver=!0,this.game.turnOffInput(),u.togglePauseButton(!1),this.game.unChoose(),console.log("adsfrf"),u.showPopup(e.ADSPOPUP,!0,this.game.currentNumber())},s.onExit=function(){},s.onUpdate=function(){},o}(s));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var n,e,i,s;return{setters:[function(r){n=r.inheritsLoose},function(r){e=r.cclegacy,i=r._decorator,s=r.Component}],execute:function(){var t,o;e._RF.push({},"176299ZXdJILqeT4+svLujj","AnimationHandler",void 0);var a=i.ccclass;i.property,r("AnimationHandler",a("AnimationHandler")(((o=function(r){function e(){return r.apply(this,arguments)||this}return n(e,r),e.setFillProgressBar=function(r){e.fillProgressBar=r},e.callProgress=function(){e.fillProgressBar&&e.fillProgressBar.updateProgressBar()},e}(s)).fillProgressBar=null,o.animTile=[],o.matchAnim=[],o.animList=[],t=o))||t);e._RF.pop()}}}));

System.register("chunks:///_virtual/AssetLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,o,t,s,a,n,i,c,l,p,u;return{setters:[function(r){e=r.applyDecoratedDescriptor,o=r.inheritsLoose,t=r.initializerDefineProperty,s=r.assertThisInitialized},function(r){a=r.cclegacy,n=r._decorator,i=r.ProgressBar,c=r.director,l=r.resources,p=r.SpriteFrame,u=r.Component}],execute:function(){var d,f,g,h,y;a._RF.push({},"876d8QZRoRCaYjzyBTsf+Wl","AssetLoader",void 0);var B=n.ccclass,P=n.property;r("AssetLoader",(d=B("AssetLoader"),f=P(i),d((y=e((h=function(r){function e(){for(var e,o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return e=r.call.apply(r,[this].concat(a))||this,t(e,"progressBar",y,s(e)),e}o(e,r);var a=e.prototype;return a.__preload=function(){if(console.log("preloading"),!this.progressBar)throw new Error("ProgressBar is required");c.preloadScene("Prototype")},a.start=function(){var r=this;l.loadDir("AllTiles",p,(function(e,o){r.updateProgressBar(e/o)}),(function(e){e?console.error(e):(r.updateProgressBar(1),r.switchToGameScene())}))},a.updateProgressBar=function(r){this.progressBar.progress=r},a.switchToGameScene=function(){c.loadScene("Prototype")},e}(u)).prototype,"progressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=h))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/BackGround.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,r,o,a,s,c,u,l;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.view,c=e.UITransform,u=e.Size,l=e.Component}],execute:function(){var h,p,d,f,g,z,v;o._RF.push({},"9d56cw8xxFPkbWj8Zus+7CG","BackGround",void 0);var y=a.ccclass,B=a.property;e("BackGround",(h=y("BackGround"),p=B(Boolean),d=B(Boolean),h((z=n((g=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"scaleOnX",z,r(n)),i(n,"scaleOnY",v,r(n)),n}t(n,e);var o=n.prototype;return o.onLoad=function(){this.resizeBackground(),s.on("canvas-resize",this.resizeBackground,this)},o.onDestroy=function(){s.off("canvas-resize",this.resizeBackground,this)},o.resizeBackground=function(){var e=s.getVisibleSize(),n=this.node.getComponent(c);if(n){var t=n.contentSize,i=this.scaleOnX?e.width:t.width,r=this.scaleOnY?e.height:t.height;n.setContentSize(new u(i/this.node.scale.x,r/this.node.scale.y))}},n}(l)).prototype,"scaleOnX",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=n(g.prototype,"scaleOnY",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=g))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,e,o,c,r,a,u,l,s,h,m,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){c=t.cclegacy,r=t._decorator,a=t.Sprite,u=t.RichText,l=t.Node,s=t.tween,h=t.Color,m=t.Vec3,f=t.Component}],execute:function(){var p,d,b,k,v,y,B,g,G,I,w,N,q,z,x,F,L;c._RF.push({},"43eactcmDZJ37vn/GEQwiia","BaseItem",void 0);var P=r.ccclass,T=r.property;t("default",(p=P("BaseItem"),d=T(a),b=T(a),k=T(u),v=T(a),y=T(a),B=T(l),g=T(l),p((w=i((I=function(t){function i(){for(var i,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return i=t.call.apply(t,[this].concat(c))||this,e(i,"icon",w,o(i)),e(i,"BG",N,o(i)),i.mainBG=i.BG,i.mainIcon=i.icon,i.quantity=0,e(i,"quantityText",q,o(i)),i.clicked=!1,i.itemManager=null,i.game=null,e(i,"lockedIcon",z,o(i)),e(i,"lockedBG",x,o(i)),i.locked=!1,e(i,"note",F,o(i)),e(i,"noteLock",L,o(i)),i.currentNote=i.note,i}n(i,t);var c=i.prototype;return c.start=function(){},c.setquantity=function(t){this.quantity=t},c.init=function(){this.textChange(),this.lock(),this.unlock(),0==this.quantity?this.stopFunction():this.enableFunction()},c.onUse=function(){var t=this;if(!this.locked){var i=[];this.clicked||(this.clicked=!0,i.push(new Promise((function(i){s(t.icon).to(.2,{color:new h(255,255,255,50)}).to(.2,{color:new h(255,255,255,255)},{easing:"bounceOut"}).call((function(){i()})).start()}))),i.push(new Promise((function(i){s(t.icon.node).to(.2,{scale:new m(.5,.5)}).to(.2,{scale:new m(1,1)},{easing:"quadOut"}).call((function(){i()})).start()}))),0!=this.quantity&&Promise.all(i).then((function(){return t.clicked=!1})))}},c.textChange=function(){this.quantityText.string=String(this.quantity)},c.stopFunction=function(){this.locked=!0,this.currentNote.active=!1},c.enableFunction=function(){this.locked=!1,this.currentNote.active=!0},c.lock=function(){this.locked=!0,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!1,this.mainIcon.node.active=!1,this.currentNote.active=!1),this.mainIcon=this.lockedIcon,this.mainBG=this.lockedBG,this.currentNote=this.noteLock,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!0,this.mainIcon.node.active=!0,this.currentNote.active=!0)},c.unlock=function(){this.locked=!1,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!1,this.mainIcon.node.active=!1,this.currentNote.active=!1),this.mainIcon=this.icon,this.mainBG=this.BG,this.currentNote=this.note,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!0,this.mainIcon.node.active=!0,this.currentNote.active=!0)},i}(f)).prototype,"icon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(I.prototype,"BG",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(I.prototype,"quantityText",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(I.prototype,"lockedIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(I.prototype,"lockedBG",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(I.prototype,"note",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(I.prototype,"noteLock",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=I))||G));c._RF.pop()}}}));

System.register("chunks:///_virtual/basePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,t,e,u;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,e=o._decorator,u=o.Component}],execute:function(){var p;t._RF.push({},"0755a0dOHNLUotG5cYGTlEV","basePopup",void 0);var c=e.ccclass;o("BasePopup",c("BasePopup")(p=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var e=t.prototype;return e.onPopupShow=function(o){},e.onPopupHide=function(){},e.onPopupDestroy=function(){},e.closePopup=function(){},t}(u))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseSubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Component}],execute:function(){var u;n._RF.push({},"81dc7NVyPVBPZdBvTIJZutV","BaseSubTile",void 0);var s=i.ccclass;i.property,t("BaseSubTile",s("BaseSubTile")(u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).used=!1,e.tile=null,e}e(n,t);var i=n.prototype;return i.onDead=function(t,e,n){},i.onResolve=function(){},i.onAttach=function(t){this.tile=t},i.onDetach=function(){this.tile=null},i.isUsed=function(){return this.used},i.reSpawn=function(){this.used=!0},i.kill=function(){this.used=!1},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseTurn.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"efca6CSsLFI05L/gdQN7SNC","BaseTurn",void 0);n("BaseTurn",function(){function n(n){this.game=void 0,this.game=n}var t=n.prototype;return t.onEnter=function(){},t.onExit=function(){},t.onUpdate=function(){},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts","./global.ts","./AnimationHandler.ts","./LevelLoader.ts"],(function(t){var e,n,i,r,a,o,s,l,h,u,d,f,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,r=t._decorator,a=t.Vec2,o=t.Size,s=t.tween,l=t.Tween,h=t.Component},function(t){u=t.default},function(t){d=t.TileType},function(t){f=t.AnimationHandler},function(t){c=t.LevelLoader}],execute:function(){var g;i._RF.push({},"52701IqhLtGnIdgKUUwkd2v","Board",void 0);var p=r.ccclass;r.property,t("default",p("Board")(g=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).board=[],e.shuffling=!1,e.listPair=[],e.game=null,e.matchedPairsCount=0,e.respawnCount=0,e.MAX_RESPAWNS_PER_LEVEL=3,e.FIRST_RESPAWN_THRESHOLD=5,e.SUBSEQUENT_RESPAWN_INTERVAL=3,e}e(i,t);var r=i.prototype;return r.match=function(t,e){if(!t.underKill&&!e.underKill)if(this.canMatch(t,e)){var n,i,r=this.getPath(t,e);this.drawPath(r.path,null==(n=this.game)?void 0:n.pathPool),this.putStar(r.path,null==(i=this.game)?void 0:i.starPool),this.listPair.push({tile:t,position:t.getCoordinate(),type:t.getTypeID(),theme:t.getTheme()}),this.listPair.push({tile:e,position:e.getCoordinate(),type:e.getTypeID(),theme:e.getTheme()}),t.onDead(this,!0,e),e.onDead(this,!1,t),t.kill(),e.kill(),this.matchedPairsCount++,this.checkAndRespawnTiles()}else{var a,o;(null==(a=this.game)?void 0:a.tilePool).shake(10,this.game.currentLevel),null==(o=this.game)||o.unChoose()}},r.checkAndRespawnTiles=function(){var t=this,e=c.getInstance().getLevelData();!e||e.Difficulty<3||this.shouldRespawnTiles()&&this.listPair.length>=2&&Promise.all(f.animList).then((function(){t.respawnRandomTilePair(),t.respawnCount++}))},r.shouldRespawnTiles=function(){if(this.respawnCount>=this.MAX_RESPAWNS_PER_LEVEL)return!1;if(0===this.respawnCount&&this.matchedPairsCount===this.FIRST_RESPAWN_THRESHOLD)return!0;if(this.respawnCount>0){var t=this.matchedPairsCount-this.FIRST_RESPAWN_THRESHOLD;return Math.floor(t/this.SUBSEQUENT_RESPAWN_INTERVAL)>this.respawnCount-1}return!1},r.respawnRandomTilePair=function(){if(!(this.listPair.length<2)){for(var t=[],e=0;e<this.listPair.length-1;e+=2)t.push(e);if(0!==t.length){var n=t[Math.floor(Math.random()*t.length)],i=n,r=n+1;this.respawnTileAt(i),this.respawnTileAt(r),this.listPair.splice(r,1),this.listPair.splice(i,1)}else this.respawnRandomMatchingTiles()}},r.respawnRandomMatchingTiles=function(){var t=this,e={};this.listPair.forEach((function(t,n){var i=t.type+"_"+t.theme;e[i]||(e[i]=[]),e[i].push(n)}));var n=Object.keys(e).filter((function(t){return e[t].length>=2}));if(0!==n.length){for(var i=n[Math.floor(Math.random()*n.length)],r=e[i],a=r[Math.floor(Math.random()*r.length)],o=r[Math.floor(Math.random()*r.length)];o===a&&r.length>1;)o=r[Math.floor(Math.random()*r.length)];this.respawnTileAt(a),this.respawnTileAt(o),[a,o].sort((function(t,e){return e-t})).forEach((function(e){t.listPair.splice(e,1)}))}},r.respawnTileAt=function(t){var e=this.listPair[t];e&&(e.tile.show(),e.tile.reSpawn(),e.tile.setTypeID(e.type),e.tile.setTheme(e.theme),e.tile.setCoordinate(e.position))},r.getMatchedPairsCount=function(){return this.matchedPairsCount},r.getRespawnCount=function(){return this.respawnCount},r.getRemainingRespawns=function(){return this.MAX_RESPAWNS_PER_LEVEL-this.respawnCount},r.canMatch=function(t,e){if(t.getTypeID()!==e.getTypeID())return!1;if(t===e)return!1;var n=this.getPath(t,e),i=n.path,r=n.turnNum;return console.log(i),i.length>0&&r<=2},r.getPath=function(t,e){for(var n=t.getCoordinate(),i=e.getCoordinate(),r=this.board.length,o=this.board[0].length,s=[new a(0,1),new a(1,0),new a(0,-1),new a(-1,0)],l=Array.from({length:r},(function(){return Array.from({length:o},(function(){return Array(4).fill(1/0)}))})),h=function(t){return Math.abs(t.x-i.x)+Math.abs(t.y-i.y)},u=[],d=0;d<4;d++){var f=n.clone().add(s[d]);this.validate(f,i)&&(l[f.y][f.x][d]=0,u.push({pos:f,dirIndex:d,turn:0,path:[n.clone(),f.clone()],g:1,f:1+h(f)}))}for(;u.length>0;){u.sort((function(t,e){return t.f-e.f}));var c=u.shift();if(c.pos.equals(i))return{path:c.path,turnNum:c.turn};for(var g=0;g<4;g++){var p=g===c.dirIndex?c.turn:c.turn+1;if(!(p>2)){var v=c.pos.clone().add(s[g]);if(this.validate(v,i)&&!(l[v.y][v.x][g]<=p)){l[v.y][v.x][g]=p;var m=c.g+1,P=m+h(v);u.push({pos:v,dirIndex:g,turn:p,path:[].concat(c.path,[v.clone()]),g:m,f:P})}}}}return{path:[],turnNum:0}},r.resetInput=function(){for(var t,e=n(this.board);!(t=e()).done;)for(var i,r=t.value,a=n(r);!(i=a()).done;){i.value.clearOnClickCallbacks()}},r.getBoardSize=function(){return new o(u.TileSize*this.board[0].length,u.TileSize*this.board.length)},r.validate=function(t,e){var n=t.x,i=t.y;if(i<0||i>=this.board.length||n<0||n>=this.board[0].length)return!1;var r=this.board[i][n];return null==r||r.getTypeID()===d.NONE||r===this.board[e.y][e.x]},r.setUpManager=function(t){this.game=t;for(var e,i=n(this.board);!(e=i()).done;)for(var r,a=e.value,o=n(a);!(r=o()).done;){r.value.addOnClickCallback((function(e){return t.choose(e)}))}},r.shake=function(){s(this.node).to},r.create=function(t,e){t.returnAll();var n=e.gridHeight+2,i=e.gridWidth+2;this.board=[];for(var r=0;r<n;r++){this.board[r]=[];for(var o=0;o<i;o++){var s=t.getFirstItem();this.board[r].push(s),null==s||s.setTheme(e.theme);var h=o-1,u=r-1;h>=0&&h<e.gridWidth&&u>=0&&u<e.gridHeight?(null==s||s.setTypeID(e.grid[u][h]),null!=s&&s.node&&l.stopAllByTarget(s.wholeSprite),null==s||s.reScale(e.scale)):null==s||s.hide(),null==s||s.setCoordinate(new a(o,r)),null==s||s.node.setPosition(0,0),null==s||s.fadeIn(.05*Math.abs(r-e.gridHeight-1)),null==s||s.moveToRealPositionWithPadding(e,!0,.05*Math.abs(r-e.gridHeight-1),"sineOut")}}},r.shuffle=function(){var t,e=this;if(console.log("shuffle"),!this.shuffling){this.shuffling=!0;var i=[];null==(t=this.game)||t.stopHint();for(var r,o=n(this.board);!(r=o()).done;)for(var s,l=r.value,h=n(l);!(s=h()).done;){var u=s.value;u.getTypeID()!==d.NONE&&i.push(u)}for(var c=i.length-1;c>0;c--){var g=Math.floor(Math.random()*(c+1)),p=[i[g],i[c]];i[c]=p[0],i[g]=p[1]}for(var v=0,m=0;m<this.board.length;m++)for(var P=0;P<this.board[m].length;P++)if(this.board[m][P].getTypeID()!==d.NONE){var T=i[v++];this.board[m][P]=T,T.setCoordinate(new a(P,m))}for(var w,y=n(this.board);!(w=y()).done;)for(var b,R=w.value,S=n(R);!(b=S()).done;){var E;b.value.moveToRealPositionWithPadding(null==(E=this.game)?void 0:E.currentLevel,!0,0,"expoInOut",1)}Promise.all(f.animTile).then((function(){e.shuffling=!1}))}},r.addSubTile=function(t,e,n){var i=e.layer.get(n);if(i)for(var r=0;r<e.gridHeight;r++)for(var a=0;a<e.gridWidth;a++){var o;if(1===(null==(o=i[r])?void 0:o[a])){var s=t.getFirstItem(),l=this.board[r+1][a+1];null==l||l.attachSubType(s,n)}}},r.drawPath=function(t,e){for(var n=0;n<t.length-1;n++){var i=t[n],r=this.board[i.y][i.x].node.getPosition().toVec2(),a=t[n+1],o=this.board[a.y][a.x].node.getPosition().toVec2(),s=e.getFirstItem();console.log("from: ",r,"to: ",o),null==s||s.createPath(r,o),console.log("draw path from",i,"to",a)}},r.putStar=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=this.board[i.y][i.x].node.getPosition().clone(),a=e.getFirstItem();0!=n&&n!=t.length-1||null==a||a.firstAndLastMatch(),null==a||a.putAt(r)}},i}(h))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/BombFail.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,o,e,u,i;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.Popup},function(n){u=n.UImanager},function(n){i=n.BaseTurn}],execute:function(){o._RF.push({},"368e0/pCuFEu7KMmIDlH5yo","BombFail",void 0);n("BombFail",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var i=o.prototype;return i.onEnter=function(){this.game.ispause=!0,this.game.turnOffInput(),u.togglePauseButton(!1),this.game.unChoose(),console.log("Fail"),u.showPopup(e.BOOMPOPUP,!0,this.game.currentNumber())},i.onExit=function(){},i.onUpdate=function(){},o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/boom-popup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts"],(function(e){var o,t,r,i,n,l,p,a;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,p=e.Label},function(e){a=e.BasePopup}],execute:function(){var c,u,s,f,b;n._RF.push({},"fd57cpWbDNGSJX2WuMUcQu5","boom-popup",void 0);var h=l.ccclass,v=l.property;e("BoomFail",(c=h("BoomFail"),u=v(p),c((b=o((f=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return o=e.call.apply(e,[this].concat(n))||this,r(o,"level",b,i(o)),o}return t(o,e),o.prototype.onPopupShow=function(e){this.level.string="LEVEL "+e},o}(a)).prototype,"level",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=f))||s));n._RF.pop()}}}));

System.register("chunks:///_virtual/BoomDefuseItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(e){var t,i,n,o,r,a,s,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Animation,l=e.Vec3},function(e){c=e.SubType},function(e){u=e.default}],execute:function(){var p,f,h,m,y;r._RF.push({},"c5603FwifxAj4rdveJjR9py","BoomDefuseItem",void 0);var d=a.ccclass,v=a.property;e("BoomDefuseItem",(p=d("BoomDefuseItem"),f=v(s),p((y=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"anim",y,o(t)),t}return i(t,e),t.prototype.onUse=function(){var t=this;if(!this.clicked){for(var i,n,o=[],r=0,a=this.game.board.board;r<a.length;r++){var u=a[r];o.push.apply(o,u.filter((function(e){return e.getSubtileList().has(c.BOOM)})))}if(e.prototype.onUse.call(this),o.length>0&&this.quantity>0)this.quantity-=1,this.textChange(),o[0].detachSubType(c.BOOM),this.anim.node.active=!0,this.anim.node.setWorldPosition(o[0].node.worldPosition),o[0].itemTypeSprite.node.setScale(new l(0)),null==(i=this.anim)||i.play(),null==(n=this.anim)||n.once(s.EventType.FINISHED,(function(){t.anim.node.active=!1,o[0].shrink()}))}},t}(u)).prototype,"anim",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/BoomPool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,r,s,a,c,d,l,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,d=e.Node,l=e.Animation,h=e.Component}],execute:function(){var u,f,p,m,N,v,y;a._RF.push({},"250acO6i6VM/K3U0sNwRWKT","BoomPool",void 0);var g=c.ccclass,A=c.property;e("BoomPool",(u=g("BoomPool"),f=A(d),p=A(d),u((v=t((N=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"firstNode",v,o(t)),n(t,"secondNode",y,o(t)),t.firstAnimationNodes=[],t.secondAnimationNodes=[],t}i(t,e);var a=t.prototype;return a.start=function(){this.initializeNodes(),this.playAnimationSequence()},a.initializeNodes=function(){if(!this.firstNode){var e=this.node.getChildByName("first");if(!e)throw new Error("Child node 'first' not found");this.firstNode=e,this.firstNode.active=!1}if(!this.secondNode){var t=this.node.getChildByName("second");if(!t)throw new Error("Child node 'second' not found");this.secondNode=t,this.secondNode.active=!1}if(this.firstNode){this.firstAnimationNodes=[];for(var i=0;i<this.firstNode.children.length;i++){var n=this.firstNode.children[i];n.getComponent(l)&&this.firstAnimationNodes.push(n)}}if(this.secondNode){this.secondAnimationNodes=[];for(var o=0;o<this.secondNode.children.length;o++){var r=this.secondNode.children[o];r.getComponent(l)&&this.secondAnimationNodes.push(r)}}},a.playAnimationSequence=function(){this.playFirstAnimations().then((function(){}))},a.playFirstAnimations=function(){var e=r(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.firstAnimationNodes.length){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.firstNode.active=!0,t=[],this.firstAnimationNodes.forEach((function(e){var i=e.getComponent(l);if(i&&i.clips.length>0){e.active=!0;var n=new Promise((function(e){i.once(l.EventType.FINISHED,(function(){e()})),i.clips[0]?i.play(i.clips[0].name):e()}));t.push(n)}})),e.next=7,Promise.all(t);case 7:this.firstNode.active=!1;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.playSecondAnimations=function(){var e=r(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.secondAnimationNodes.length){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.secondNode.active=!0,t=[],this.secondAnimationNodes.forEach((function(e){var i=e.getComponent(l);if(i&&i.clips.length>0){e.active=!0;var n=new Promise((function(e){i.once(l.EventType.FINISHED,(function(){e()})),i.clips[0]&&i.play(i.clips[0].name)}));t.push(n)}})),e.next=7,Promise.all(t);case 7:this.secondNode.active=!1;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(h)).prototype,"firstNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(N.prototype,"secondNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=N))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/BoomSubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSubTile.ts","./Countdown.ts"],(function(e){var t,o,n,i,r,l,u,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,u=e.Sprite},function(e){c=e.BaseSubTile},function(e){a=e.Countdown}],execute:function(){var s,d,h,p,b,f,v,m,w;r._RF.push({},"d5f97QXjRpBK79IAO1Fuh3q","BoomSubTile",void 0);var y=l.ccclass,S=l.property;e("BoomSubTile",(s=y("BoomSubTile"),d=S(u),h=S(u),p=S(a),s((v=t((f=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(t=e.call.apply(e,[this].concat(r))||this).timer=40,n(t,"coundown",v,i(t)),n(t,"boom",m,i(t)),n(t,"cd",w,i(t)),t}o(t,e);var r=t.prototype;return r.onAttach=function(t){var o;e.prototype.onAttach.call(this,t),null==(o=t.wholeSprite)||o.addChild(this.node),this.coundown.node.active=!0,this.boom.node.active=!0},r.onDead=function(e,t,o){var n,i;null==(n=this.cd)||n.resetCountdown(),null==(i=this.tile)||null==(i=i.wholeSprite)||i.removeChild(this.node),this.coundown.node.active=!1,this.boom.node.active=!1},r.onDetach=function(){var t,o;null==(t=this.cd)||t.resetCountdown(),null==(o=this.tile)||null==(o=o.wholeSprite)||o.removeChild(this.node),this.coundown.node.active=!1,this.boom.node.active=!1,e.prototype.onDetach.call(this)},t}(c)).prototype,"coundown",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(f.prototype,"boom",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(f.prototype,"cd",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/BreakTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,l,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,u=e.Component}],execute:function(){var c,p,s,f,b,y,g,h,d,v,m;o._RF.push({},"a5fa4bY7stAEZ2ags59CBeu","BreakTile",void 0);var z=l.ccclass,B=l.property;e("BreakTile",(c=z("BreakTile"),p=B(a),s=B(a),f=B(a),b=B(a),c((h=t((g=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"top",h,n(t)),i(t,"bot",d,n(t)),i(t,"right",v,n(t)),i(t,"left",m,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},t}(u)).prototype,"top",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(g.prototype,"bot",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(g.prototype,"right",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(g.prototype,"left",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/ButterflySubTile.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d9d5e9kBRpGp7Fdbtd6hf8P","ButterflySubTile",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Combo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){var i,e,o,n,r,s,l,a,c,h,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Sprite,a=t.Node,c=t.ParticleSystem2D,h=t.Component},function(t){u=t.default}],execute:function(){var m,b,f,p,d,C,g,v,y;r._RF.push({},"4bebeCsyLJP8KXneWnzpmLu","Combo",void 0);var M=s.ccclass,P=s.property;t("Combo",(m=M("Combo"),b=P(u),f=P(l),p=P(a),m((g=i((C=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,o(i,"gm",g,n(i)),i.timer=5,i.currentTime=0,i.comboCount=0,o(i,"fill",v,n(i)),i.listSprite={},o(i,"bom",y,n(i)),i.boundOnMatchPair=null,i}e(i,t);var r=i.prototype;return r.start=function(){this.fill&&(this.fill.fillRange=1),this.gm&&(this.boundOnMatchPair=this.onMatchPair.bind(this),this.gm.onMatchPair(this.boundOnMatchPair)),this.node.active=!1;for(var t=2;t<10;t++){var i=this.node.getChildByName(""+t);i&&(this.listSprite[t]=i,i.active=!1)}},r.onDestroy=function(){this.gm&&this.boundOnMatchPair&&this.gm.offMatchPair(this.boundOnMatchPair)},r.update=function(t){this.currentTime+=t;var i=Math.min(this.currentTime/this.timer,1);this.fill&&(this.fill.fillRange=1-i),this.currentTime>this.timer&&(this.node.active=!1,this.comboCount=0,this.hideAllComboNumbers())},r.explode=function(){var t=this.bom?this.bom.getComponent(c):null;t&&t.resetSystem()},r.onMatchPair=function(){this.comboCount++,this.comboCount<2||(this.comboCount>9&&this.comboCount--,this.hideAllComboNumbers(),this.explode(),this.listSprite[this.comboCount]&&(this.listSprite[this.comboCount].active=!0),this.node.active=!0,console.log("Match pair detected! Combo count:",this.comboCount),this.resetCombo())},r.hideAllComboNumbers=function(){for(var t=2;t<10;t++)this.listSprite[t]&&(this.listSprite[t].active=!1)},r.resetCombo=function(){this.currentTime=0,this.fill&&(this.fill.fillRange=1)},i}(h)).prototype,"gm",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(C.prototype,"fill",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(C.prototype,"bom",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/continuePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts","./UImanager.ts","./global.ts","./LevelLoader.ts"],(function(t){var e,n,i,o,r,u,l,a,c,p,s,f,h,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,l=t.Button,a=t.Label,c=t.Node,p=t.Sprite},function(t){s=t.BasePopup},function(t){f=t.UImanager},function(t){h=t.Popup},function(t){m=t.LevelLoader}],execute:function(){var b,g,d,v,w,P,y,C,L;r._RF.push({},"faac8qYpV9KXp2I30ztwCOi","continuePopup",void 0);var z=u.ccclass,I=u.property;t("Continue",(b=z("Continue"),g=I(l),d=I(a),v=I(c),b((y=e((P=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,i(e,"continue",y,o(e)),i(e,"countdownlabel",C,o(e)),i(e,"fill",L,o(e)),e.timer=5,e.currentTime=0,e.cur=0,e}n(e,t);var r=e.prototype;return r.onPopupShow=function(t){var e=this.fill.getComponent(p);e&&(e.fillRange=1),this.countdownlabel.string="5",this.cur=t},r.update=function(t){this.currentTime+=t;var e=Math.min(this.currentTime/this.timer,1),n=this.fill.getComponent(p);n&&(n.fillRange=1-e);var i=Math.max(0,Math.ceil(this.timer-this.currentTime));this.countdownlabel.string=""+i,this.currentTime>=this.timer&&this.onCountdownComplete()},r.onCountdownComplete=function(){f.showPopup(h.FAILPOPUP,!0,m.getInstance().getCurrentLevelNumber())},e}(s)).prototype,"continue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(P.prototype,"countdownlabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(P.prototype,"fill",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=P))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/Countdown.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o,i,r,s,a,c,u,l,h,m;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.Sprite,u=t.director,l=t.find,h=t.Animation,m=t.Component}],execute:function(){var d,p,f,C,v;r._RF.push({},"6fdbaOrIMdOZL1cybBWtB4E","Countdown",void 0);var b=s.ccclass,w=s.property,E=t("GAME_EVENTS",{COUNTDOWN_COMPLETE:"countdown-complete",GAME_OVER:"game-over",LEVEL_WIN:"level-win",COUNTDOWN_RESET:"countdown-reset"});t("Countdown",(d=b("Countdown"),p=w(a),d((v=n((C=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(n=t.call.apply(t,[this].concat(r))||this).timer=40,n.currentTime=0,o(n,"bom",v,i(n)),n}e(n,t);var r=n.prototype;return r.start=function(){var t=this.node.getComponent(c);t&&(t.fillRange=-1),u.on(E.COUNTDOWN_RESET,this.setActive,this)},r.update=function(t){this.currentTime+=t;var n=Math.min(this.currentTime/this.timer,1),e=this.node.getComponent(c);e&&(e.fillRange=-1+n),this.currentTime>=this.timer&&this.onCountdownComplete()},r.onCountdownComplete=function(){this.enabled=!1,this.playAnimation(),this.resetCountdown(),this.node.parent.active=!1},r.setActive=function(){this.node.parent.active=!0},r.playAnimation=function(){var t=this;this.bom.active=!0;var n=this.bom.parent,e=this.bom.worldPosition,o=l("Canvas")||this.node.scene;this.bom.setParent(o),this.bom.worldPosition=e;var i=this.bom.getComponent(h);i&&(i.play(),console.log(e),i.once(h.EventType.FINISHED,(function(){t.bom.active=!1,t.bom.setParent(n),t.bom.worldPosition=e,t.scheduleOnce((function(){u.emit(E.COUNTDOWN_COMPLETE)}),.5)})))},r.resetCountdown=function(){this.currentTime=0;var t=this.node.getComponent(c);t&&(t.fillRange=-1),this.enabled=!0},r.setCountdownTime=function(t){this.timer=t,this.resetCountdown()},n}(m)).prototype,"bom",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=C))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/EndTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./BaseTurn.ts"],(function(n){var t,i,u,e,o;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){u=n.Turn},function(n){e=n.AnimationHandler},function(n){o=n.BaseTurn}],execute:function(){i._RF.push({},"7e7fdGaaZ9HxoPiuFIXzRzg","EndTurn",void 0);n("EndTurn",function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var o=i.prototype;return o.onEnter=function(){var n=this;this.game.isWin()?Promise.all(e.animList).then((function(){n.game.switchTurn(u.WIN)})):this.game.switchTurn(u.START)},o.onExit=function(){},o.onUpdate=function(){},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/fail-popup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts"],(function(e){var t,i,r,o,n,l,p,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,p=e.Label},function(e){a=e.BasePopup}],execute:function(){var c,u,s,f,h;n._RF.push({},"bc1f19BDEdJOLEwAl5uYpN5","fail-popup",void 0);var v=l.ccclass,y=l.property;e("Fail",(c=v("Fail"),u=y(p),c((h=t((f=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,r(t,"level",h,o(t)),t}return i(t,e),t.prototype.onPopupShow=function(e){this.level.string="LEVEL "+e},t}(a)).prototype,"level",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=f))||s));n._RF.pop()}}}));

System.register("chunks:///_virtual/FailTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,o,u,e,i;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){u=n.Popup},function(n){e=n.UImanager},function(n){i=n.BaseTurn}],execute:function(){o._RF.push({},"61b07ACKfhNEKxk69/h4V23","FailTurn",void 0);n("FailTurn",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var i=o.prototype;return i.onEnter=function(){this.game.turnOffInput(),e.togglePauseButton(!1),this.game.unChoose(),console.log("Fail"),e.showPopup(u.CONTINUE,!0,this.game.currentNumber())},i.onExit=function(){},i.onUpdate=function(){},o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/FillProgressBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationHandler.ts","./GameManager.ts"],(function(t){var i,e,n,s,r,l,o,a,h,c,u,d,f,g;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,o=t.Sprite,a=t.Label,h=t.UITransform,c=t.tween,u=t.Vec3,d=t.Component},function(t){f=t.AnimationHandler},function(t){g=t.default}],execute:function(){var m,p,v,b,y,z,S,w,F,P,x,B,L,T,R,A,C,M,N;r._RF.push({},"6a5a6pwZ/1Ba7vEmcx463CK","FillProgressBar",void 0);var W=l.ccclass,_=l.property;t("FillProgressBar",(m=W("FillProgressBar"),p=_(g),v=_(o),b=_(o),y=_(o),z=_(o),S=_(o),w=_(o),F=_(a),m((B=i((x=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return i=t.call.apply(t,[this].concat(r))||this,n(i,"gm",B,s(i)),n(i,"left",L,s(i)),n(i,"right",T,s(i)),n(i,"mid",R,s(i)),n(i,"star",A,s(i)),n(i,"star1",C,s(i)),n(i,"star9",M,s(i)),i.currentStar=null,i.total=0,i.currentTile=0,i.size=0,i.isFirstFill=!0,i.tailNode=null,i.currentActive=0,i.score=0,n(i,"level",N,s(i)),i}e(i,t);var r=i.prototype;return r.start=function(){var t,i,e,n,s,r;(this.left.node.setScale(0,this.left.node.scale.y,this.left.node.z),this.right.node.setScale(0,this.right.node.scale.y,this.right.node.z),this.mid.node.setScale(0,this.mid.node.scale.y,this.mid.node.z),this.tailNode=this.mid.node.getChildByName("taile"),this.size=null!=(t=null==(i=this.node.getChildByName("bar"))||null==(i=i.getComponent(h))?void 0:i.contentSize.x)?t:0,f.setFillProgressBar(this),this.currentStar=null!=(e=null==(n=this.star)?void 0:n.node)?e:null,this.gm)&&(this.total=null!=(s=null==(r=this.gm)||null==(r=r.currentLevel)?void 0:r.getTileNum())?s:0,console.log(this.total),this.level.string="Lvl "+this.gm.currentNumber())},r.onTilesMatched=function(t){console.log("Tiles matched!"),this.updateProgressBar()},r.updateProgressBar=function(){if(!(this.mid.node.scale.x>9||this.total<=0||this.size<=0)){var t=18/this.total;this.isFirstFill&&t>0&&(this.showLeft(),this.showRight(),this.isFirstFill=!1),this.updateMidWidth(t),this.checkActive()}},r.isLastStar=function(){var t;return this.currentStar==(null==(t=this.star1)?void 0:t.node)},r.updateTillWin=function(){var t,i;this.updateMidWidth(9-this.mid.node.scale.x),this.star.node.active=!0,this.star9.node.active=!0,this.star1.node.active=!0,this.currentStar=null!=(t=null==(i=this.star1)?void 0:i.node)?t:null},r.checkActive=function(){var t,i,e,n;this.mid.node.scale.x>=4.5&&(this.star.node.active=!0,this.currentStar=null!=(t=null==(i=this.star9)?void 0:i.node)?t:null);this.mid.node.scale.x>=6&&(this.star9.node.active=!0,this.currentStar=null!=(e=null==(n=this.star1)?void 0:n.node)?e:null);this.mid.node.scale.x>=7.4&&(this.star1.node.active=!0)},r.showLeft=function(){this.left.node.setScale(1,this.left.node.scale.y,this.left.node.scale.z)},r.updateMidWidth=function(t){var i=this;c(this.mid.node).to(.3,{scale:new u(t+this.mid.node.scale.x,this.mid.node.scale.y,this.mid.node.scale.z)},{onUpdate:function(){i.updateRightPosition()}}).start()},r.updateRightPosition=function(){if(this.right&&this.mid){var t=this.mid.node.getComponent(h);if(t){var i=t.contentSize.x*this.mid.node.scale.x,e=t.anchorX,n=this.mid.node.position.x+i*(1-e);this.right.node.setPosition(n,this.right.node.position.y,this.right.node.position.z)}}},r.showRight=function(){this.updateRightPosition(),this.right.node.setScale(1,this.right.node.scale.y,this.right.node.scale.z)},r.resetProgressBar=function(){var t,i;this.score=0,this.currentTile=0,this.isFirstFill=!0,this.left.node.setScale(0,this.left.node.scale.y,this.left.node.z),this.right.node.setScale(0,this.right.node.scale.y,this.right.node.z),this.mid.node.setScale(0,this.mid.node.scale.y,this.mid.node.z),this.star.node.active=!1,this.star1.node.active=!1,this.star9.node.active=!1,this.currentStar=null!=(t=null==(i=this.star)?void 0:i.node)?t:null},r.setTotal=function(t){this.total=t},r.setLv=function(t){this.level.string="Lvl "+t},i}(d)).prototype,"gm",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(x.prototype,"left",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(x.prototype,"right",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(x.prototype,"mid",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(x.prototype,"star",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(x.prototype,"star1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(x.prototype,"star9",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(x.prototype,"level",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=x))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"066a2a7XoVHzJHXDKi1vGjH","GameConfig",void 0);e("default",{TileSize:85});t._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./Board.ts","./LevelLoader.ts","./PathPool.ts","./StarPool.ts","./TilePool.ts","./SubTilePool.ts","./BaseTurn.ts","./EndTurn.ts","./LoadTurn.ts","./MatchTurn.ts","./StartTurn.ts","./Countdown.ts","./AdsTurn.ts","./BombFail.ts","./FailTurn.ts","./PauseTurn.ts","./WinTurn.ts","./UImanager.ts","./ItemManager.ts"],(function(t){var e,n,i,r,o,s,a,u,l,h,c,f,d,v,g,T,P,p,L,m,C,w,b,I,M,E,O,A,y,S,z,D,N,B,U,H,W;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.assertThisInitialized,r=t.initializerDefineProperty,o=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,u=t.view,l=t.Vec3,h=t.director,c=t.find,f=t.Component,d=t.tween,v=t.Color},function(t){g=t.Item,T=t.Turn,P=t.SUBTILE_PATH,p=t.TileType},function(t){L=t.default},function(t){m=t.LevelLoader},function(t){C=t.default},function(t){w=t.default},function(t){b=t.default},function(t){I=t.default},function(t){M=t.BaseTurn},function(t){E=t.EndTurn},function(t){O=t.LoadTurn},function(t){A=t.MatchTurn},function(t){y=t.StartTurn},function(t){S=t.GAME_EVENTS},function(t){z=t.AdsTurn},function(t){D=t.BombFail},function(t){N=t.FailTurn},function(t){B=t.PauseTurn},function(t){U=t.WinTurn},function(t){H=t.UImanager},function(t){W=t.ItemManager}],execute:function(){var F,_,R,k,V,x,G,j,K,Y,q,J,Q;s._RF.push({},"d7cedYkadBLIrlmBMhdIKaL","GameManager",void 0);var X=a.ccclass,Z=a.property;t("default",(F=X("GameManager"),_=Z(b),R=Z(Map),k=Z(W),V=Z(C),x=Z(w),F((K=e((j=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).levelLoader=m.getInstance(),e.currentLevel=void 0,e.time=0,e.ispause=!1,e.turnList=new Map,e.eventTarget=new EventTarget,e.currentTurn=new M(i(e)),e.board=new L,e.matchPair=[],r(e,"tilePool",K,i(e)),r(e,"subtilePool",Y,i(e)),r(e,"itemManager",q,i(e)),r(e,"pathPool",J,i(e)),r(e,"starPool",Q,i(e)),e.firstChosen=null,e.secondChosen=null,e.hintPath=[],e.hintPoint=[],e.hintTile=[],e.isgameOver=!1,e}n(e,t);var s=e.prototype;return s.onMatchPair=function(t){this.eventTarget.addEventListener("matchPair",t)},s.offMatchPair=function(t){this.eventTarget.removeEventListener("matchPair",t)},s.emitMatchPair=function(){this.eventTarget.dispatchEvent(new Event("matchPair"))},s.stopHint=function(){var t;if(0!=this.hintPath.length){for(var e,n=o(this.hintPath);!(e=n()).done;){var i=e.value;i.updateVisual(i.node)}for(var r,s=function(){var t=r.value;d(t.circle).to(.2,{color:new v(255,255,255,0)}).call((function(){t.kill(),t.circle.color=new v(255,255,255,255)})).start()},a=o(this.hintPoint);!(r=a()).done;)s();this.hintTile.forEach((function(t){t.onUnHint()})),this.hintPath=[],this.hintPoint=[],this.hintTile=[],null==(t=this.itemManager)||null==(t=t.itemList.get(g.HINT))||t.enableFunction()}},s.start=function(){var t=this;this.levelLoader.restartLevel().then((function(){var e,n,i;t.currentLevel=t.levelLoader.getCurrentLevel(),null==(e=t.tilePool)||e.initialize(t),null==(n=t.pathPool)||n.initialize(t),null==(i=t.starPool)||i.initialize(t);var r=u.getVisibleSize();r.height>=r.width?(t.node.setPosition(new l(0,0)),t.currentLevel.scale=r.width/(t.currentLevel.gridWidth+3)/80):(t.node.setPosition(new l(0,-50)),t.currentLevel.scale=r.height/(t.currentLevel.gridHeight+3)/80),t.currentLevel.tileSize=80*t.currentLevel.scale+5,t.subTilePoolInit(),t.turnInit(),u.on("canvas-resize",t.resize,t),h.on(S.COUNTDOWN_COMPLETE,(function(){t.switchTurn(T.BOOM)}),t)}))},s.resize=function(){var t,e=this,n=u.getVisibleSize();n.height>=n.width?(this.node.setPosition(new l(0,0)),this.currentLevel.scale=n.width/(this.currentLevel.gridWidth+3)/80):(this.node.setPosition(new l(0,-50)),this.currentLevel.scale=n.height/(this.currentLevel.gridHeight+3)/80),this.currentLevel.tileSize=80*this.currentLevel.scale+5,null==(t=this.board)||t.board.forEach((function(t){t.forEach((function(t){t.reScale(e.currentLevel.scale),t.moveToRealPositionWithPadding(e.currentLevel,!1)}))}))},s.subTilePoolInit=function(){for(var t,e=this,n=c(P),i=o(null==n?void 0:n.children);!(t=i()).done;){var r=t.value;this.subtilePool.set(r.name,null==r?void 0:r.getComponent(I))}this.subtilePool.forEach((function(t){t.initialize(e)}))},s.isWin=function(){for(var t,e=o(this.board.board);!(t=e()).done;)for(var n,i=t.value,r=o(i);!(n=r()).done;){if(n.value.getTypeID()!=p.NONE)return!1}return!0},s.turnInit=function(){this.turnList.set(T.START,new y(this)),this.turnList.set(T.MATCH,new A(this)),this.turnList.set(T.END,new E(this)),this.turnList.set(T.LOAD,new O(this)),this.turnList.set(T.FAIL,new N(this)),this.turnList.set(T.WIN,new U(this)),this.turnList.set(T.PAUSE,new B(this)),this.turnList.set(T.BOOM,new D(this)),this.turnList.set(T.ADS,new z(this)),this.switchTurn(T.LOAD)},s.isSame=function(t,e){return t.getCoordinate().x===e.getCoordinate().x&&t.getCoordinate().y===e.getCoordinate().y},s.sameType=function(t,e){return t.getTypeID()===e.getTypeID()},s.adsPop=function(){this.switchTurn(T.ADS),console.log(this.currentTurn)},s.choose=function(t){var e;if(t.getTypeID()!=p.NONE){var n,i,r;if(console.log(t.getCoordinate()),!this.firstChosen||!this.sameType(this.firstChosen,t))return null==(n=this.firstChosen)||n.onUnchoose(),this.firstChosen=t,this.firstChosen.onChoose(),this.stopHint(),void console.log("first: ",this.firstChosen.getCoordinate(),"second: ",null==(i=this.secondChosen)?void 0:i.getCoordinate());if(this.isSame(t,this.firstChosen))return null==(r=this.firstChosen)||r.onChoose(),void this.unChoose();this.secondChosen=t,console.log("first: ",this.firstChosen.getCoordinate(),"second: ",null==(e=this.secondChosen)?void 0:e.getCoordinate()),this.matchPair.push({tile1:this.firstChosen,tile2:this.secondChosen}),this.switchTurn(T.MATCH)}},s.unChoose=function(){var t;null==(t=this.firstChosen)||t.onUnchoose(),this.firstChosen=null,this.secondChosen=null},s.match=function(){var t,e;this.matchPair.length>0&&(null!=(t=this.board)&&t.canMatch(this.matchPair[0].tile1,this.matchPair[0].tile2)&&this.emitMatchPair(),null==(e=this.board)||e.match(this.matchPair[0].tile1,this.matchPair[0].tile2),this.matchPair.shift())},s.currentNumber=function(){return this.levelLoader.getCurrentLevelNumber()},s.poolInit=function(){},s.createBoard=function(t){var e,n,i;this.hintPath=[],this.hintPoint=[],this.hintTile=[],this.subtilePool.forEach((function(t){t.returnAll()})),null==(e=this.tilePool)||e.returnAll(),null==(n=this.itemManager)||n.intialize(this),null==(i=this.board)||i.create(this.tilePool,t);for(var r,s=o(this.subtilePool);!(r=s()).done;){var a,u=r.value;null==(a=this.board)||a.addSubTile(u[1],this.currentLevel,u[0])}this.currentLevel=this.levelLoader.getCurrentLevel()},s.switchTurn=function(t){this.isgameOver||(this.currentTurn&&this.currentTurn.onExit(),this.currentTurn=this.turnList.get(t),this.currentTurn.onEnter())},s.hideItem=function(){this.itemManager.node.active=!1},s.showItem=function(){this.itemManager.node.active=!0},s.turnOnInput=function(){var t;null==(t=this.board)||t.setUpManager(this)},s.restart=function(){var t=this;this.ispause=!1,this.isgameOver=!1,H.togglePauseButton(!0),H.hideAllPopups(),this.levelLoader.checkNeedToChange("failed"),this.levelLoader.restartLevel().then((function(){h.emit(S.COUNTDOWN_RESET),t.switchTurn(T.LOAD)}))},s.pause=function(){this.ispause=!0,H.hideAllPopups(),H.togglePauseButton(!1),this.switchTurn(T.PAUSE)},s.rescue=function(){this.isgameOver=!1,this.ispause=!1,H.hideAllPopups(),H.togglePauseButton(!0),this.time+=65,this.turnOnInput(),this.switchTurn(T.START)},s.unPause=function(){this.ispause=!1,H.hideAllPopups(),H.togglePauseButton(!0),this.turnOnInput(),this.showItem(),this.switchTurn(T.START)},s.moveOn=function(){var t=this;this.isgameOver=!1,this.ispause=!1,H.togglePauseButton(!0),H.hideAllPopups(),this.levelLoader.checkNeedToChange("completed"),this.levelLoader.changeLevel().then((function(){t.switchTurn(T.LOAD)}))},s.turnOffInput=function(){var t;null==(t=this.board)||t.resetInput()},s.onDestroy=function(){h.off(S.COUNTDOWN_COMPLETE,(function(){}),this)},e}(f)).prototype,"tilePool",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(j.prototype,"subtilePool",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),q=e(j.prototype,"itemManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(j.prototype,"pathPool",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(j.prototype,"starPool",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=j))||G));s._RF.pop()}}}));

System.register("chunks:///_virtual/global.ts",["cc","./GameConfig.ts"],(function(e){var t,i,n,o,T;return{setters:[function(e){t=e.cclegacy,i=e.Vec2,n=e.view,o=e.Vec3},function(e){T=e.default}],execute:function(){e({getComboCount:function(e){return"resources/animation/"+e},getScale:function(){var e=n.getVisibleSize(),t=e.width/720,i=e.width/1280,T=Math.max(t,i);return new o(T,T)},getTilePath:function(e,t){return e==r.ROCKET?"AllTiles/rocket/spriteFrame":"AllTiles/"+(t+String(e))+"/spriteFrame"},getTilePosition:function(e,t,n,o,r){var P=o*T.TileSize/2,u=n*T.TileSize/2,E=t*T.TileSize+T.TileSize/2-P,l=-(e*T.TileSize+T.TileSize/2-u);return new i(E,l)},getTilePositionByLevel:function(e,t,n,o){void 0===o&&(o=0);var T=n.tileSize,r=(n.gridWidth+2*o)*T,P=(n.gridHeight+2*o)*T;return new i(e*T+T/2-r/2,-(t*T+T/2-P/2))}}),t._RF.push({},"99b72YbvlRKuojoDTLGRoZ0","global",void 0);e("SubType",function(e){return e.BOOM="BOOM",e.GRAVITY="GRAVITY",e.ROCKET="ROCKET",e.BUTTERFLY="BUTTERFLY",e}({})),e("Turn",function(e){return e[e.LOAD=0]="LOAD",e[e.START=1]="START",e[e.MATCH=2]="MATCH",e[e.END=3]="END",e[e.PAUSE=4]="PAUSE",e[e.FAIL=5]="FAIL",e[e.WIN=6]="WIN",e[e.BOOM=7]="BOOM",e[e.ADS=8]="ADS",e}({}));var r=e("TileType",function(e){return e[e.NONE=-1]="NONE",e[e.TYPE0=0]="TYPE0",e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4",e[e.TYPE5=5]="TYPE5",e[e.TYPE6=6]="TYPE6",e[e.TYPE7=7]="TYPE7",e[e.ROCKET=8]="ROCKET",e}({}));e("Popup",function(e){return e.FAILPOPUP="failPopUp",e.BOOMPOPUP="boomPopup",e.WINPOPUP="victoryPopup",e.PAUSEPOPUP="pausePopup",e.ADSPOPUP="adsPopup",e.CONTINUE="continuePopup",e}({})),e("Theme",function(e){return e.NONE="",e.CAKE="Img0_",e.FRUIT="Img1_",e.FISH="Img2_",e.CHAR="Img3_",e.VEHICLE="Img4_",e.ANIMAL="Img5_",e.FASHION="Img6_",e.SHELL="Img7_",e.BUTTERFLY="Img8_",e.DRINK="Img9_",e}({}));e("FIREWORK_PATH","AllTiles/firework/spriteFrame");e("SUBTILE_PATH","Canvas/SubtilePool"),e("ROCKET_NODE_PATH","Canvas/SubtilePool/RocketPool"),e("GRAVITY_NODE_PATH","Canvas/SubtilePool/GravityPool"),e("BOOM_NODE_PATH","Canvas/SubtilePool/BoomPool"),e("Direction",function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.RIGHT=2]="RIGHT",e[e.DOWN=3]="DOWN",e[e.LEFT=4]="LEFT",e}({})),e("directionValue",{none:new i(0,0),up:new i(0,1),right:new i(1,0),down:new i(0,-1),left:new i(-1,0)}),e("Item",function(e){return e.HINT="HintItem",e.BOOM="BoomDefuseItem",e.SHUFFLE="ShuffleItem",e.ROCKET="RocketItem",e.SUPERROCKET="SuperRocketItem",e}({})),e("ROCKET_PATH","sprite/prop_rocket/spriteFrame");t._RF.pop()}}}));

System.register("chunks:///_virtual/GoodPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){var i,n,e,o,r,a,s,c,u,l,h,p,g;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.SpriteFrame,c=t.Node,u=t.Vec3,l=t.Sprite,h=t.tween,p=t.Component},function(t){g=t.default}],execute:function(){var d,f,m,b,v,y,w,P,M,C,S,O,z;r._RF.push({},"d3896edoUNFH6c8V2svOnF6","GoodPopup",void 0);var L=a.ccclass,F=a.property;t("Good",(d=L("Good"),f=F(g),m=F([s]),b=F([s]),v=F(c),y=F(c),d((M=i((P=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"gm",M,o(i)),i.timer=5,i.currentTime=0,i.comboCount=0,e(i,"listSprite",C,o(i)),e(i,"listLight",S,o(i)),i.boundOnMatchPair=null,e(i,"light",O,o(i)),e(i,"gud",z,o(i)),i.origin=new u,i}n(i,t);var r=i.prototype;return r.start=function(){this.gm&&(this.boundOnMatchPair=this.onMatchPair.bind(this),this.gm.onMatchPair(this.boundOnMatchPair)),this.node.active=!1,this.origin=this.node.position.clone()},r.onDestroy=function(){this.gm&&this.boundOnMatchPair&&this.gm.offMatchPair(this.boundOnMatchPair)},r.update=function(t){this.currentTime+=t,this.currentTime>this.timer&&(this.node.active=!1,this.comboCount=0)},r.onMatchPair=function(){var t,i;if(this.comboCount++,!(this.comboCount<2)){var n=this.comboCount-2,e=Math.min(n,this.listSprite.length-1),o=null==(t=this.gud)?void 0:t.getComponent(l);o&&e>=0&&e<this.listSprite.length&&(o.spriteFrame=this.listSprite[e]);var r=null==(i=this.light)?void 0:i.getComponent(l);r&&e>=0&&e<this.listLight.length&&(r.spriteFrame=this.listLight[e]),this.gud.active=!1,this.light.active=!1,this.node.active=!0,this.playSequentialAnimation(),this.resetCombo()}},r.playSequentialAnimation=function(){var t=this;this.showLight((function(){t.showPic((function(){t.moveNodeUp()}))}))},r.showLight=function(t){this.light.active=!0,this.light.scale=new u(0,0,1),h(this.light).to(.1,{scale:new u(1,1,1)},{easing:"backOut"}).call((function(){t&&t()})).start()},r.showPic=function(t){this.gud.active=!0,this.gud.scale=new u(0,0,1),h(this.gud).to(.3,{scale:new u(1,1,1)},{easing:"backOut"}).call((function(){t&&t()})).start()},r.moveNodeUp=function(){var t=this;this.node.setPosition(this.origin.clone());var i=this.node.position.clone(),n=new u(i.x,i.y+30,i.z);h(this.node).to(.3,{position:n},{easing:"quadOut"}).delay(.2).call((function(){t.gud.active=!1,t.light.active=!1,t.node.position=i})).start()},r.resetCombo=function(){this.currentTime=0},i}(p)).prototype,"gm",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(P.prototype,"listSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=i(P.prototype,"listLight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=i(P.prototype,"light",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(P.prototype,"gud",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=P))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/GravityManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts"],(function(e){var t,r,a,i,n,c,o;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,a=e._decorator,i=e.Vec2,n=e.Component},function(e){c=e.directionValue,o=e.Direction}],execute:function(){var s,u;r._RF.push({},"82dfaktVwVLkrbOVb+WvtfO","GravityManager",void 0);var l=a.ccclass;a.property,e("GravityManager",l("GravityManager")(((u=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.setCircle=function(e){r.gravityChangable=!!e},r.changeGravity=function(e){switch(e){case o.DOWN:r.direction=c.down;break;case o.UP:r.direction=c.up;break;case o.LEFT:r.direction=c.left;break;case o.RIGHT:r.direction=c.right;break;default:r.direction=c.none}},r.setUpManager=function(e){this.changeGravity(o.DOWN)},r.cycleGravity=function(){if(this.gravityChangable){var e;switch(this.getCurrentDirection()){case o.UP:e=o.RIGHT;break;case o.RIGHT:e=o.DOWN;break;case o.DOWN:e=o.LEFT;break;case o.LEFT:e=o.UP;break;default:e=o.NONE}this.changeGravity(e)}},r.getCurrentDirection=function(){var e=this.direction;return e.equals(c.up)?o.UP:e.equals(c.right)?o.RIGHT:e.equals(c.down)?o.DOWN:e.equals(c.left)?o.LEFT:o.NONE},r}(n)).direction=new i,u.gravityChangable=!0,s=u))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/GravitySubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./GameManager.ts","./GravityManager.ts","./BaseSubTile.ts"],(function(t){var e,r,n,i,o,a,c,l,u;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,i=t.Vec2},function(t){o=t.Direction,a=t.TileType},function(t){c=t.default},function(t){l=t.GravityManager},function(t){u=t.BaseSubTile}],execute:function(){var f;r._RF.push({},"26465GJPW5B5o/Iu8qhYkx4","GravitySubTile",void 0);var s=n.ccclass;n.property,t("GravitySubTile",s("GravitySubtile")(f=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).changeAfterMove=!1,e}e(r,t);var n=r.prototype;return n.onAttach=function(e){t.prototype.onAttach.call(this,e)},n.onDead=function(t,e,r){if(this.tile&&r&&r.tile){var n=this.tile.getCoordinate(),i=r.tile.getCoordinate();if(e){var o=n.x*l.direction.x+n.y*l.direction.y,a=i.x*l.direction.x+i.y*l.direction.y>o?[r,this]:[this,r],c=a[0],u=a[1];c.tile.kill(),u.tile.kill(),c.resolveGravity(t)&&l.cycleGravity()}}},n.resolveGravity=function(t){var e,r=l.getCurrentDirection();if(r===o.NONE)return!1;console.log(r);var n=null==(e=this.node.parent)||null==(e=e.getComponent(c))?void 0:e.currentLevel;if(!n)return!1;var u=t.board.length,f=t.board[0].length,s=l.direction.x,v=l.direction.y,d=s+v>0,y=function(t){return Array.from({length:t},(function(t,e){return e})).slice(1,t-1)},g=!1;if(0!==v)for(var h=function(e){for(var r=y(u).map((function(r){return t.board[r][e]})),o=r.filter((function(t){return t.getTypeID()===a.NONE})),c=r.filter((function(t){return t.getTypeID()!==a.NONE})),l=d?[].concat(o,c):[].concat(c,o),f=0;f<l.length;f++){var s=f+1,v=l[f];t.board[s][e]!==v&&(g=!0),t.board[s][e]=v,v.setCoordinate(new i(e,s)),v.moveToRealPositionWithPadding(n)}},p=0;p<f;p++)h(p);else for(var b=function(e){for(var r=y(f).map((function(r){return t.board[e][r]})),o=r.filter((function(t){return t.getTypeID()===a.NONE})),c=r.filter((function(t){return t.getTypeID()!==a.NONE})),l=d?[].concat(o,c):[].concat(c,o),u=0;u<l.length;u++){var s=u+1,v=l[u];t.board[e][s]!==v&&(g=!0),t.board[e][s]=v,v.setCoordinate(new i(s,e)),v.moveToRealPositionWithPadding(n)}},T=0;T<u;T++)b(T);return g},r}(u))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/HintItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(t){var n,e,o,i,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator},function(t){i=t.TileType},function(t){a=t.default}],execute:function(){var r;e._RF.push({},"129f9RmAKxFALGZ3rb0g4tX","HintItem",void 0);var l=o.ccclass;o.property,t("default",l("HintItem")(r=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.onUse=function(){var n,e;if(!(this.clicked||this.locked||null!=(n=this.game)&&n.isgameOver||(t.prototype.onUse.call(this),this.game.hintPath.length>0||0==this.quantity))){var o=null==(e=this.game)||null==(e=e.board)?void 0:e.board;if(o){var a=!1;t:for(var r=0;r<o.length;r++)for(var l=0;l<o[0].length;l++){var s=o[r][l];if(s&&s.getTypeID()!=i.NONE)for(var h=r;h<o.length;h++)for(var u=r===h?l+1:0;u<o[0].length;u++){var g,c=o[h][u];if(c&&c.getTypeID()!=i.NONE&&(s!==c&&null!=(g=this.game)&&null!=(g=g.board)&&g.canMatch(s,c))){this.showHintEffect(s,c),a=!0;break t}}}a&&(this.quantity--,this.textChange())}}},o.showHintEffect=function(t,n){var e,o,i,a;null==(e=this.game)||e.unChoose();null==(o=this.game)||o.board;var r=null==(i=this.game)||null==(i=i.board)?void 0:i.getPath(t,n),l=this.getTurnPoints(r.path);null==(a=this.game)||a.hintTile.push(t,n),t.onHint(),n.onHint(),this.drawPath(l,this.game.pathPool),this.putStar(l,this.game.starPool)},o.getTurnPoints=function(t){if(t.length<2)return t;for(var n=[t[0]],e=1;e<t.length-1;e++){var o=t[e-1],i=t[e],a=t[e+1],r=i.x-o.x,l=i.y-o.y,s=a.x-i.x,h=a.y-i.y;r===s&&l===h||n.push(i)}return n.push(t[t.length-1]),n},o.drawPath=function(t,n){for(var e=0;e<t.length-1;e++){var o,i,a=t[e],r=(null==(o=this.game.board)?void 0:o.board[a.y][a.x]).node.getPosition().toVec2(),l=t[e+1],s=(null==(i=this.game.board)?void 0:i.board[l.y][l.x]).node.getPosition().toVec2(),h=n.getFirstItem();console.log("from: ",r,"to: ",s),null==h||h.createPath(r,s,!1),this.game.hintPath.push(h),console.log("draw path from",a,"to",l)}},o.putStar=function(t,n){for(var e=0;e<t.length;e++){var o,i,a=t[e],r=(null==(o=this.game)||null==(o=o.board)?void 0:o.board[a.y][a.x]).node.getPosition().clone(),l=n.getFirstItem();null==l||l.putAtForHint(r),null==(i=this.game)||i.hintPoint.push(l)}},e}(a))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(t){var e,i,n,o,a,l,r,c,s,u,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,r=t._decorator,c=t.Node,s=t.Component},function(t){u=t.Item},function(t){m=t.default}],execute:function(){var f,g,h,v,p,I,d;l._RF.push({},"af1dc3vGOxM0YqhvfMwuQjP","ItemManager",void 0);var L=r.ccclass,y=r.property;t("ItemManager",(f=L("ItemManager"),g=y(c),h=y(c),f((I=e((p=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this).game=null,e.itemList=new Map,n(e,"bg",I,o(e)),n(e,"botOverlay",d,o(e)),e}i(e,t);var l=e.prototype;return l.onLoad=function(){this.cacheAllItem()},l.hideExcept=function(t){for(var e,i=a(this.itemList);!(e=i()).done;){var n=e.value;n[0]!=t&&(n[1].node.active=!1)}},l.showAll=function(){this.bg.active=!0;for(var t,e=a(this.itemList);!(t=e()).done;){t.value[1].node.active=!0}},l.intialize=function(t){console.log(this.itemList),t&&(this.game=t),console.log("DONE INIT, GAME MANAGER: ",t);for(var e,i=a(this.itemList);!(e=i()).done;){var n=e.value,o=Number(localStorage.getItem(n[0]));localStorage.getItem(n[0])||(o=10),0==o&&localStorage.setItem(n[0],"0"),console.log(o),n[1].setquantity(o),n[1].init(),t&&(n[1].game=this.game,console.log("init item: ",n[1],n[1].game))}},l.cacheAllItem=function(){var t=this;Object.values(u).forEach((function(e){var i=t.node.getChildByName(e);i.getComponent(m).itemManager=t,i&&t.itemList.set(e,i.getComponent(m)),console.log("cached: ",e)}))},l.useItem=function(t){var e;if(null==(e=this.game)||!e.isgameOver){var i=this.itemList.get(t);null==i||i.onUse(),0==(null==i?void 0:i.quantity)&&i.stopFunction(),localStorage.setItem(t,String(null==i?void 0:i.quantity))}},l.useHint=function(){var t;this.useItem(u.HINT),null==(t=this.itemList.get(u.HINT))||t.stopFunction()},l.useBoom=function(){this.useItem(u.BOOM)},l.useShuffle=function(){this.useItem(u.SHUFFLE)},l.useRocket=function(){this.useItem(u.ROCKET)},l.useSuperRocket=function(){this.useItem(u.SUPERROCKET)},l.unlockItem=function(t){var e;null==(e=this.itemList.get(t))||e.unlock()},l.lockItem=function(t){var e;null==(e=this.itemList.get(t))||e.lock()},l.lockAll=function(){this.itemList.forEach((function(t){t.lock()}))},l.unlockAll=function(){this.itemList.forEach((function(t){t.unlock()}))},e}(s)).prototype,"bg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=e(p.prototype,"botOverlay",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=p))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["cc","./global.ts"],(function(i){var t,e,h;return{setters:[function(i){t=i.cclegacy,e=i.view},function(i){h=i.Theme}],execute:function(){t._RF.push({},"65509Fo80xNN5Sl/JgNMJaN","Level",void 0);i("Level",function(){function i(i,t,s,r,g,c,l,d){this.theme=h.CAKE,this.gridHeight=0,this.gridWidth=0,this.grid=[],this.time=void 0,this.tileSize=0,this.scale=0,this.gravity=0,this.circle=!1,this.layer=new Map,this.theme=r,this.gridHeight=i,this.gridWidth=t,this.grid=s,this.gravity=c,this.circle=l,this.scale=e.getVisibleSize().width/(this.gridWidth+2)/80,this.tileSize=80*this.scale+5,d&&(this.layer=d),this.time=g}var t=i.prototype;return t.change=function(i,t,h,s,r,g,c,l){this.theme=s,this.gridHeight=i,this.gridWidth=t,this.grid=h,this.gravity=g,this.circle=c;var d=e.getVisibleSize();d.height>=d.width?this.scale=e.getVisibleSize().width/(this.gridWidth+3)/80:this.scale=e.getVisibleSize().height/(this.gridHeight+3)/80,this.tileSize=80*this.scale+5,l&&(this.layer=l),this.time=r},t.getTime=function(){return this.time},t.getTileNum=function(){return this.gridHeight*this.gridWidth},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/LevelLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./Level.ts","./ShuffleLevel2.ts"],(function(e){var t,r,n,u,a,s,i,c;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,u=e.resources,a=e.JsonAsset},function(e){s=e.Theme},function(e){i=e.Level},function(e){c=e.ShuffleLevel}],execute:function(){n._RF.push({},"808700sc6VHnLXKwlOdsw7G","LevelLoader",void 0),e("LevelLoader",function(){function e(){this.currentLevel=null,this.current=1,this.needToChange=!1,this.data=null,this.shuffleLevel=null,this.maxLevel=100,this.loadLevel(this.current)}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var n=e.prototype;return n.checkNeedToChange=function(e){switch(e){case"completed":this.needToChange=!0;break;case"failed":this.needToChange=!1;break;case"skip":this.needToChange=!0}},n.loadLevelData=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n="map/map/level"+t;u.load(n,a,(function(r,n){if(r)console.error("Không load được level "+t+":",r),console.log("Test load:",r,n),e(null);else{var u=n.json;e(u)}}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadLevel=function(){var e=t(r().mark((function e(t){var n,u,a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLevelData(t);case 2:if(n=e.sent){e.next=6;break}return console.error("Không thể load level "+t),e.abrupt("return",!1);case 6:return this.data=n,this.shuffleLevel=new c(n),u=this.shuffleLevel.generateMap(),a=this.shuffleLevel.getMapLayer(u),s=this.getThemeFromString(n.Theme),this.currentLevel?this.currentLevel.change(n.GridHeight,n.GridWidth,u,s,n.Time,n.Gravity,n.Circle,a):(this.currentLevel=new i(n.GridHeight,n.GridWidth,u,s,n.Time,n.Gravity,n.Circle,a),console.log(this.currentLevel)),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getThemeFromString=function(e){switch(e.toUpperCase()){case"CAKE":return s.CAKE;case"FRUIT":return s.FRUIT;case"BUTTERFLY":return s.BUTTERFLY;case"DRINK":return s.DRINK;default:return s.CAKE}},n.changeLevel=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.needToChange){e.next=3;break}return console.log("Không cần change level"),e.abrupt("return",!1);case 3:if(!((t=this.current+1)>this.maxLevel)){e.next=7;break}return console.log("Đã hoàn thành tất cả level!"),e.abrupt("return",!1);case 7:return e.next=9,this.loadLevel(t);case 9:if(!e.sent){e.next=14;break}return this.current=t,this.needToChange=!1,e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.jumpToLevel=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<1||t>this.maxLevel)){e.next=3;break}return console.error("Level "+t+" không hợp lệ (1-"+this.maxLevel+")"),e.abrupt("return",!1);case 3:return e.next=5,this.loadLevel(t);case 5:if(!e.sent){e.next=11;break}return this.current=t,this.needToChange=!1,console.log("Jump đến level "+this.current),e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.restartLevel=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLevel(this.current);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.previousLevel=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.current<=1)){e.next=3;break}return console.log("Đã ở level đầu tiên"),e.abrupt("return",!1);case 3:return t=this.current-1,e.next=6,this.loadLevel(t);case 6:if(!e.sent){e.next=12;break}return this.current=t,this.needToChange=!1,console.log("Quay lại level "+this.current),e.abrupt("return",!0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getCurrentLevel=function(){return this.currentLevel},n.getCurrentLevelNumber=function(){return this.current},n.getNeedToChange=function(){return this.needToChange},n.getLevelData=function(){return this.data},n.getShuffleLevel=function(){return this.shuffleLevel},n.setNeedToChange=function(e){this.needToChange=e},n.setMaxLevel=function(e){this.maxLevel=e},e}()).instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./GravityManager.ts","./BaseTurn.ts"],(function(t){var e,n,r,a,u,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.Turn},function(t){a=t.AnimationHandler},function(t){u=t.GravityManager},function(t){i=t.BaseTurn}],execute:function(){n._RF.push({},"d5f4fF36RhJ4qZay0AgrkgB","LoadTurn",void 0);t("LoadTurn",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.onEnter=function(){var t,e,n,i,l,s,o;null==(t=this.game.pathPool)||t.returnAll(),null==(e=this.game.starPool)||e.returnAll(),this.game.subtilePool.forEach((function(t){t.returnAll()})),null==(n=this.game.tilePool)||n.returnAll(),this.game.unChoose(),null==(i=this.game.itemManager)||i.showAll(),this.turnOffInput(),u.setUpManager(this.game.currentLevel),this.game.time=this.game.currentLevel.getTime(),this.game.matchPair=[],this.game.createBoard(this.game.currentLevel),null==(l=a.fillProgressBar)||l.resetProgressBar(),null==(s=a.fillProgressBar)||s.setTotal(this.game.currentLevel.getTileNum()),null==(o=a.fillProgressBar)||o.setLv(this.game.currentNumber()),this.turnOnInput(),this.game.switchTurn(r.START)},i.onExit=function(){},i.turnOnInput=function(){var t;null==(t=this.game.board)||t.setUpManager(this.game)},i.turnOffInput=function(){var t;null==(t=this.game.board)||t.resetInput()},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AssetLoader.ts","./BackGround.ts","./ShuffleLevel.ts","./AnimationHandler.ts","./FillProgressBar.ts","./Board.ts","./BaseItem.ts","./BoomDefuseItem.ts","./HintItem.ts","./RocketItem.ts","./ShuffleItem.ts","./SuperRocketItem.ts","./Level.ts","./LevelLoader.ts","./ShuffleLevel2.ts","./GameManager.ts","./GravityManager.ts","./ItemManager.ts","./Path.ts","./BoomPool.ts","./PathPool.ts","./StarPool.ts","./TilePool.ts","./Star.ts","./BaseSubTile.ts","./BoomSubTile.ts","./ButterflySubTile.ts","./Countdown.ts","./GravitySubTile.ts","./Pulse.ts","./RocketSubTile.ts","./SubTilePool.ts","./SubTilePoolManager.ts","./BreakTile.ts","./Tile.ts","./Timer.ts","./AdsTurn.ts","./BaseTurn.ts","./BombFail.ts","./EndTurn.ts","./FailTurn.ts","./LoadTurn.ts","./MatchTurn.ts","./PauseTurn.ts","./StartTurn.ts","./WinTurn.ts","./Combo.ts","./GoodPopup.ts","./UImanager.ts","./adsPopup.ts","./continuePopup.ts","./basePopup.ts","./Rotate.ts","./Sand.ts","./boom-popup.ts","./fail-popup.ts","./RotateStar.ts","./victoryPopup.ts","./GameConfig.ts","./global.ts","./type.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MatchTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./BaseTurn.ts"],(function(n){var t,i,e,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){e=n.Turn},function(n){o=n.AnimationHandler},function(n){r=n.BaseTurn}],execute:function(){i._RF.push({},"517aeOebrlEc5HpaDQzdL6d","MatchTurn",void 0);n("MatchTurn",function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var r=i.prototype;return r.onEnter=function(){var n=this;for(this.game.stopHint();this.game.matchPair.length>0;)this.game.match();Promise.all(o.animTile).then((function(){Promise.all(o.animList).then((function(){n.game.switchTurn(e.END)}))}))},r.onExit=function(){},r.onUpdate=function(){},i}(r));i._RF.pop()}}}));

System.register("chunks:///_virtual/Path.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationHandler.ts"],(function(t){var e,n,o,i,a,r,l,s,c,h,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Sprite,a=t.Vec3,r=t.Color,l=t.tween,s=t.Tween,c=t.Vec2,h=t.Component},function(t){u=t.AnimationHandler}],execute:function(){var d;n._RF.push({},"acc89i+H69Gj4VYQHePnuuj","Path",void 0);var p=o.ccclass;o.property,t("Path",p("Path")(d=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).used=!1,e.headCoord=new c,e.tailCoord=new c,e}e(n,t);var o=n.prototype;return o.createPath=function(t,e,n){void 0===n&&(n=!0),this.headCoord=t,this.tailCoord=e,this.updateVisual(this.node,n)},o.calcDir=function(){var t=this.tailCoord.clone().subtract(this.headCoord.clone()),e=t.clone().normalize();return{angle:180*Math.atan2(e.y,e.x)/Math.PI,length:t.length()}},o.updateVisual=function(t,e){var n=this;void 0===e&&(e=!0);var o=t.getChildByName("Path"),s=o.getComponent(i),c=this.calcDir(),h=c.angle,d=c.length;t.angle=h-90,t.setPosition(this.headCoord.x,this.headCoord.y),console.log("length: ",d),o.setScale(new a(1,d/12)),s.color=new r(255,255,255,255),e&&u.animList.push(new Promise((function(t){l(s).delay(.1).to(.15,{color:new r(255,255,255,0)}).call((function(){s.color=new r(255,255,255,255),n.kill(),t()})).start()})))},o.isUsed=function(){return this.used},o.reSpawn=function(){this.used=!0,this.node.active=!0},o.kill=function(){this.used=!1;var t=this.node.getChildByName("Path");if(null!=t&&t.isValid){var e=t.getComponent(i);null!=e&&e.isValid&&(s.stopAllByTarget(e),e.color=new r(255,255,255,0),this.node.active=!1)}},n}(h))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/PathPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Path.ts"],(function(t){var e,r,i,n,o,a,l,u,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,l=t._decorator,u=t.Prefab,s=t.instantiate,c=t.Component},function(t){p=t.Path}],execute:function(){var f,h,d,v,P,b,m;a._RF.push({},"fb6aed0AFlLFYBJs4psdZpJ","PathPool",void 0);var y=l.ccclass,g=l.property;t("default",(f=y("PathPool"),h=g(u),d=g(Number),f((b=e((P=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"pathPrefab",b,n(e)),i(e,"size",m,n(e)),e.itemList=[],e}r(e,t);var a=e.prototype;return a.initialize=function(t){for(var e=0;e<this.size;e++){var r=s(this.pathPrefab);r&&(console.log("added child"),t.node.addChild(r)),this.itemList.push(null==r?void 0:r.getComponent(p))}this.returnAll()},a.getFirstItem=function(){for(var t,e=o(this.itemList);!(t=e()).done;){var r=t.value;if(!r.isUsed())return r.reSpawn(),r}return null},a.returnPool=function(t){t.kill()},a.returnMultiple=function(t){for(var e,r=o(t);!(e=r()).done;){e.value.kill()}},a.returnAll=function(){this.returnMultiple(this.itemList)},e}(c)).prototype,"pathPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(P.prototype,"size",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=P))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/PauseTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,u,e,o,r;return{setters:[function(n){t=n.inheritsLoose},function(n){u=n.cclegacy},function(n){e=n.Popup},function(n){o=n.UImanager},function(n){r=n.BaseTurn}],execute:function(){u._RF.push({},"4917fGp/FdAZ5CjyBwSBrh4","PauseTurn",void 0);n("PauseTurn",function(n){function u(){return n.apply(this,arguments)||this}t(u,n);var r=u.prototype;return r.onEnter=function(){this.game.turnOffInput(),this.game.unChoose(),console.log("Pause"),o.showPopup(e.PAUSEPOPUP,!0,this.game.currentNumber())},r.onExit=function(){},r.onUpdate=function(){},u}(r));u._RF.pop()}}}));

System.register("chunks:///_virtual/Pulse.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,s,a,c,o,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,c=e.tween,o=e.Vec3,l=e.Component}],execute:function(){var u,f,p,h,b;s._RF.push({},"e0c33H0tlRKgb4xR/17Vv4D","Pulse",void 0);var d=a.ccclass,y=a.property;e("Pulse",d("Pulse")((p=t((f=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(t,"frstscale",p,r(t)),i(t,"scndscale",h,r(t)),i(t,"time",b,r(t)),t}n(t,e);var s=t.prototype;return s.start=function(){this.startPulseEffect()},s.startPulseEffect=function(){c(this.node).to(this.time,{scale:new o(this.frstscale,this.frstscale,1)},{easing:"sineInOut"}).to(this.time,{scale:new o(this.scndscale,this.scndscale,1)},{easing:"sineInOut"}).union().repeatForever().start()},s.update=function(e){},t}(l)).prototype,"frstscale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=t(f.prototype,"scndscale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=t(f.prototype,"time",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=f))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/RocketItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(e){var t,n,o,i,r,a,l,s,c,u,g,d,v,h,m,f,p,y,k,w,b,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,s=e.Node,c=e.Vec3,u=e.view,g=e.resources,d=e.SpriteFrame,v=e.Animation,h=e.Sprite,m=e.ParticleSystem2D,f=e.tween},function(e){p=e.Item,y=e.FIREWORK_PATH,k=e.ROCKET_PATH,w=e.TileType,b=e.Turn},function(e){S=e.default}],execute:function(){var I,C,P,M,R,O,T;a._RF.push({},"6b0094l8LJMia3bOkZdOrCP","RocketItem",void 0);var x=l.ccclass,B=l.property;e("default",(I=x("RocketItem"),C=B(s),P=B(s),I((O=t((R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"overlay",O,i(t)),o(t,"rockets",T,i(t)),t}n(t,e);var a=t.prototype;return a.onUse=function(){var t,n,o,i;if(!this.clicked&&0!=this.quantity&&!this.locked){e.prototype.onUse.call(this);var a=this.getRandomMatchingPair();if(a){var l=new Set(a),s=this.getRandomMatchingPair(l);if(s){var g=[].concat(a,s);null==(t=this.game)||t.node.addChild(this.overlay),this.overlay.active=!0,this.overlay.setPosition(new c),u.getVisibleSize().width<u.getVisibleSize().height&&(this.itemManager.botOverlay.active=!0),this.itemManager.botOverlay.setSiblingIndex(this.node.getSiblingIndex()-1),null==(n=this.game)||n.unChoose(),null==(o=this.game)||o.turnOffInput();for(var d,v=r(null==(h=this.game)||null==(h=h.board)?void 0:h.board);!(d=v()).done;)for(var h,m,f=d.value,y=r(f);!(m=y()).done;){m.value.node.setSiblingIndex(1)}for(var k,w=r(g);!(k=w()).done;){k.value.node.setSiblingIndex(this.overlay.getSiblingIndex()+1)}null==(i=this.itemManager)||i.hideExcept(p.ROCKET),this.showRocket(g),console.log("rocket"),this.quantity--,this.textChange()}}}},a.showRocket=function(e){var t=this;this.stopFunction();for(var n=u.getVisibleSize().width/5,o=u.getVisibleSize(),i=g.get(y,d),r=g.get(k,d),a=function(a){var l,s,g,d;t.rockets[a].active=!0;var p=t.rockets[a].getChildByName("Rocket1"),y=null==(l=t.rockets[a].getChildByName("Explosion"))?void 0:l.getComponent(v),k=null==(s=t.rockets[a].getChildByName("break"))?void 0:s.getComponent(v);console.log(k),t.rockets[a].angle=0,p.getComponent(h).spriteFrame=i;var w=t.rockets[a].getChildByName("Rocket1"),S=w?w.getChildByName("RocketDust"):null,I=S?S.getChildByName("whiteSmoke"):null;I.active=!0,null==I||null==(g=I.getComponent(m))||g.resetSystem();var C=S?S.getChildByName("yellow"):null;C.active=!0,null==C||null==(d=C.getComponent(m))||d.resetSystem(),t.rockets[a].setWorldPosition(new c(n*(a+1),-100)),p.active=!0;var P=a>=2?u.getVisibleSize().width+200:-200,M=t.getAngleBetween(t.rockets[a].worldPosition,new c(P,500));e[a].underKill=!0,t.rockets[a].setScale(.8,.8),f(t.rockets[a]).to(.5,{worldPosition:new c(n*(a+1),50)}).delay(.2).to(.1+.1*a,{angle:M-25}).to(.5,{worldPosition:new c(P,o.height/2)}).delay(.5).call((function(){t.rockets[a].setScale(e[a].originScale,e[a].originScale),p.getComponent(h).spriteFrame=r,I.active=!1,C.active=!1,t.rockets[a].angle=t.getAngleBetween(t.rockets[a].worldPosition,e[a].node.worldPosition),f(t.rockets[a]).to(.1+.09*a,{worldPosition:e[a].node.worldPosition},{easing:"sineOut"}).call((function(){var n;if(e[a].wholeSprite.active=!1,e[a].node.setSiblingIndex(1),p.active=!1,k.node.active=!0,k.node.angle=-t.rockets[a].angle,y.node.active=!0,y.node.angle=-t.rockets[a].angle,null==k||k.play(),null==y||y.play(),null==y||y.once(v.EventType.FINISHED,(function(){y.node.active=!1})),null==k||k.once(v.EventType.FINISHED,(function(){k.node.active=!1})),3==a){var o,i;null==(o=t.game)||o.turnOnInput(),null==(i=t.itemManager)||i.showAll(),t.enableFunction(),t.overlay.active=!1,t.itemManager.botOverlay.active=!1;for(var r=0;r<4;r++)e[r].onDead(t.game.board,r%2==0,r%2==0?e[r+1]:e[r-1]),e[r].kill()}null==(n=t.game)||n.switchTurn(b.MATCH)})).start()})).start()},l=0;l<e.length;l++)a(l)},a.getAngleBetween=function(e,t){var n=t.x-e.x,o=t.y-e.y;return 180*Math.atan2(o,n)/Math.PI-90+25},a.getRandomMatchingPair=function(e){var t;void 0===e&&(e=new Set);var n=null==(t=this.game)||null==(t=t.board)?void 0:t.board;if(!n)return null;for(var o,i=new Map,a=r(n);!(o=a()).done;)for(var l,s=o.value,c=r(s);!(l=c()).done;){var u=l.value,g=u;if(!e.has(g)){var d=u.getTypeID();d!==w.NONE&&(i.has(d)||i.set(d,[]),i.get(d).push(g))}}var v=Array.from(i.values()).filter((function(e){return e.length>=2}));if(0===v.length)return null;var h=v[Math.floor(Math.random()*v.length)].slice().sort((function(){return Math.random()-.5}));return[h[0],h[1]]},t}(S)).prototype,"overlay",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(R.prototype,"rockets",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=R))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/RocketSubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./GameManager.ts","./BaseSubTile.ts"],(function(e){var t,n,i,o,l,r,a,c,u,s,p,d,v,f,h,m,g,k,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,u=e.Sprite,s=e.Animation,p=e.ParticleSystem2D,d=e.tween,v=e.Vec3},function(e){f=e.TileType,h=e.getTilePositionByLevel,m=e.Item,g=e.Turn},function(e){k=e.AnimationHandler},function(e){y=e.default},function(e){b=e.BaseSubTile}],execute:function(){var T,A,S,x,w,B,C,I,P,D,M,E,H,z,N,O,R;r._RF.push({},"83479iP3vZCo72QyCNS0T0K","RocketSubTile",void 0);var F=a.ccclass,K=a.property;e("RocketSubTile",(T=F("RocketSubTile"),A=K(c),S=K(u),x=K(u),w=K(s),B=K(s),C=K(s),I=K(s),T((M=t((D=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,i(t,"particle",M,o(t)),i(t,"rocket1",E,o(t)),i(t,"rocket2",H,o(t)),i(t,"exploAnim",z,o(t)),i(t,"exploAnim2",N,o(t)),i(t,"tileBreak",O,o(t)),i(t,"tileBreak1",R,o(t)),t}n(t,e);var r=t.prototype;return r.onAttach=function(t){var n,i,o;e.prototype.onAttach.call(this,t),this.particle.active=!0,null==(n=this.tile)||n.wholeSprite.addChild(this.particle),null==(i=this.particle)||null==(i=i.getComponent(p))||i.resetSystem(),console.log(null==(o=this.tile)?void 0:o.node.position)},r.onDead=function(e,t,n){var i,o,r,a,c=this;if(this.kill(),null==(i=this.tile)||i.node.removeChild(this.particle),this.particle.active=!1,this.tile&&t&&n&&n.tile){for(var u,p=new Map,b=l(e.board);!(u=b()).done;)for(var T,A=u.value,S=l(A);!(T=S()).done;){var x=T.value,w=x.getTypeID();w===f.NONE||x.underKill||x===this.tile||x===n.tile||(p.has(w)||p.set(w,[]),p.get(w).push(x))}var B=Array.from(p.entries()).filter((function(e){e[0];return e[1].length>=2}));if(0!==B.length){var C=B[Math.floor(Math.random()*B.length)],I=C[0],P=C[1].sort((function(){return Math.random()-.5})).slice(0,2);P[0].underKill=!0,P[1].underKill=!0;var D=null==(o=this.node.parent)?void 0:o.getComponent(y);console.log("explode random 2 tiles of type:",I),this.rocket1.node.active=!0,this.rocket2.node.active=!0;var M=this.tile.node.position,E=n.tile.node.position,H=h(P[0].getCoordinate().x,P[0].getCoordinate().y,D.currentLevel,1).toVec3(),z=h(P[1].getCoordinate().x,P[1].getCoordinate().y,D.currentLevel,1).toVec3();if(null==(r=this.rocket1)||r.node.setPosition(M),null==(a=this.rocket2)||a.node.setPosition(E),P&&P.length>=2&&this.rocket1&&this.rocket2){var N;null==(N=this.node.parent)||N.getComponent(y).itemManager.lockItem(m.ROCKET);var O=L(M,H),R=L(E,z);k.animTile.push(new Promise((function(t){var n,i;d(c.rocket1.node).to(.2,{scale:new v(null==(n=c.tile)?void 0:n.originScale,null==(i=c.tile)?void 0:i.originScale,1),angle:O},{easing:"sineOut"}).to(.4,{position:H},{easing:"sineInOut"}).call((function(){var n,i,o,l,r,a,u,p;null==(n=c.node.parent)||n.getComponent(y).itemManager.unlockItem(m.ROCKET),P[0].onDead(e,!0,P[1]),P[0].kill(),c.rocket1.node.active=!1,c.rocket1.node.setScale(new v(1,1,1)),c.rocket1.node.angle=0,c.exploAnim.node.setPosition(null==(i=c.rocket1)?void 0:i.node.position),c.exploAnim.node.active=!0,null==(o=c.exploAnim)||o.play(),c.tileBreak.node.setPosition(null==(l=c.rocket1)?void 0:l.node.position),c.tileBreak.node.active=!0,null==(r=c.tileBreak)||r.play(),null==(a=c.tileBreak)||a.once(s.EventType.FINISHED,(function(){c.tileBreak.node.active=!1})),null==(u=c.exploAnim)||u.once(s.EventType.FINISHED,(function(){c.exploAnim.node.active=!1})),null==(p=c.node.parent)||null==(p=p.getComponent(y))||p.switchTurn(g.MATCH),t()})).start()}))),k.animTile.push(new Promise((function(t){var n,i;d(c.rocket2.node).to(.2,{scale:new v(null==(n=c.tile)?void 0:n.originScale,null==(i=c.tile)?void 0:i.originScale,1),angle:R},{easing:"sineOut"}).to(.4,{position:z},{easing:"sineInOut"}).call((function(){var n,i,o,l,r,a,u;P[1].onDead(e,!1,P[0]),P[1].kill(),c.rocket2.node.active=!1,c.rocket2.node.setScale(new v(1,1,1)),c.rocket2.node.angle=0,c.exploAnim2.node.setPosition(null==(n=c.rocket2)?void 0:n.node.position),c.exploAnim2.node.active=!0,null==(i=c.exploAnim2)||i.play(),c.tileBreak1.node.setPosition(null==(o=c.rocket2)?void 0:o.node.position),c.tileBreak1.node.active=!0,null==(l=c.tileBreak1)||l.play(),null==(r=c.tileBreak1)||r.once(s.EventType.FINISHED,(function(){c.tileBreak1.node.active=!1})),null==(a=c.exploAnim2)||a.once(s.EventType.FINISHED,(function(){console.log("2"),c.exploAnim2.node.active=!1})),null==(u=c.node.parent)||null==(u=u.getComponent(y))||u.switchTurn(g.MATCH),t()})).start()})))}}}},t}(b)).prototype,"particle",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(D.prototype,"rocket1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(D.prototype,"rocket2",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"exploAnim",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(D.prototype,"exploAnim2",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(D.prototype,"tileBreak",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(D.prototype,"tileBreak1",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=D))||P));function L(e,t){var n=t.x-e.x,i=t.y-e.y;return 180*Math.atan2(i,n)/Math.PI-90+25}r._RF.pop()}}}));

System.register("chunks:///_virtual/Rotate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,r,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,n=t.tween,a=t.Component}],execute:function(){var c;o._RF.push({},"48be9MUFW9F46I/P/pHk7MG","Rotate",void 0);var s=r.ccclass;r.property,t("Rotate",s("Rotate")(c=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var r=o.prototype;return r.start=function(){this.rotate()},r.rotate=function(){n(this.node).by(1.5,{angle:360}).repeatForever().start()},o}(a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/RotateStar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.tween,a=t.Vec3,s=t.Component}],execute:function(){var c;n._RF.push({},"619d7FYvcVN0b+/E8HeIEFB","RotateStar",void 0);var i=o.ccclass;o.property,t("RotateStar",i("RotateStar")(c=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){},o.rotateLoop=function(){r(this.node).parallel(r().to(.2,{angle:4}).to(1,{angle:-4}).to(.5,{angle:0}),r().to(.2,{scale:new a(1.1,1.1,1)},{easing:"sineInOut"}).to(.2,{scale:new a(1.2,1.2,1)},{easing:"sineInOut"})).repeatForever().start()},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Sand.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.tween,a=t.Component}],execute:function(){var s;n._RF.push({},"13955tJWsxLsLQhgQ3zAeZZ","Sand",void 0);var c=r.ccclass;r.property,t("Sand",c("Sand")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){this.rotate()},r.rotate=function(){var t=this;o(this.node).repeatForever(o().to(.5,{angle:180}).delay(.3).call((function(){return t.node.angle=0})).delay(.2)).start()},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ShuffleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseItem.ts"],(function(t){var e,i,s,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator},function(t){n=t.default}],execute:function(){var o;i._RF.push({},"438ffQp8BhHubr0sDJ7hdL0","ShuffleItem",void 0);var u=s.ccclass;s.property,t("ShuffleItem",u("ShuffleItem")(o=function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.onUse=function(){var e;this.clicked||this.locked||this.clicked||this.locked||(t.prototype.onUse.call(this),(null==(e=this.game)?void 0:e.board).shuffle(),this.quantity>0&&(this.quantity-=1,this.textChange()))},i}(n))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/ShuffleLevel.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"c215bmfg1lHvYYueRESS7r2","ShuffleLevel",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ShuffleLevel2.ts",["cc","./global.ts","./GravityManager.ts"],(function(t){var i,r,e,n;return{setters:[function(t){i=t.cclegacy},function(t){r=t.Direction,e=t.SubType},function(t){n=t.GravityManager}],execute:function(){i._RF.push({},"f7407cbz29Dxrai4GTJytW0","ShuffleLevel",void 0);t("ShuffleLevel",function(){function t(t){this.gridHeight=void 0,this.gridWidth=void 0,this.data=void 0,this.RocketTile=void 0,this.difficulty=void 0,this.Timer=void 0,this.grid=[],this.layerList=new Map,this.gridHeight=t.GridHeight,this.gridWidth=t.GridWidth,this.RocketTile=t.Tiles.RocketTiles,this.difficulty=t.Difficulty,this.Timer=t.Time,this.data=t}var i=t.prototype;return i.changeLevel=function(t){this.gridHeight=t.GridHeight,this.gridWidth=t.GridWidth,this.RocketTile=t.Tiles.RocketTiles,this.difficulty=t.Difficulty,this.Timer=t.Time,this.data=t},i.shuffle=function(){var t=this;this.grid=Array(this.gridHeight).fill(null).map((function(){return Array(t.gridWidth).fill(-1)}));var i=[];Object.entries(this.data.Tiles.NormalTiles).forEach((function(t){for(var r=t[0],e=t[1],n=Math.floor(Number(e)/2),s=0;s<n;s++)i.push({tileId:parseInt(r),positions:[]})}));for(var r=Math.floor(this.RocketTile/2),e=0;e<r;e++)i.push({tileId:8,positions:[]});for(var n=this.shuffleArray([].concat(i)),s=n.length,h=Math.floor(2*s/3),o=this.getAllPositions(),a=[].concat(o),f=function(){var i=n[c],r=t.getStrategicPositions(a,t.difficulty);i.positions=r,r.forEach((function(r){t.grid[r.y][r.x]=i.tileId;var e=a.findIndex((function(t){return t.x===r.x&&t.y===r.y}));e>-1&&a.splice(e,1)}))},c=0;c<h;c++)f();for(var l=h;l<s;l++){for(var u=n[l],d=[],g=0;g<2&&a.length>0;g++){var v=Math.floor(Math.random()*a.length),y=a.splice(v,1)[0];d.push(y),this.grid[y.y][y.x]=u.tileId}u.positions=d}return this.grid},i.getStrategicPositions=function(t,i){if(t.length<2)return t.splice(0,2);return this.getDistantPositions(t)},i.getNearbyPositions=function(t){for(var i=[],r=1/0,e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++){var s=t[e],h=t[n],o=this.calculateDistance(s,h);o<r&&(r=o,i=[s,h])}return i.forEach((function(i){var r=t.findIndex((function(t){return t.x===i.x&&t.y===i.y}));r>-1&&t.splice(r,1)})),2===i.length?i:this.getRandomPositions(t,2)},i.getDistantPositions=function(t){for(var i=[],r=0,e=0;e<t.length;e++)for(var n=e+1;n<t.length;n++){var s=t[e],h=t[n],o=this.calculateDistance(s,h);o>r&&(r=o,i=[s,h])}return i.forEach((function(i){var r=t.findIndex((function(t){return t.x===i.x&&t.y===i.y}));r>-1&&t.splice(r,1)})),2===i.length?i:this.getRandomPositions(t,2)},i.calculateDistance=function(t,i){return Math.abs(t.x-i.x)+Math.abs(t.y-i.y)},i.getRandomPositions=function(t,i){for(var r=[],e=0;e<i&&t.length>0;e++){var n=Math.floor(Math.random()*t.length);r.push(t.splice(n,1)[0])}return r},i.isEasyEnough=function(){for(var t=0,i=0;i<this.gridHeight;i++)for(var r=0;r<this.gridWidth;r++)-1!==this.grid[i][r]&&(r<this.gridWidth-1&&this.grid[i][r]===this.grid[i][r+1]&&t++,i<this.gridHeight-1&&this.grid[i][r]===this.grid[i+1][r]&&t++);return this.difficulty<=2?t>=8:this.difficulty<=3.5?t>=4&&t<=8:t<=3},i.generateMap=function(){return this.shuffle()},i.shuffleArray=function(t){for(var i=[].concat(t),r=i.length-1;r>0;r--){var e=Math.floor(Math.random()*(r+1)),n=[i[e],i[r]];i[r]=n[0],i[e]=n[1]}return i},i.getAllPositions=function(){for(var t=[],i=0;i<this.gridHeight;i++)for(var r=0;r<this.gridWidth;r++)t.push({x:r,y:i});return t},i.checkDirection=function(){switch(this.data.Gravity){case 0:return r.NONE;case 1:return r.LEFT;case 2:return r.RIGHT;case 3:return r.UP;case 4:return r.DOWN;default:return r.NONE}},i.getMapLayer=function(t){for(var i=this,r=Array.from({length:this.gridHeight},(function(){return Array(i.gridWidth).fill(0)})),s=Array.from({length:this.gridHeight},(function(){return Array(i.gridWidth).fill(0)})),h=Array.from({length:this.gridHeight},(function(){return Array(i.gridWidth).fill(0)})),o=[],a=0;a<this.gridHeight;a++)for(var f=0;f<this.gridWidth;f++)n.setCircle(this.data.Circle),this.data.Gravity&&(h[a][f]=1),8==t[a][f]?r[a][f]=1:(r[a][f]=0,o.push({x:f,y:a}));console.log(this.checkDirection()),n.changeGravity(this.checkDirection());for(var c=this.data.Tiles.BombEffects,l=0;l<c;l++){var u=Math.floor(Math.random()*o.length),d=o.splice(u,1)[0],g=d.x;s[d.y][g]=1}return this.layerList.set(e.ROCKET,r),this.layerList.set(e.BOOM,s),this.layerList.set(e.GRAVITY,h),this.layerList},i.getGrid=function(){return this.grid},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Star.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationHandler.ts"],(function(t){var e,i,n,o,r,a,l,s,c,u,h,d,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Sprite,s=t.Node,c=t.UITransform,u=t.tween,h=t.Vec3,d=t.ParticleSystem2D,p=t.Component},function(t){f=t.AnimationHandler}],execute:function(){var v,m,w,y,g,b,S,P,x,M,A,z,C;r._RF.push({},"33b93Zd5mNJZ4pCIbu6p1BS","Star",void 0);var k=a.ccclass,B=a.property;t("Star",(v=k("Star"),m=B(l),w=B(l),y=B(s),g=B(s),b=B(s),v((x=e((P=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).used=!1,n(e,"circle",x,o(e)),n(e,"star",M,o(e)),n(e,"match",A,o(e)),n(e,"trail",z,o(e)),n(e,"death",C,o(e)),e}i(e,t);var r=e.prototype;return r.putAt=function(t){var e,i,n=this;this.node.setPosition(t),this.star.node.active=!0,this.circle.node.active=!1;var o=null==(e=f.fillProgressBar)?void 0:e.currentStar;if(o){var r=o.getWorldPosition(),a=(null==(i=this.node.parent)||null==(i=i.getComponent(c))?void 0:i.convertToNodeSpaceAR(r))||r;f.animList.push(new Promise((function(t){u(n.node).delay(.8).call((function(){n.follow()})).to(.7,{position:a,scale:new h(2,2,1)},{easing:"quadOut"}).call((function(){f.callProgress(),n.trail.active=!1})).delay(.1).call((function(){n.explode()})).delay(.5).call((function(){n.kill(),t()})).start()})))}},r.putAtForHint=function(t){this.star.node.active=!1,this.node.setPosition(t),this.circle.node.active=!0},r.isUsed=function(){return this.used},r.reSpawn=function(){this.node.setScale(1.5,1.5),this.used=!0,this.node.active=!0},r.kill=function(){this.death.active=!1,this.trail.active=!1,this.node.scale=new h(1,1,1),this.star.node.active=!1,this.match.active=!1,this.circle.node.active=!1,this.used=!1,this.node.active=!1},r.firstAndLastMatch=function(){var t;this.match.active=!0,null==(t=this.match)||null==(t=t.getComponent(d))||t.resetSystem()},r.explode=function(){var t,e;this.death.active=!0,this.star.node.active=!1,null==(t=this.death)||null==(t=t.getComponent(d))||t.resetSystem(),null==(e=f.fillProgressBar)||e.checkActive()},r.follow=function(){var t;this.trail.active=!0,null==(t=this.trail)||null==(t=t.getComponent(d))||t.resetSystem()},r.winPut=function(t){var e,i=this;this.star.node.active=!0,this.circle.node.active=!1,this.node.setWorldPosition(t),this.follow();var n=null==(e=f.fillProgressBar)?void 0:e.currentStar;if(n){var o=n.getWorldPosition(),r=t,a=o,l=new h(r.x+.3*(a.x-r.x),r.y-80,0),s=new h(r.x+.7*(a.x-r.x),a.y-60,0);f.animList.push(new Promise((function(t){u({t:0}).to(.7,{t:1},{onUpdate:function(t){if(t){var e=t.t,n=Math.pow(1-e,3)*r.x+3*Math.pow(1-e,2)*e*l.x+3*(1-e)*Math.pow(e,2)*s.x+Math.pow(e,3)*a.x,o=Math.pow(1-e,3)*r.y+3*Math.pow(1-e,2)*e*l.y+3*(1-e)*Math.pow(e,2)*s.y+Math.pow(e,3)*a.y,c=new h(n,o,0);i.node.setWorldPosition(c);var u=1+e;i.node.setScale(u,u,1)}},easing:"quadOut"}).call((function(){i.kill(),t()})).start()})))}},e}(p)).prototype,"circle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(P.prototype,"star",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(P.prototype,"match",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(P.prototype,"trail",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(P.prototype,"death",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=P))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/StarPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Star.ts"],(function(t){var e,r,i,n,o,l,a,u,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,a=t._decorator,u=t.Prefab,s=t.instantiate,c=t.Component},function(t){p=t.Star}],execute:function(){var f,h,d,v,b,m,y;l._RF.push({},"56628dzOJROhJhl1rXXnlo8","StarPool",void 0);var P=a.ccclass,g=a.property;t("default",(f=P("StarPool"),h=g(u),d=g(Number),f((m=e((b=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"pathPrefab",m,n(e)),i(e,"size",y,n(e)),e.itemList=[],e}r(e,t);var l=e.prototype;return l.initialize=function(t){for(var e=0;e<this.size;e++){var r=s(this.pathPrefab);r&&(console.log("added child"),t.node.addChild(r)),this.itemList.push(null==r?void 0:r.getComponent(p))}this.returnAll()},l.getFirstItem=function(){for(var t,e=o(this.itemList);!(t=e()).done;){var r=t.value;if(!r.isUsed())return r.reSpawn(),r}return null},l.returnPool=function(t){t.kill()},l.returnMultiple=function(t){for(var e,r=o(t);!(e=r()).done;){e.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},e}(c)).prototype,"pathPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(b.prototype,"size",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=b))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/StartTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseTurn.ts"],(function(t){var n,e,i,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.Turn},function(t){r=t.BaseTurn}],execute:function(){e._RF.push({},"8446640he9A4aLCzzhPV5qN","StartTurn",void 0);t("StartTurn",function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.onEnter=function(){this.game.isWin()?this.game.switchTurn(i.LOAD):this.game.matchPair.length>0?this.game.switchTurn(i.MATCH):this.game.showItem()},r.onExit=function(){},e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/SubTilePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSubTile.ts"],(function(e){var t,i,r,n,o,l,u,a,s,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,u=e._decorator,a=e.Prefab,s=e.instantiate,c=e.Component},function(e){f=e.BaseSubTile}],execute:function(){var p,d,b,h,v;l._RF.push({},"6abaecMCXJMGaMNASv2EoDQ","SubTilePool",void 0);var P=u.ccclass,m=u.property;e("default",(p=P("SubTilePool"),d=m(a),p((v=t((h=function(e){function t(t){var i;return i=e.call(this)||this,r(i,"subTilePrefab",v,n(i)),i.size=70,i.itemList=[],i}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=s(this.subTilePrefab);i&&(console.log("added child"),e.node.addChild(i)),this.itemList.push(null==i?void 0:i.getComponent(f))}this.returnAll()},l.getFirstItem=function(){for(var e,t=o(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i}return null},l.returnPool=function(e){e.kill()},l.returnMultiple=function(e){for(var t,i=o(e);!(t=i()).done;){t.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(c)).prototype,"subTilePrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/SubTilePoolManager.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"c891fSXY/dP55IEbIOEqz8m","SubTilePoolManager",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/SuperRocketItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(e){var t,n,i,o,r,a,l,s,c,u,g,d,h,v,f,p,m,y,w,b,k,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,s=e.Node,c=e.Vec3,u=e.view,g=e.resources,d=e.SpriteFrame,h=e.Animation,v=e.Sprite,f=e.ParticleSystem2D,p=e.tween},function(e){m=e.Item,y=e.FIREWORK_PATH,w=e.ROCKET_PATH,b=e.TileType,k=e.Turn},function(e){S=e.default}],execute:function(){var P,I,R,M,x,C,O;a._RF.push({},"c0eedNhZqVOJaxyRPVN7ifG","SuperRocketItem",void 0);var T=l.ccclass,E=l.property;e("default",(P=T("SuperRocketItem"),I=E(s),R=E(s),P((C=t((x=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"overlay",C,o(t)),i(t,"rockets",O,o(t)),t}n(t,e);var a=t.prototype;return a.onUse=function(){var t,n,i,o;if(!this.clicked&&0!=this.quantity&&!this.locked){e.prototype.onUse.call(this);var a=new Set,l=this.getRandomMatchingPair(a);if(l){l.forEach((function(e){return a.add(e)}));var s=this.getRandomMatchingPair(a);if(s){s.forEach((function(e){return a.add(e)}));var g=this.getRandomMatchingPair(a);if(g){var d=[].concat(l,s,g);null==(t=this.game)||t.node.addChild(this.overlay),this.overlay.active=!0,this.overlay.setPosition(new c),console.log(this.itemManager.botOverlay),u.getVisibleSize().width<u.getVisibleSize().height&&(this.itemManager.botOverlay.active=!0),this.itemManager.botOverlay.setSiblingIndex(this.node.getSiblingIndex()-1),null==(n=this.game)||n.unChoose(),null==(i=this.game)||i.turnOffInput();for(var h,v=r(null==(f=this.game)||null==(f=f.board)?void 0:f.board);!(h=v()).done;)for(var f,p,y=h.value,w=r(y);!(p=w()).done;){p.value.node.setSiblingIndex(1)}for(var b,k=r(d);!(b=k()).done;){b.value.node.setSiblingIndex(this.overlay.getSiblingIndex()+1)}null==(o=this.itemManager)||o.hideExcept(m.SUPERROCKET),this.showRocket(d),console.log("rocket"),this.quantity--,this.textChange()}}}}},a.showRocket=function(e){var t=this;this.stopFunction();for(var n=u.getVisibleSize().width/7,i=u.getVisibleSize(),o=g.get(y,d),r=g.get(w,d),a=function(a){var l,s;t.rockets[a].active=!0;var g=t.rockets[a].getChildByName("Rocket1"),d=null==(l=t.rockets[a].getChildByName("Explosion"))?void 0:l.getComponent(h);console.log(d),t.rockets[a].angle=0,g.getComponent(v).spriteFrame=o;var m=null==(s=t.rockets[a].getChildByName("RocketDust"))?void 0:s.getComponent(f);t.rockets[a].setWorldPosition(new c(n*(a+1),-100)),null==m||m.resetSystem(),g.active=!0;var y=a>=3?u.getVisibleSize().width+200:-200,w=t.getAngleBetween(t.rockets[a].worldPosition,new c(y,500));e[a].underKill=!0,t.rockets[a].setScale(.8,.8),p(t.rockets[a]).to(.5,{worldPosition:new c(n*(a+1),50)}).delay(.2).to(.1+.1*a,{angle:w-25}).to(.5,{worldPosition:new c(y,i.height/2)}).delay(.5).call((function(){t.rockets[a].setScale(e[a].originScale,e[a].originScale),g.getComponent(v).spriteFrame=r,t.rockets[a].angle=t.getAngleBetween(t.rockets[a].worldPosition,e[a].node.worldPosition),p(t.rockets[a]).to(.3+.1*a,{worldPosition:e[a].node.worldPosition},{easing:"sineOut"}).call((function(){var i,o,r;(e[a].onDead(t.game.board,a%2==0,a%2==0?e[a+1]:e[a-1]),e[a].kill(),e[a].node.setSiblingIndex(1),g.active=!1,d.node.active=!0,d.node.angle=-t.rockets[a].angle,null==d||d.play(),null==d||d.once(h.EventType.FINISHED,(function(){d.node.active=!1,new c(n*(a+1),-u.getVisibleSize().height)})),5==a)&&(null==(o=t.game)||o.turnOnInput(),null==(r=t.itemManager)||r.showAll(),t.enableFunction(),t.overlay.active=!1,t.itemManager.botOverlay.active=!1);null==(i=t.game)||i.switchTurn(k.MATCH)})).start()})).start()},l=0;l<e.length;l++)a(l)},a.getAngleBetween=function(e,t){var n=t.x-e.x,i=t.y-e.y;return 180*Math.atan2(i,n)/Math.PI-90+25},a.getRandomMatchingPair=function(e){var t;void 0===e&&(e=new Set);var n=null==(t=this.game)||null==(t=t.board)?void 0:t.board;if(!n)return null;for(var i,o=new Map,a=r(n);!(i=a()).done;)for(var l,s=i.value,c=r(s);!(l=c()).done;){var u=l.value,g=u;if(!e.has(g)){var d=u.getTypeID();d!==b.NONE&&(o.has(d)||o.set(d,[]),o.get(d).push(g))}}var h=Array.from(o.values()).filter((function(e){return e.length>=2}));if(0===h.length)return null;var v=h[Math.floor(Math.random()*h.length)].slice().sort((function(){return Math.random()-.5}));return[v[0],v[1]]},t}(S)).prototype,"overlay",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(x.prototype,"rockets",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=x))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts"],(function(e){var t,i,n,o,s,a,r,l,c,h,u,p,f,d,g,S,y,T,w,b,m,v,C,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,r=e._decorator,l=e.Sprite,c=e.Node,h=e.Vec2,u=e.Vec3,p=e.tween,f=e.resources,d=e.SpriteFrame,g=e.Color,S=e.UITransform,y=e.Size,T=e.Component},function(e){w=e.Theme,b=e.TileType,m=e.getTilePath,v=e.SubType,C=e.getTilePositionByLevel},function(e){k=e.AnimationHandler}],execute:function(){var O,D,I,L,A,E,P,z,F,N,R,H,q;a._RF.push({},"4fdf9U4ak9Guqei/yF8Luzo","Tile",void 0);var x=r.ccclass,G=r.property;e("default",(O=x("Tile"),D=G(l),I=G(l),L=G(c),A=G(c),E=G(c),O((F=t((z=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"itemTypeSprite",F,o(t)),n(t,"backGroundSpite",N,o(t)),n(t,"wholeSprite",R,o(t)),n(t,"choosingEffect",H,o(t)),n(t,"rotatedChoosingEff",q,o(t)),t.underKill=!1,t.selfPromise=[],t.originScale=1,t.used=!1,t.theme=w.NONE,t.coordinate=new h,t.typeID=b.NONE,t.hintAnimation=null,t.subTileList=new Map,t.onClickCallbacks=[],t}i(t,e);var a=t.prototype;return a.start=function(){this.node.on(c.EventType.TOUCH_START,this.emitOnClickCallbacks,this)},a.getSubtileList=function(){return this.subTileList},a.show=function(){this.node.scale=new u(0,0,1),p(this.node).to(.3,{scale:new u(1,1,1)},{easing:"backOut"}).start()},a.setTheme=function(e){if(e!=this.theme){this.theme=e;var t=m(this.typeID,this.theme),i=f.get(t,d);this.itemTypeSprite&&(this.itemTypeSprite.spriteFrame=i)}},a.getTheme=function(){return this.theme},a.addOnClickCallback=function(e){this.onClickCallbacks.push(e)},a.emitOnClickCallbacks=function(){var e=this;this.onClickCallbacks.forEach((function(t){t(e)}))},a.clearOnClickCallbacks=function(){this.onClickCallbacks=[]},a.getCoordinate=function(){return this.coordinate},a.setCoordinate=function(e){this.coordinate=new h(e.x,e.y)},a.getTypeID=function(){return this.typeID},a.isUsed=function(){return this.used},a.reSpawn=function(){this.used=!0,this.wholeSprite.active=!0},a.hide=function(){this.setTypeID(b.NONE),this.wholeSprite.active=!1},a.kill=function(){this.wholeSprite.scale=new u(this.originScale,this.originScale),this.wholeSprite.angle=0,this.underKill=!1,this.setTypeID(b.NONE),this.used=!1,this.wholeSprite.active=!1},a.setTypeID=function(e){if(e!=this.typeID){this.typeID=e;var t=m(this.typeID,this.theme),i=f.get(t,d);this.itemTypeSprite&&(this.itemTypeSprite.spriteFrame=i)}},a.attachSubType=function(e,t){this.subTileList.set(t,e),e.onAttach(this)},a.detachAll=function(){for(var e,t=s(this.subTileList);!(e=t()).done;){var i=e.value;this.detachSubType(i[0])}},a.detachSubType=function(e){var t;null==(t=this.subTileList.get(e))||t.onDetach(),this.subTileList.delete(e)},a.onDead=function(e,t,i){var n,o=i.subTileList.get(v.GRAVITY);null==(n=this.subTileList.get(v.GRAVITY))||n.onDead(e,t,o),this.detachSubType(v.GRAVITY);for(var a,r=s(this.subTileList);!(a=r()).done;){var l=a.value,c=i.subTileList.get(l[0]);l[1].onDead(e,t,c),this.detachSubType(l[0])}},a.moveToRealPosition=function(e){var t=C(this.coordinate.x,this.coordinate.y,e);this.node.setPosition(new u(t.x,t.y))},a.onHint=function(){this.hintAnimation?this.hintAnimation.start():this.hintAnimation=p(this.wholeSprite).repeatForever(p().to(.2,{scale:new u(.7*this.originScale,.7*this.originScale)}).to(.1,{angle:20},{easing:"quadOut"}).to(.1,{angle:-20},{easing:"quadOut"}).to(.1,{angle:20},{easing:"quadOut"}).to(.1,{angle:0},{easing:"quadOut"}).to(.2,{scale:new u(this.originScale,this.originScale)})).start()},a.onUnHint=function(){var e;this.wholeSprite&&(null==(e=this.hintAnimation)||e.stop(),this.wholeSprite.angle=0,p(this.wholeSprite).to(.05,{scale:new u(this.originScale,this.originScale)},{easing:"backOut"}).start())},a.fadeIn=function(e){var t,i,n=null==(t=this.wholeSprite)?void 0:t.getComponent(l);n.color=new g(255,255,255,0),null==(i=this.wholeSprite)||i.setScale(new u),p(n).delay(e).to(.5,{color:new g(255,255,255,255)}).start(),p(this.wholeSprite).delay(e).to(.5,{scale:new u(this.originScale,this.originScale,1)}).start()},a.moveToRealPositionWithPadding=function(e,t,i,n,o){var s=this;void 0===t&&(t=!0),void 0===i&&(i=0),void 0===n&&(n="quadOut"),void 0===o&&(o=.5);var a=C(this.coordinate.x-1,this.coordinate.y-1,e),r=new u(a.x,a.y,0);t?k.animTile.push(new Promise((function(e){p(s.node).delay(i).to(o,{position:r},{easing:n}).call((function(){e()})).start()}))):this.node.setPosition(r)},a.reScale=function(e){var t,i;null==(t=this.wholeSprite)||t.setScale(new u(e,e)),this.originScale=e,null==(i=this.node.getComponent(S))||i.setContentSize(new y(100*e,100*e))},a.onChoose=function(){this.choosingEffect.active=!0,this.wholeSprite.setScale(new u(this.originScale,this.originScale)),p(this.wholeSprite).to(.1,{scale:new u(.7*this.originScale,.7*this.originScale)}).to(.1,{scale:new u(this.originScale,this.originScale)}).call((function(){})).start(),p(this.rotatedChoosingEff).repeatForever(p().by(1,{angle:360})).start()},a.onUnchoose=function(){this.choosingEffect.active=!1},a.shrink=function(){var e;null==(e=this.itemTypeSprite)||e.node.setScale(new u),p(this.itemTypeSprite.node).to(.3,{scale:new u(1,1)},{easing:"backOut"}).start()},t}(T)).prototype,"itemTypeSprite",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"backGroundSpite",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"wholeSprite",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(z.prototype,"choosingEffect",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(z.prototype,"rotatedChoosingEff",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=z))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/TilePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./Tile.ts"],(function(e){var t,i,n,o,r,l,a,s,u,c,f,d,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,s=e.Prefab,u=e.instantiate,c=e.Vec3,f=e.tween,d=e.Component},function(e){p=e.getTilePositionByLevel},function(e){h=e.default}],execute:function(){var v,g,b,P,m,y,L;l._RF.push({},"a66d1k6sRREzqELqEAJOtRR","TilePool",void 0);var k=a.ccclass,w=a.property;e("default",(v=k("TilePool"),g=w(s),b=w(Number),v((y=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"tilePrefab",y,o(t)),n(t,"size",L,o(t)),t.itemList=[],t.shaking=!1,t}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=u(this.tilePrefab);i&&(console.log("added child"),e.node.addChild(i)),this.itemList.push(null==i?void 0:i.getComponent(h)),null==i||i.setPosition(new c(-1e4,-1e4))}this.returnAll()},l.shake=function(e,t){var i=this;if(!this.shaking){this.shaking=!0;for(var n,o=r(this.itemList);!(n=o()).done;){var l=n.value;if(l.isUsed()){var a=p(l.getCoordinate().x,l.getCoordinate().y,t,1).toVec3();f(l.node).to(.05,{position:a.clone().add(new c(e,e))}).to(.05,{position:a.clone().subtract(new c(e,e))}).to(.05,{position:a}).call((function(){return i.shaking=!1})).start()}}}},l.getFirstItem=function(){for(var e,t=r(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i}return null},l.returnPool=function(e){e.kill(),e.node.setPosition(new c)},l.returnMultiple=function(e){for(var t,i=r(e);!(t=i()).done;){var n=t.value;n.kill(),n.detachAll()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(d)).prototype,"tilePrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(m.prototype,"size",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=m))||P));l._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./GameManager.ts"],(function(i){var t,e,r,n,s,o,a,m,g,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){s=i.cclegacy,o=i._decorator,a=i.Label,m=i.Component},function(i){g=i.Turn},function(i){h=i.default}],execute:function(){var c,u,l,p,T;s._RF.push({},"66f8aBZv6RGz5IalYI5GxGc","Timer",void 0);var f=o.ccclass,d=o.property;i("Timer",(c=f("Timer"),u=d(h),c((T=t((p=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return t=i.call.apply(i,[this].concat(s))||this,r(t,"gm",T,n(t)),t.hasTriggeredTimeUp=!1,t}e(t,i);var s=t.prototype;return s.start=function(){var i=this.node.getComponent(a);this.gm&&i&&(i.string=this.convertTime(this.gm.time)),this.hasTriggeredTimeUp=!1},s.convertTime=function(i){return Math.floor(i/60)+":"+(i%60).toString().padStart(2,"0")},s.update=function(i){if(this.gm&&!this.gm.ispause){var t=this.node.getComponent(a);this.gm.time>0&&this.hasTriggeredTimeUp&&(this.hasTriggeredTimeUp=!1),this.gm.time>0&&(this.gm.time-=i,this.gm.time<0&&(this.gm.time=0),t&&(t.string=this.convertTime(Math.ceil(this.gm.time)))),this.gm.time<=0&&!this.hasTriggeredTimeUp&&(console.log("Time up!"),this.hasTriggeredTimeUp=!0,this.gm.isWin()||this.gm.switchTurn(g.FAIL),t&&(t.string=this.convertTime(0)))}},s.isWin=function(){var i;null!=(i=this.gm)&&i.isWin()&&this.gm.time},t}(m)).prototype,"gm",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=p))||l));s._RF.pop()}}}));

System.register("chunks:///_virtual/type.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("TileConnect",void 0),e._RF.push({},"b1d490w25hJl6tzYD9F8pgq","type",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UImanager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./basePopup.ts"],(function(e){var n,t,o,i,a,r,p,s,l,u,c,h,d,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,p=e.Node,s=e.view,l=e.Widget,u=e.Vec3,c=e.tween,h=e.Component},function(e){d=e.Popup},function(e){f=e.BasePopup}],execute:function(){var g,v,b,m,y,P,w,C,z,A,N,I,D,U;a._RF.push({},"306aehmDdVK9KkrxQbG4DJr","UImanager",void 0);var B=r.ccclass,M=r.property;e("UImanager",(g=B("UImanager"),v=M(p),b=M(p),m=M(p),y=M(p),P=M(p),g(((U=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return n=e.call.apply(e,[this].concat(a))||this,o(n,"top",z,i(n)),o(n,"bot",A,i(n)),o(n,"overlay",N,i(n)),o(n,"itembar",I,i(n)),n.popupNodes=new Map,n.popupComponents=new Map,o(n,"pauseButton",D,i(n)),n}t(n,e);var a=n.prototype;return a.start=function(){n.instance=this,this.cachePopupNodes(),this.hideAllPopups(),this.resize(),s.on("canvas-resize",this.resize,this)},a.resize=function(){var e,n,t,o=s.getVisibleSize(),i=null==(e=this.itembar)?void 0:e.getComponent(l);i&&(o.width>=o.height?(this.bot.active=!1,null==(n=this.top)||n.addChild(this.itembar),i.target=this.top,i.isAlignRight=!0,i.right=100,i.isAlignVerticalCenter=!0,i.verticalCenter=10):(this.bot.active=!0,null==(t=this.bot)||t.addChild(this.itembar),i.target=this.bot,i.isAlignHorizontalCenter=!0,i.horizontalCenter=0,i.isAlignVerticalCenter=!0,i.verticalCenter=40))},n.togglePauseButton=function(e){},a.hideAllPopups=function(){var e=this;n.instance.overlay.active=!1,this.popupNodes.forEach((function(n,t){var o=e.popupComponents.get(t);o&&n.active&&o.onPopupHide(),n.active=!1}))},n.showPopup=function(e,t,o){if(void 0===t&&(t=!0),n.instance){t&&n.instance.hideAllPopups(),console.log(e);var i=n.instance.popupNodes.get(e),a=n.instance.popupComponents.get(e);i?(n.instance.overlay.active=!0,i.active=!0,i.scale=new u(0,0,1),c(i).to(.3,{scale:new u(1,1,1)},{easing:"backOut"}).start(),a&&a.onPopupShow(o)):console.warn("Popup not found: "+e)}else console.warn("UIManager instance not found!")},n.hidePopup=function(e){if(n.instance){var t=n.instance.popupNodes.get(e),o=n.instance.popupComponents.get(e);t&&t.active&&(n.instance.overlay.active=!1,o&&o.onPopupHide(),t.active=!1)}else console.warn("UIManager instance not found!")},n.hideAllPopups=function(){n.instance?(n.instance.hideAllPopups(),console.log("Hidden all popups")):console.warn("UIManager instance not found!")},a.cachePopupNodes=function(){var e=this;Object.values(d).forEach((function(n){var t=e.node.getChildByName(n);if(t){e.popupNodes.set(n,t);var o=t.getComponent(f);o&&(e.popupComponents.set(n,o),console.log("Cached popup component: "+n)),console.log("Cached popup: "+n)}else console.warn("Popup node not found: "+n)}))},a.onDestroy=function(){this.popupComponents.forEach((function(e,n){e&&e.onPopupDestroy()}))},n}(h)).instance=null,z=n((C=U).prototype,"top",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(C.prototype,"bot",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(C.prototype,"overlay",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(C.prototype,"itembar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(C.prototype,"pauseButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/victoryPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts"],(function(e){var t,n,a,i,r,l,o,s,c,u,p,h,g,f,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Label,s=e.Node,c=e.Sprite,u=e.Button,p=e.Vec3,h=e.tween,g=e.ParticleSystem2D,f=e.Tween},function(e){v=e.BasePopup}],execute:function(){var y,d,w,m,b,S,C,B,N,A,E,I,O;r._RF.push({},"5529e6jOhZOXIn3Hd8ylniS","victoryPopup",void 0);var P=l.ccclass,z=l.property;e("Victory",(y=P("Victory"),d=z(o),w=z([s]),m=z(c),b=z(c),S=z(u),y((N=t((B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,a(t,"level",N,i(t)),a(t,"stars",A,i(t)),a(t,"ribbon",E,i(t)),a(t,"glow",I,i(t)),a(t,"continue",O,i(t)),t}n(t,e);var r=t.prototype;return r.onPopupShow=function(e){var t=this;this.resetAura(),this.popStar((function(){t.dropAllStars((function(){t.trailStar(),t.playAura(),t.glow.node.active=!0,t.repeatStar(),t.playJiggle(),t.playLevel((function(){}),e),t.playContinue()}))}))},r.playLevel=function(e,t){this.level.string="LEVEL "+t,this.level.node.active=!0,this.level.node.scale=new p(0,0,1),h(this.level.node).to(.2,{scale:new p(1,1,1)},{}).call((function(){e()})).start()},r.playContinue=function(e){this.continue.node.active=!0,this.continue.node.scale=new p(0,0,1),h(this.continue.node).to(.05,{scale:new p(1,1,1)},{}).start()},r.playAura=function(){this.stars.forEach((function(e){var t,n,a,i=e.getChildByName("MainAura");i&&(i.active=!0,null==(t=i.getChildByName("Aura"))||null==(t=t.getComponent(g))||t.resetSystem(),null==(n=i.getChildByName("Aura2"))||null==(n=n.getComponent(g))||n.resetSystem(),null==(a=i.getChildByName("Aura1"))||null==(a=a.getComponent(g))||a.resetSystem(),console.log(i))}))},r.resetAura=function(){var e=this;this.level.string="",this.stars.forEach((function(t){var n=t.getChildByName("MainAura");n&&(n.active=!1),e.glow.node.active=!1;var a=t.getChildByName("Star"),i=null==a?void 0:a.getChildByName("Trail");i&&(i.active=!1)}))},r.playJiggle=function(e){h(this.ribbon.node).to(.08,{scale:new p(1.09,.98,1)}).to(.08,{scale:new p(.98,1.09,1)}).to(.08,{scale:new p(1,1,1)}).call((function(){e&&e()})).start()},r.popStar=function(e){var t=this;this.stars.forEach((function(e){var t=e.getChildByName("Star");t&&(f.stopAllByTarget(t),t.setScale(0,0,1),t.active=!0)}));var n=0;this.stars.slice().reverse().forEach((function(a,i){var r=a.getChildByName("Star"),l=.225*(1-.2*i);r&&h(r).delay(l).to(.45,{scale:new p(2.5,2.5,1)}).call((function(){++n===t.stars.length&&e&&e()})).start()}))},r.trailStar=function(){this.stars.forEach((function(e){var t=e.getChildByName("Star"),n=null==t?void 0:t.getChildByName("Trail");n&&(n.active=!0)}))},r.dropAllStars=function(e){var t=this;this.stars.forEach((function(n,a){var i=n.getChildByName("Star");i&&h(i).to(.1,{scale:new p(1.2,1.2,1)}).call((function(){a===t.stars.length-1&&e&&e()})).start()}))},r.repeatStar=function(){this.stars.forEach((function(e,t){var n=e.getChildByName("Star");n&&0==t?h(n).parallel(h().to(1.4,{scale:new p(1.2,1.2,1)},{easing:"sineInOut"}).to(1.4,{scale:new p(1.3,1.3,1)},{easing:"sineInOut"}),h().to(1.7,{angle:2}).to(1.5,{angle:5})).repeatForever().start():n&&1==t?h(n).parallel(h().to(1.4,{scale:new p(1.2,1.2,1)},{easing:"sineInOut"}).to(1.4,{scale:new p(1.3,1.3,1)},{easing:"sineInOut"}),h().to(1.7,{angle:0}).to(1.5,{angle:0})).repeatForever().start():n&&2==t&&h(n).parallel(h().to(1.4,{scale:new p(1.2,1.2,1)},{easing:"sineInOut"}).to(1.4,{scale:new p(1.3,1.3,1)},{easing:"sineInOut"}),h().to(1.7,{angle:-2}).to(1.5,{angle:-5})).repeatForever().start()}))},t}(v)).prototype,"level",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(B.prototype,"stars",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(B.prototype,"ribbon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(B.prototype,"glow",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(B.prototype,"continue",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=B))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/WinTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts","./AnimationHandler.ts","./LevelLoader.ts"],(function(t){var n,e,a,i,r,o,s,u,l;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,a=t.find,i=t.tween},function(t){r=t.Popup},function(t){o=t.UImanager},function(t){s=t.BaseTurn},function(t){u=t.AnimationHandler},function(t){l=t.LevelLoader}],execute:function(){e._RF.push({},"a99a1BvIGtDzZ+e6hcZIVzB","WinTurn",void 0);t("WinTurn",function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var s=e.prototype;return s.onEnter=function(){var t=this;this.game.isgameOver=!0,Promise.all(u.animList).then((function(){var n,e;(o.togglePauseButton(!1),0==(null==(n=u.fillProgressBar)?void 0:n.isLastStar()))&&(null==(e=u.fillProgressBar)||e.updateTillWin());var s=a("Canvas/Top/Timer");if(s){var c=s.getChildByName("clock");if(c){var f=c.getWorldPosition();t.game.starPool&&t.startStarAnimation(f,t.game.starPool)}}var m=t.game.time;i({time:m}).to(2,{time:0},{onUpdate:function(n){n&&(t.game.time=Math.max(0,n.time))}}).delay(.2).call((function(){o.showPopup(r.WINPOPUP,!0,l.getInstance().getCurrentLevelNumber())})).start()}))},s.startStarAnimation=function(t,n){for(var e=0;e<10;e++)i({}).delay(.2*e).call((function(){var e=n.getFirstItem();e&&e.winPut(t)})).start()},s.onExit=function(){},s.onUpdate=function(){},e}(s));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});